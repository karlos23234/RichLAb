<!DOCTYPE html>
<html lang="hy">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RichLab Web App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* Basic reset and theme variables */
        :root {
            --tg-theme-bg-color: #f8fafc;
            --tg-theme-text-color: #1f2937;
            --tg-theme-button-color: #3b82f6;
            --tg-theme-button-text-color: white;
            --tg-theme-secondary-bg-color: white;
        }

        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background-color: var(--tg-theme-bg-color);
            color: var(--tg-theme-text-color);
        }

        nav {
            display: flex;
            justify-content: space-around;
            background-color: var(--tg-theme-secondary-bg-color);
            padding: 10px 0;
            border-top: 1px solid #ddd;
            position: fixed;
            bottom: 0;
            width: 100%;
        }

        nav button {
            background: none;
            border: none;
            color: gray;
            font-size: 16px;
            cursor: pointer;
        }

        nav button.text-blue-600 {
            color: #3b82f6;
            font-weight: bold;
        }

        .section-content {
            display: none;
            padding: 20px;
            margin-bottom: 60px;
        }

        /* Popups */
        .popup-overlay {
            display: none;
            position: fixed;
            top:0;
            left:0;
            width:100%;
            height:100%;
            background: rgba(0,0,0,0.4);
            align-items: center;
            justify-content: center;
            z-index: 999;
        }

        .popup-content {
            background: white;
            padding: 20px;
            border-radius: 10px;
            max-width: 400px;
            width: 90%;
            transform: scale(0.95);
            transition: transform 0.2s ease;
        }

        .popup-content.show {
            transform: scale(1);
        }

        .btn {
            background-color: var(--tg-theme-button-color);
            color: var(--tg-theme-button-text-color);
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 10px;
        }

        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: green;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            z-index: 1000;
            display: none;
        }

        .card-hover:hover {
            transform: scale(1.03);
            transition: transform 0.2s;
        }

        input, select {
            width: 100%;
            padding: 8px;
            margin-top: 4px;
            margin-bottom: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>

    <!-- Sections -->
    <div id="home-section" class="section-content">
        <h2>Գլխավոր էջ</h2>
        <p>Բարի գալուստ RichLab!</p>
        <div class="text-4xl font-bold text-green-600">֏0</div>
        <button class="btn" onclick="startTasks()">Սկսել առաջադրանքները</button>
    </div>

    <div id="invite-section" class="section-content">
        <h2>Հրավիրեք ընկերներին</h2>
        <input type="text" id="referral-link" value="https://t.me/your_bot?start=ref123">
        <button class="btn" onclick="inviteFriends()">Share Referral</button>
    </div>

    <div id="center-section" class="section-content">
        <h2>Կենտրոն</h2>
        <button class="btn" onclick="dailyGoals()">Ամենօրյա նպատակներ</button>
    </div>

    <div id="video-section" class="section-content">
        <h2>Տեսանյութեր</h2>
        <button class="btn" onclick="watchVideo('https://www.youtube.com')">Դիտել Video Bonus</button>
    </div>

    <div id="cash-section" class="section-content">
        <h2>Հաշիվ / Ելքագրում</h2>
        <button class="btn" onclick="editPaymentMethod()">Փոխել վճարման մեթոդը</button>
        <button class="btn" onclick="withdraw()">Ելքագրել</button>
    </div>

    <!-- Navigation -->
    <nav>
        <button onclick="showHome()">Home</button>
        <button onclick="showInvite()">Invite</button>
        <button onclick="showCenter()">Center</button>
        <button onclick="showVideo()">Video</button>
        <button onclick="showCash()">Cash</button>
    </nav>

    <!-- Welcome Popup -->
    <div id="welcome-popup" class="popup-overlay">
        <div class="popup-content">
            <h3>Բարի գալուստ!</h3>
            <p>Դուք ստացել եք 8,000 դրամ բոնուս:</p>
            <button class="btn" onclick="closeWelcomePopup()">Փակել</button>
        </div>
    </div>

    <!-- Payment Popup -->
    <div id="payment-popup" class="popup-overlay">
        <div class="popup-content">
            <h3>Ընտրեք վճարման մեթոդը</h3>
            <select id="payment-method-select" onchange="selectPaymentMethod(this.value)">
                <option value="">Ընտրել մեթոդ</option>
                <option value="easypay">EasyPay</option>
                <option value="idram">idram</option>
                <option value="arca">ArCa</option>
                <option value="ameriabank">Ameriabank</option>
                <option value="ardshinbank">Ardshinbank</option>
                <option value="acba">ACBA</option>
                <option value="converse">Converse</option>
                <option value="linen">linen</option>
                <option value="crypto">Crypto</option>
            </select>
            <div class="details-section bg-gray-50 border border-gray-200 rounded-lg p-4"></div>
            <button class="btn" onclick="closePaymentPopup()">Փակել</button>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification"></div>

    <script>
        let tg;
        if (window.Telegram.WebApp) {
            tg = window.Telegram.WebApp;
            tg.expand();
        }

        document.addEventListener('DOMContentLoaded', () => {
            autoRegister();
            showHome();
        });

        // Sections
        function showSection(sectionId) {
            document.querySelectorAll('.section-content').forEach(s => s.style.display = 'none');
            const target = document.getElementById(sectionId);
            if (target) target.style.display = 'block';
        }

        function setActiveTab(tab) {
            const tabs = ['home', 'invite', 'center', 'video', 'cash'];
            document.querySelectorAll('nav button').forEach((btn, idx) => {
                btn.className = tabs[idx] === tab ? 'text-blue-600' : '';
            });
        }

        function showHome(){setActiveTab('home'); showSection('home-section');}
        function showInvite(){setActiveTab('invite'); showSection('invite-section');}
        function showCenter(){setActiveTab('center'); showSection('center-section');}
        function showVideo(){setActiveTab('video'); showSection('video-section');}
        function showCash(){setActiveTab('cash'); showSection('cash-section');}

        // Notifications
        function showNotification(message){
            const notif = document.getElementById('notification');
            notif.textContent = message;
            notif.style.display = 'block';
            setTimeout(()=>{notif.style.display='none'},3000);
        }

        // Welcome Popup
        function showWelcomePopup(){
            const popup = document.getElementById('welcome-popup');
            popup.style.display = 'flex';
            setTimeout(()=>{popup.querySelector('.popup-content').classList.add('show')},100);
        }

        function closeWelcomePopup(){
            const popup = document.getElementById('welcome-popup');
            popup.querySelector('.popup-content').classList.remove('show');
            setTimeout(()=>{popup.style.display='none'; updateBalanceDisplay('֏8,000');},200);
        }

        function updateBalanceDisplay(amount){
            document.querySelectorAll('.text-4xl.font-bold.text-green-600, .text-3xl.font-bold').forEach(el=>{
                el.textContent = amount;
            });
        }

        // Payment Popup
        function editPaymentMethod(){
            const popup = document.getElementById('payment-popup');
            popup.style.display = 'flex';
            setTimeout(()=>{popup.querySelector('.popup-content').classList.add('show')},100);
        }

        function closePaymentPopup(){
            const popup = document.getElementById('payment-popup');
            popup.querySelector('.popup-content').classList.remove('show');
            setTimeout(()=>{popup.style.display='none'},200);
        }

        function selectPaymentMethod(method){
            const details = document.querySelector('#payment-popup .details-section');
            let content = '';
            switch(method){
                case 'easypay': content=`<label>Հեռախոսահամար</label><input placeholder="+374 XX XXX XXX">`; break;
                case 'idram': content=`<label>idram հեռախոսահամար</label><input placeholder="+374 XX XXX XXX">`; break;
                case 'arca': content=`<label>ArCa քարտի համար</label><input placeholder="1234 5678 9012 3456">`; break;
                case 'ameriabank': content=`<label>Հաշվեհամար</label><input placeholder="220000000000000000"><label>Անուն Ազգանուն</label><input placeholder="Ձեր անունը">`; break;
                case 'ardshinbank': content=`<label>Հաշվեհամար</label><input placeholder="220000000000000000"><label>Անուն Ազգանուն</label><input placeholder="Ձեր անունը">`; break;
                case 'acba': content=`<label>Հաշվեհամար</label><input placeholder="220000000000000000"><label>Անուն Ազգանուն</label><input placeholder="Ձեր անունը">`; break;
                case 'converse': content=`<label>Հաշվեհամար</label><input placeholder="220000000000000000"><label>Անուն Ազգանուն</label><input placeholder="Ձեր անունը">`; break;
                case 'linen': content=`<label>Հաշվեհամար</label><input placeholder="Ձեր linen հաշվեհամարը"><label>Անուն Ազգանուն</label><input placeholder="Ձեր անունը">`; break;
                case 'crypto': content=`<label>Կրիպտո տեսակ</label><select><option>Bitcoin</option><option>Ethereum</option><option>USDT</option></select><label>Wallet հասցե</label><input placeholder="Ձեր wallet հասցեն">`; break;
            }
            details.innerHTML = content;
        }

        // Tasks / Videos
        function startTasks(){showNotification('Առաջադրանքների բաժինը շուտով կբացվի!');}
        function watchVideo(url){window.open(url,'_blank'); showNotification('Տեսանյութը բացվել է:');}
        function dailyGoals(){showNotification('Ամենօրյա նպատակների բաժինը շուտով կբացվի!');}
        function withdraw(){showNotification('Ելքագրման համար անհրաժեշտ է նվազագույնը ֏80,000 մնացորդ:');}

        // Referral
        function copyToClipboard(text){
            navigator.clipboard.writeText(text);
            showNotification('Հղումը պատճենվել է!');
        }
        function shareReferralLink(){
            const referralLink=document.getElementById('referral-link').value;
            copyToClipboard(referralLink);
        }
        function inviteFriends(){shareReferralLink();}

        // Auto register
        function autoRegister(){
            showWelcomePopup();
        }

        // Haptic
        document.addEventListener('click',function(e){
            if(e.target.tagName==='BUTTON'||e.target.closest('.card-hover')){
                if(tg && tg.HapticFeedback){tg.HapticFeedback.impactOccurred('light');}
            }
        });
    </script>
</body>
</html>

