
<!DOCTYPE html>
<html lang="hy">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RichLab - Табыс мүмкіндіктерін ашыңыз</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            background: var(--tg-theme-bg-color, #392d37);
            color: var(--tg-theme-text-color, #1f2937);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #272b3c 0%, #764ba2 100%);
        }
        .card-hover {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        .card-hover::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.6s ease;
        }
        .card-hover:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        .card-hover:hover::before {
            left: 100%;
        }
        .card-hover:active {
            transform: translateY(-4px) scale(0.98);
            transition: all 0.1s ease;
        }
        .earnings-card {
            background: linear-gradient(135deg, #4facfe 0%, #16292a 100%);
        }
        .task-card {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }
        .referral-card {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }
        .video-card {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        }
        .telegram-button {
            background: var(--tg-theme-button-color, #2c1111);
            color: var(--tg-theme-button-text-color, rgb(46, 8, 45));
            border: none;
            border-radius: 12px;
            padding: 12px 24px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            width: 100%;
            touch-action: manipulation;
            position: relative;
            overflow: hidden;
        }
        .telegram-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255,255,255,0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s ease, height 0.6s ease;
        }
        .telegram-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.4);
        }
        .telegram-button:hover::before {
            width: 300px;
            height: 300px;
        }
        .telegram-button:active {
            transform: translateY(-1px) scale(0.98);
            transition: all 0.1s ease;
        }
        .mini-app-container {
            max-width: 100%;
            padding: 0 16px;
            margin: 0 auto;
        }
        .section-card {
            background: var(--tg-theme-secondary-bg-color, rgb(30, 20, 54));
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }
        .section-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #667eea, #764ba2, #667eea);
            background-size: 200% 100%;
            animation: gradientShift 3s ease-in-out infinite;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .section-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }
        .section-card:hover::before {
            opacity: 1;
        }
        
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        /* Ultra Animation styles */
        .popup-overlay {
            backdrop-filter: blur(8px);
            animation: ultraFadeIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .popup-content {
            animation: ultraSlideUp 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
        }
        
        .popup-content::before {
            content: '';
            position: absolute;
            inset: -2px;
            background: linear-gradient(45deg, #667eea, #764ba2, #667eea, #764ba2);
            background-size: 400% 400%;
            border-radius: inherit;
            z-index: -1;
            animation: ultraBorderFlow 3s ease-in-out infinite;
            opacity: 0.7;
        }
        
        .popup-content.closing {
            animation: ultraSlideDown 0.6s cubic-bezier(0.6, -0.28, 0.735, 0.045);
        }
        
        @keyframes ultraFadeIn {
            from { 
                opacity: 0;
                backdrop-filter: blur(0px);
            }
            to { 
                opacity: 1;
                backdrop-filter: blur(8px);
            }
        }
        
        @keyframes ultraSlideUp {
            0% { 
                opacity: 0;
                transform: translateY(100px) scale(0.8) rotateX(15deg);
                filter: blur(5px);
            }
            50% {
                opacity: 0.8;
                transform: translateY(-10px) scale(1.02) rotateX(0deg);
                filter: blur(1px);
            }
            100% { 
                opacity: 1;
                transform: translateY(0) scale(1) rotateX(0deg);
                filter: blur(0px);
            }
        }
        
        @keyframes ultraSlideDown {
            0% { 
                opacity: 1;
                transform: translateY(0) scale(1) rotateX(0deg);
                filter: blur(0px);
            }
            50% {
                opacity: 0.5;
                transform: translateY(20px) scale(0.95) rotateX(-5deg);
                filter: blur(2px);
            }
            100% { 
                opacity: 0;
                transform: translateY(100px) scale(0.8) rotateX(15deg);
                filter: blur(5px);
            }
        }
        
        @keyframes ultraBorderFlow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .balance-update {
            animation: ultraBalanceGlow 1.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        @keyframes ultraBalanceGlow {
            0% { 
                transform: scale(1) rotateY(0deg);
                box-shadow: 0 0 0 rgba(34, 197, 94, 0);
                filter: brightness(1) saturate(1);
            }
            25% {
                transform: scale(1.08) rotateY(5deg);
                box-shadow: 0 0 30px rgba(34, 197, 94, 0.6);
                filter: brightness(1.2) saturate(1.3);
            }
            50% { 
                transform: scale(1.12) rotateY(0deg);
                box-shadow: 0 0 40px rgba(34, 197, 94, 0.8), 0 0 80px rgba(34, 197, 94, 0.4);
                filter: brightness(1.3) saturate(1.5);
            }
            75% {
                transform: scale(1.05) rotateY(-3deg);
                box-shadow: 0 0 25px rgba(34, 197, 94, 0.5);
                filter: brightness(1.1) saturate(1.2);
            }
            100% { 
                transform: scale(1) rotateY(0deg);
                box-shadow: 0 0 0 rgba(34, 197, 94, 0);
                filter: brightness(1) saturate(1);
            }
        }
        
        .success-checkmark {
            animation: checkmarkDraw 0.6s ease-out;
        }
        
        @keyframes checkmarkDraw {
            0% { 
                stroke-dasharray: 0 100;
                opacity: 0;
            }
            50% {
                opacity: 1;
            }
            100% { 
                stroke-dasharray: 100 0;
                opacity: 1;
            }
        }
        
        .loading-spinner {
            animation: ultraSpin 1.5s cubic-bezier(0.68, -0.55, 0.265, 1.55) infinite;
            position: relative;
        }
        
        .loading-spinner::before {
            content: '';
            position: absolute;
            inset: -2px;
            border-radius: 50%;
            background: conic-gradient(from 0deg, transparent, rgba(59, 130, 246, 0.8), transparent);
            animation: ultraSpinGlow 2s linear infinite;
        }
        
        @keyframes ultraSpin {
            0% { 
                transform: rotate(0deg) scale(1);
                filter: brightness(1);
            }
            25% {
                transform: rotate(90deg) scale(1.1);
                filter: brightness(1.2);
            }
            50% { 
                transform: rotate(180deg) scale(1);
                filter: brightness(1);
            }
            75% {
                transform: rotate(270deg) scale(1.1);
                filter: brightness(1.2);
            }
            100% { 
                transform: rotate(360deg) scale(1);
                filter: brightness(1);
            }
        }
        
        @keyframes ultraSpinGlow {
            0% { transform: rotate(0deg); opacity: 0.5; }
            50% { opacity: 1; }
            100% { transform: rotate(360deg); opacity: 0.5; }
        }
        
        /* Professional Linen Animations */
        .linen-card {
            position: relative;
            overflow: hidden;
        }
        
        .linen-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(59,130,246,0.1), rgba(147,51,234,0.1), transparent);
            transform: rotate(45deg);
            animation: linenProShine 4s infinite ease-in-out;
        }
        
        .linen-card:hover::before {
            animation: linenProShine 1.5s infinite ease-in-out;
        }
        
        @keyframes linenProShine {
            0% { 
                transform: translateX(-120%) translateY(-120%) rotate(45deg);
                opacity: 0;
            }
            20% {
                opacity: 1;
            }
            50% { 
                transform: translateX(0%) translateY(0%) rotate(45deg);
                opacity: 1;
            }
            80% {
                opacity: 1;
            }
            100% { 
                transform: translateX(120%) translateY(120%) rotate(45deg);
                opacity: 0;
            }
        }
        
        .linen-processing {
            animation: linenProPulse 2s infinite, linenProGlow 2s infinite;
        }
        
        @keyframes linenProPulse {
            0%, 100% { 
                transform: scale(1);
                filter: brightness(1);
            }
            25% {
                transform: scale(1.02);
                filter: brightness(1.1);
            }
            50% { 
                transform: scale(1.05);
                filter: brightness(1.2);
            }
            75% {
                transform: scale(1.02);
                filter: brightness(1.1);
            }
        }
        
        @keyframes linenProGlow {
            0%, 100% { 
                box-shadow: 0 0 30px rgba(59, 130, 246, 0.4), 0 0 60px rgba(147, 51, 234, 0.2);
                border-color: #3b82f6;
            }
            25% {
                box-shadow: 0 0 40px rgba(99, 102, 241, 0.5), 0 0 80px rgba(139, 92, 246, 0.3);
                border-color: #6366f1;
            }
            50% { 
                box-shadow: 0 0 50px rgba(139, 92, 246, 0.6), 0 0 100px rgba(168, 85, 247, 0.4);
                border-color: #8b5cf6;
            }
            75% {
                box-shadow: 0 0 40px rgba(168, 85, 247, 0.5), 0 0 80px rgba(59, 130, 246, 0.3);
                border-color: #a855f7;
            }
        }
        
        .linen-success {
            animation: linenProSuccess 1.5s ease-out;
        }
        
        @keyframes linenProSuccess {
            0% { 
                transform: scale(1) rotateY(0deg);
                background: linear-gradient(135deg, #3b82f6, #6366f1);
                box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
            }
            15% { 
                transform: scale(1.08) rotateY(5deg);
                background: linear-gradient(135deg, #10b981, #059669);
                box-shadow: 0 0 40px rgba(16, 185, 129, 0.6);
            }
            30% { 
                transform: scale(1.12) rotateY(-3deg);
                background: linear-gradient(135deg, #34d399, #10b981);
                box-shadow: 0 0 60px rgba(52, 211, 153, 0.8);
            }
            50% { 
                transform: scale(1.05) rotateY(2deg);
                background: linear-gradient(135deg, #6ee7b7, #34d399);
                box-shadow: 0 0 80px rgba(110, 231, 183, 0.9);
            }
            70% {
                transform: scale(1.02) rotateY(-1deg);
                background: linear-gradient(135deg, #10b981, #059669);
                box-shadow: 0 0 40px rgba(16, 185, 129, 0.6);
            }
            100% { 
                transform: scale(1) rotateY(0deg);
                background: linear-gradient(135deg, #3b82f6, #6366f1);
                box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
            }
        }
        
        .linen-particles {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }
        
        .linen-particle {
            position: absolute;
            width: 6px;
            height: 6px;
            background: linear-gradient(45deg, #3b82f6, #8b5cf6);
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
            animation: linenProParticleFloat 4s infinite ease-in-out;
        }
        
        .linen-particle:nth-child(2n) {
            background: linear-gradient(45deg, #6366f1, #a855f7);
            box-shadow: 0 0 10px rgba(99, 102, 241, 0.5);
            animation-delay: 0.5s;
        }
        
        .linen-particle:nth-child(3n) {
            background: linear-gradient(45deg, #8b5cf6, #3b82f6);
            box-shadow: 0 0 10px rgba(139, 92, 246, 0.5);
            animation-delay: 1s;
        }
        
        @keyframes linenProParticleFloat {
            0% {
                opacity: 0;
                transform: translateY(120px) scale(0) rotate(0deg);
                filter: brightness(1);
            }
            15% {
                opacity: 1;
                transform: translateY(90px) scale(1.2) rotate(45deg);
                filter: brightness(1.3);
            }
            50% {
                opacity: 1;
                transform: translateY(0px) scale(1) rotate(180deg);
                filter: brightness(1.5);
            }
            85% {
                opacity: 1;
                transform: translateY(-90px) scale(1.2) rotate(315deg);
                filter: brightness(1.3);
            }
            100% {
                opacity: 0;
                transform: translateY(-120px) scale(0) rotate(360deg);
                filter: brightness(1);
            }
        }
        
        .linen-icon-bounce {
            animation: linenIconBounce 2s infinite;
        }
        
        @keyframes linenIconBounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        
        .linen-text-wave {
            animation: linenTextWave 2s infinite;
        }
        
        @keyframes linenTextWave {
            0%, 100% { transform: translateY(0px); }
            25% { transform: translateY(-2px); }
            50% { transform: translateY(0px); }
            75% { transform: translateY(2px); }
        }
        
        .linen-border-dance {
            position: relative;
        }
        
        .linen-border-dance::after {
            content: '';
            position: absolute;
            inset: -3px;
            background: linear-gradient(45deg, #3b82f6, #6366f1, #8b5cf6, #a855f7, #3b82f6);
            background-size: 300% 300%;
            border-radius: inherit;
            z-index: -1;
            animation: linenProBorderDance 4s infinite ease-in-out;
            opacity: 0.6;
        }
        
        .linen-border-dance:hover::after {
            animation: linenProBorderDance 1.5s infinite ease-in-out;
            opacity: 1;
        }
        
        .linen-border-dance.selected::after {
            background: linear-gradient(45deg, #10b981, #059669, #047857, #065f46, #10b981);
            animation: linenProBorderDance 1s infinite ease-in-out;
            opacity: 1;
        }
        
        @keyframes linenProBorderDance {
            0%, 100% { 
                background-position: 0% 50%;
                transform: scale(1);
            }
            25% {
                background-position: 25% 25%;
                transform: scale(1.01);
            }
            50% { 
                background-position: 100% 50%;
                transform: scale(1);
            }
            75% {
                background-position: 75% 75%;
                transform: scale(1.01);
            }
        }
        
        .linen-money-rain {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }
        
        .money-symbol {
            position: absolute;
            font-size: 20px;
            color: #14b8a6;
            animation: moneyFall 4s infinite linear;
        }
        
        @keyframes moneyFall {
            0% {
                opacity: 0;
                transform: translateY(-50px) rotate(0deg);
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: translateY(400px) rotate(360deg);
            }
        }
        
        .linen-ripple {
            position: relative;
            overflow: hidden;
        }
        
        .linen-ripple::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(20, 184, 166, 0.3);
            transform: translate(-50%, -50%);
            animation: linenRipple 2s infinite;
        }
        
        @keyframes linenRipple {
            0% {
                width: 0;
                height: 0;
                opacity: 1;
            }
            100% {
                width: 300px;
                height: 300px;
                opacity: 0;
            }
        }
        
        .deposit-method {
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }
        
        .deposit-method.selected {
            border-color: #3b82f6;
            background: #041429;
        }
        
        .deposit-method:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .withdraw-method {
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }
        
        .withdraw-method.selected {
            border-color: #ef4444;
            background: #321e3a;
        }
        
        .withdraw-method:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        /* Ultra Navigation Styles */
        .nav-btn {
            position: relative;
            overflow: hidden;
        }
        
        .nav-btn:hover {
            transform: translateY(-3px) scale(1.05);
        }
        
        .nav-btn:hover span:first-child {
            transform: scale(1.2) rotateZ(5deg);
        }
        
        .nav-btn:active {
            transform: translateY(-1px) scale(0.95);
        }
        
        .nav-btn.active {
            color: #3b82f6;
        }
        
        .nav-btn.active span:first-child {
            animation: navBounce 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .nav-ripple {
            background: radial-gradient(circle, rgba(59, 130, 246, 0.2) 0%, transparent 70%);
            transform: scale(0);
            transition: transform 0.4s ease-out;
        }
        
        .nav-btn:active .nav-ripple {
            transform: scale(1);
        }
        
        @keyframes navBounce {
            0%, 100% { transform: scale(1) rotateZ(0deg); }
            25% { transform: scale(1.3) rotateZ(-5deg); }
            50% { transform: scale(1.1) rotateZ(5deg); }
            75% { transform: scale(1.2) rotateZ(-2deg); }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-full">
    <!-- Login Screen -->
    <div id="login-screen" class="fixed inset-0 bg-gradient-to-br from-blue-600 to-purple-700 flex items-center justify-center z-50">
        <div class="text-center text-white p-8">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT39Ld4zVMrJLAOy9Ltyh1kWvyRPsFWXKogGA&s" alt="">
            <h1 class="text-3xl font-bold mb-4">RichLab</h1>
            <p class="text-xl mb-8 opacity-90">Табыс мүмкіндіктерін ашыңыз</p>
            
            <div id="login-content">
                <button onclick="loginWithTelegram()" class="bg-white text-blue-600 px-8 py-4 rounded-xl font-bold text-lg mb-4 w-full max-w-sm">
                    <span class="mr-2">📱</span>
                   Telegram арқылы кіру
                </button>
                <p class="text-sm opacity-75">Қауіпсіз және жылдам қол жеткізу</p>
            </div>
            
            <div id="login-loading" class="hidden">
                <div class="loading-spinner w-8 h-8 border-4 border-white border-t-transparent rounded-full mx-auto mb-4"></div>
                <p class="text-lg">Жүйеге кіруде...</p>
            </div>
        </div>
    </div>

    <!-- Mobile Header -->
    <header class="gradient-bg text-white py-4 sticky top-0 z-40">
        <div class="mini-app-container">
            <div class="flex items-center justify-between">
                <h1 class="text-2xl font-bold">RichLab</h1>
                <div class="flex items-center space-x-3">
                    <div id="user-info" class="text-sm opacity-90"></div>
                    <button onclick="showDepositModal()" class="bg-white/20 text-white px-3 py-1 rounded-lg text-sm font-medium">
                        + Қосу
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="mini-app-container py-6">
        <!-- Home Section -->
        <div id="home-section" class="section-content">
            <!-- Balance Card -->
            <div class="section-card text-center mb-6" id="balance-card">
                <h2 class="text-2xl font-bold mb-2">Жалпы қалдық</h2>
                <div class="text-4xl font-bold text-green-600 mb-4" id="main-balance">₸0</div>
                <p class="text-gray-600">Ақша қосып, табыс таба бастаңыз</p>
                <button onclick="showDepositModal()" class="mt-4 bg-blue-500 text-white px-6 py-2 rounded-lg font-medium">
                    Ақша қосу
                </button>
            </div>

            <!-- Earnings Stats -->
            <div class="grid grid-cols-3 gap-3 mb-6">
                <div class="task-card text-white p-4 rounded-xl text-center">
                    <div class="text-xl font-bold">₸2500</div>
                    <div class="text-sm opacity-90">Тапсырма</div>
                    <div class="text-xs opacity-75">0 дайын</div>
                </div>
                <div class="referral-card text-white p-4 rounded-xl text-center">
                    <div class="text-xl font-bold">֏4000</div>
                    <div class="text-sm opacity-90">Шақыру</div>
                    <div class="text-xs opacity-75">0 шақырылған</div>
                </div>
                <div class="video-card text-gray-800 p-4 rounded-xl text-center">
                    <div class="text-xl font-bold">₸2700</div>
                    <div class="text-sm opacity-90">Бейне</div>
                    <div class="text-xs opacity-75">0 қаралды</div>
                </div>
            </div>

            <!-- Activities Section -->
            <div class="mb-6">
                <h3 class="text-xl font-bold mb-4">Табыс табу жолдары</h3>
                
                <div class="space-y-3">
                    <div class="section-card card-hover" onclick="showCenter()">
                        <div class="flex items-center space-x-4">
                            <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                                <span class="text-2xl">📱</span>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-semibold text-gray-800">Тапсырмалар</h4>
                                <p class="text-gray-600 text-sm">Қолданбалар мен ойындарды қолданып көріңіз</p>
                                <p class="text-purple-600 font-bold text-sm">+₸2500 әрқайсысы үшін</p>
                            </div>
                            <div class="text-gray-400">→</div>
                        </div>
                    </div>

                    <div class="section-card card-hover" onclick="showInvite()">
                        <div class="flex items-center space-x-4">
                            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                                <span class="text-2xl">👥</span>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-semibold text-gray-800">Достарды шақырыңыз</h4>
                                <p class="text-gray-600 text-sm">Әрбір шақыру үшін сыйақы алыңыз</p>
                                <p class="text-green-600 font-bold text-sm">+₸4000 + 10% табыс</p>
                            </div>
                            <div class="text-gray-400">→</div>
                        </div>
                    </div>

                    <div class="section-card card-hover" onclick="showVideo()">
                        <div class="flex items-center space-x-4">
                            <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center">
                                <span class="text-2xl">📺</span>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-semibold text-gray-800">Бейнелерді көріңіз</h4>
                                <p class="text-gray-600 text-sm">Көріп, ақша табыңыз</p>
                                <p class="text-red-600 font-bold text-sm">+₸2700 әрқайсысы үшін</p>
                            </div>
                            <div class="text-gray-400">→</div>
                        </div>
                    </div>

                    <div class="section-card card-hover" onclick="handleWithdrawClick()">
                        <div class="flex items-center space-x-4">
                            <div class="w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center">
                                <span class="text-2xl">💰</span>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-semibold text-gray-800">Қолма-қол ақша алу</h4>
                                <p class="text-gray-600 text-sm">Тапқан ақшаңызды алып тастаңыз.</p>
                                <p class="text-yellow-600 font-bold text-sm">₸125,000 + 15 жұмыс күні</p>
                                <p class="text-orange-600 text-xs mt-1">⚠️ Ақша сіздің шотыңызға 15 жұмыс күні ішінде есептеледі.</p>
                            </div>
                            <div class="text-gray-400">→</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Other sections remain the same as before -->
        <!-- Invite Section -->
        <div id="invite-section" class="section-content" style="display: none;">
            <div class="section-card mb-6">
                <!-- User Profile Header -->
                <div class="bg-gradient-to-r from-blue-500 to-purple-600 text-white p-5 rounded-xl mb-4 relative overflow-hidden">
                    <!-- Background Pattern -->
                    <div class="absolute inset-0 opacity-10">
                        <div class="absolute top-0 left-0 w-32 h-32 bg-white rounded-full -translate-x-16 -translate-y-16"></div>
                        <div class="absolute bottom-0 right-0 w-24 h-24 bg-white rounded-full translate-x-12 translate-y-12"></div>
                    </div>
                    
                    <!-- Profile Section -->
                    <div class="relative z-10">
                        <div class="flex items-center justify-between mb-4">
                            <!-- Left: User Info -->
                            <div class="flex items-center space-x-4">
                                <!-- Profile Avatar -->
                                <div class="w-16 h-16 bg-white/20 rounded-full flex items-center justify-center cursor-pointer hover:bg-white/30 hover:scale-110 transition-all duration-300" onclick="showProfileModal()">
                                    <span class="text-2xl">👤</span>
                                </div>
                                
                                <!-- User Details -->
                                <div>
                                    <div class="flex items-center space-x-2 mb-1">
                                        <h3 class="text-xl font-bold cursor-pointer hover:text-yellow-200 hover:scale-105 transition-all duration-300" onclick="showProfileModal()">Դեմո</h3>
                                        <div class="bg-yellow-400 text-yellow-900 text-xs font-bold px-2 py-1 rounded-full animate-pulse">PRO</div>
                                    </div>
                                    <div class="flex items-center space-x-3 text-sm opacity-90">
                                        <span class="cursor-pointer hover:text-yellow-200 hover:scale-105 transition-all duration-300 bg-white/10 px-2 py-1 rounded-full" onclick="showDepositModal()">+ Ավելացնել</span>
                                        <span class="text-xs opacity-75">•</span>  
                                    </div>
                                </div>
                            </div>
                        <!-- Ձեր գոյություն ունեցող div -->
                        <div id="user-id-container"onclick="showUserIdModal()">...001</div>

                        <script>
                        (function() {
                        const tg = window.Telegram?.WebApp;
                        if (!tg) return;

                        const user = tg.initDataUnsafe?.user;
                        if (!user?.id) return;

                         const userId = user.id;
                         window.TG_USER_ID = userId;

                        // Ներկա div-ի մեջ դնում է user id
                        const container = document.getElementById('user-id-container');
                        if (container) container.innerText = userId;
                    })();
                    </script>

                            <!-- Right: Status & Language -->
                            <div class="text-right">
                                <div class="bg-green-500 text-white text-xs font-bold px-3 py-1 rounded-full mb-2 cursor-pointer hover:bg-green-400 hover:scale-105 transition-all duration-300" onclick="showStatusModal()">
                                    <div class="flex items-center space-x-1">
                                        <span class="w-2 h-2 bg-white rounded-full animate-pulse"></span>
                                        <span>Жаңа пайдаланушы</span>
                                    </div>
                                </div>                            
                            </div>
                        </div>
                        
                        <!-- Balance Display -->
                        <div class="bg-white/10 backdrop-blur-sm rounded-lg p-4 text-center cursor-pointer hover:bg-white/20 hover:scale-105 transition-all duration-300" onclick="showBalanceModal()">
                            <div class="text-sm opacity-90 mb-1">Ағымдағы баланс</div>
                            <div class="text-3xl font-bold mb-2" id="invite-balance">₸${currentBalance.toLocaleString()}</div>
                            <div class="flex items-center justify-center space-x-4 text-xs opacity-75">
                                <span>💰 Ակտիվ</span>
                                <span>•</span>
                                <span>🔒 Անվտանգ</span>
                                <span>•</span>
                                <span>⚡ Ակնթարթային</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Stats Section -->
                <div class="mb-4">
                    <h4 class="font-semibold text-gray-800 mb-3">Статикалық</h4>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between p-3 bg-purple-50 rounded-lg">
                            <div class="flex items-center space-x-3">
                                <span class="text-2xl">🎯</span>
                                <div>
                                    <div class="font-medium">Тапсырма</div>
                                    <div class="text-sm text-gray-600">₸2,000 әр тапсырма үшін</div>
                                </div>
                            </div>
                            <div class="text-2xl font-bold text-purple-600">0</div>
                        </div>
                        
                        <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg">
                            <div class="flex items-center space-x-3">
                                <span class="text-2xl">👥</span>
                                <div>
                                    <div class="font-medium">Шақырылған</div>
                                    <div class="text-sm text-gray-600">₸4,000 әрбір билет үшін</div>
                                </div>
                            </div>
                            <div class="text-2xl font-bold text-green-600">0</div>
                        </div>
                        
                        <div class="flex items-center justify-between p-3 bg-red-50 rounded-lg">
                            <div class="flex items-center space-x-3">
                                <span class="text-2xl">📺</span>
                                <div>
                                    <div class="font-medium">Бейне</div>
                                    <div class="text-sm text-gray-600">₸2,300 per video</div>
                                </div>
                            </div>
                            <div class="text-2xl font-bold text-red-600">0</div>
                        </div>
                        
                        <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg border-2 border-blue-200">
                            <div class="flex items-center space-x-3">
                                <span class="text-2xl">💰</span>
                                <div>
                                    <div class="font-bold text-blue-800">Жалпы табыс</div>
                                </div>
                            </div>
                            <div class="text-2xl font-bold text-blue-600"balance-update>₸8,000</div>
                        </div>
                    </div>
                </div>
                 <!-- Referral Link -->
                <div class="bg-gray-50 p-3 rounded-lg mb-4">
                    <label for="referral-link" class="block text-sm font-medium text-gray-700 mb-2">
                        Есеп сілтемеңіз
                    </label>
                    <div class="flex">
                        <input 
                            type="text" 
                            id="referral-link"
                            value="https://t.me/BirdsGolden_bot/app?startapp=r_" 
                            readonly 
                            class="flex-1 px-3 py-2 border border-gray-300 rounded-l-lg bg-white text-sm"
                        >
                        <button 
                            onclick="shareReferralLink()"
                            class="telegram-button rounded-l-none px-4 py-2 text-sm"
                        >
                            Бөлісу
                        </button>
                    </div>
                </div>
                <script>
                // Ստուգում cumulative total՝ localStorage-ում
                function getTotal() {
                    return parseInt(localStorage.getItem("totalBonus") || "0", 10);
            }

                function setTotal(value) {
    localStorage.setItem("totalBonus", value);
}

                // Simulate visitor
            function simulateVisitor() {
                let total = getTotal();
                total = 4000;
                setTotal(total);
                alert(`🎉 Simulated visitor! +4000 ₸ ստացվեց\n💰 Հիմնական գումար՝ ${total} ₸`);
            }

                // Generate referral link
            function generateReferralLink() {
                const myId = localStorage.getItem("myId") || Math.floor(Math.random()*1000000);
                localStorage.setItem("myId", myId);
                const referralLink = `${window.location.origin}${window.location.pathname}?startapp=r_${myId}`;
                alert("📩 Ұсыныс сілтемесін көшіріңіз немесе жіберіңіз.:\n" + referralLink);
            }

               // Աշխատեցնելու համար պետք է համապատասխան կոճակները լինեն HTML-ում
                document.addEventListener("DOMContentLoaded", () => {
                const simulateBtn = document.getElementById("simulate-visitor");
                const inviteBtn = document.getElementById("invite-btn");

                if(simulateBtn) simulateBtn.addEventListener("click", simulateVisitor);
                if(inviteBtn) inviteBtn.addEventListener("click", generateReferralLink);
           });
        </script>



                <!-- Benefits Section -->
                <div class="bg-gradient-to-r from-purple-500 to-pink-500 text-white p-4 rounded-lg mb-4">
                    <h4 class="font-bold mb-3">Есептермен үлкен табыс әлеуетін ашыңыз:</h4>
                    <p class="text-sm opacity-90 mb-3">
                        Біздің платформадағы достарыңызға, отбасыңызға немесе ізбасарларыңызға есеп беру арқылы RichLab арқылы табыс көкжиегіңізді кеңейтіңіз. Міне, сіз мыналарды аласыз:
                    </p>
                    <div class="space-y-2">
                        <div class="flex items-center space-x-2">
                            <span class="text-yellow-300">💰</span>
                            <span class="text-sm">Әрбір сәтті тіркелу үшін қосымша 4000₸ алыңыз.</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-green-300">📈</span>
                            <span class="text-sm">Егер сіз шақырған пайдаланушы ақша тапса, сіз сол соманың 10%-ын сыйақы ретінде аласыз.:</span>
                        </div>
                    </div>
                </div>

               
                <!-- Referrals List -->
                <div class="bg-white border border-gray-200 rounded-lg p-4">
                    <h4 class="font-semibold mb-3">Сіздің есептеріңіз</h4>
                    <div class="text-center py-8 text-gray-500">
                        <div class="text-4xl mb-2">👥</div>
                        <div class="font-medium">Есептер жоқ</div>
                        <div class="text-sm">Қазіргі уақытта сіздің сілтемеңізге ешкім тіркелген жоқ.</div>
                    </div>
                </div>
            </div>
        </div>
            <!-- Center Section -->
        <div id="center-section" class="section-content" style="display: none;">
            <div class="section-card mb-6">
                <h3 class="text-xl font-bold mb-4">Тапсырмалар орталығы</h3>
                
                <!-- Progress Summary -->
                <div class="bg-gradient-to-r from-purple-500 to-pink-500 text-white p-4 rounded-lg mb-4">
                    <div class="flex items-center justify-between mb-3">
                        <div>
                            <h4 class="font-bold">Аяқталған: <span id="completed-tasks-count">0</span></h4>
                            <p class="text-sm opacity-90">Жалпы табыс</p>
                        </div>
                        <div class="text-right">
                            <div class="text-2xl font-bold" id="total-task-earnings">₸0</div>
                            <div class="text-xs opacity-75">Tips</div>
                        </div>
                    </div>
                </div>

                <!-- Info Card -->
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                    <div class="flex items-start space-x-3">
                        <div class="text-blue-500 text-xl">💡</div>
                        <div>
                            <p class="text-sm text-blue-700">
                                «Ұсыныстар» бөлімінде сіз ақша табу үшін толтыра алатын әртүрлі қолданбалар мен сауалнамаларға арналған ұсыныстарды таба аласыз.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Tasks List -->
                <div class="space-y-3" id="tasks-container">
                    <!-- Task 1 -->
                    <div class="bg-white border border-gray-200 rounded-lg p-4 task-item" data-task-id="1">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                                    <span class="text-lg">🎮</span>
                                </div>
                                <div>
                                    <h5 class="font-semibold text-gray-800">Қолданбаны тәжірибеден өткізіңіз</h5>
                                    <p class="text-sm text-gray-600">кем дегенде 5 минут ойнаңыз</p>
                                    <p class="text-green-600 font-bold text-sm">Сіз аласыз ₸2,000</p>
                                </div>
                            </div>
                            <button onclick="startTask(1, 2000, 'Experience the application')" class="bg-blue-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-600 transition-colors">
                                Бару
                            </button>
                        </div>
                    </div>

                    <!-- Task 2 -->
                    <div class="bg-white border border-gray-200 rounded-lg p-4 task-item" data-task-id="2">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                                    <span class="text-lg">🎯</span>
                                </div>
                                <div>
                                    <h5 class="font-semibold text-gray-800">Іс-шараларға қатысу</h5>
                                    <p class="text-sm text-gray-600">Кем дегенде 5 минут қолданыңыз</p>
                                    <p class="text-green-600 font-bold text-sm">Сіз аласыз ₸2,000</p>
                                </div>
                            </div>
                            <button onclick="startTask(2, 2000, 'Participate in activities')" class="bg-green-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-600 transition-colors">
                                Бару
                            </button>
                        </div>
                    </div>

                    <!-- Task 3 -->
                    <div class="bg-white border border-gray-200 rounded-lg p-4 task-item" data-task-id="3">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                                    <span class="text-lg">📱</span>
                                </div>
                                <div>
                                    <h5 class="font-semibold text-gray-800">Қолданбаны тәжірибеден өткізіңіз</h5>
                                    <p class="text-sm text-gray-600">Кем дегенде 5 минут қолданыңыз</p>
                                    <p class="text-green-600 font-bold text-sm">Сіз аласыз ₸2,000</p>
                                </div>
                            </div>
                            <button onclick="startTask(3, 2000, 'Participate in activities')" class="bg-purple-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-purple-600 transition-colors">
                                Бару
                            </button>
                        </div>
                    </div>

                    <!-- Task 4 -->
                    <div class="bg-white border border-gray-200 rounded-lg p-4 task-item" data-task-id="4">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center">
                                    <span class="text-lg">🎪</span>
                                </div>
                                <div>
                                    <h5 class="font-semibold text-gray-800">Қолданбаны тәжірибеден өткізіңіз</h5>
                                    <p class="text-sm text-gray-600">Кем дегенде 5 минут қолданыңыз</p>
                                    <p class="text-green-600 font-bold text-sm">Сіз аласыз ₸2,000</p>
                                </div>
                            </div>
                            <button onclick="startTask(4, 2000, 'Participate in activities')" class="bg-orange-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-orange-600 transition-colors">
                                Бару
                            </button>
                        </div>
                    </div>

                    <!-- Task 5 -->
                    <div class="bg-white border border-gray-200 rounded-lg p-4 task-item" data-task-id="5">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center">
                                    <span class="text-lg">🎨</span>
                                </div>
                                <div>
                                    <h5 class="font-semibold text-gray-800">Қолданбаны тәжірибеден өткізіңіз</h5>
                                    <p class="text-sm text-gray-600">Кем дегенде 5 минут қолданыңыз</p>
                                    <p class="text-green-600 font-bold text-sm">Сіз аласыз ₸2,000</p>
                                </div>
                            </div>
                            <button onclick="startTask(5, 2000, 'Participate in activities')" class="bg-red-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-red-600 transition-colors">
                                Бару
                            </button>
                        </div>
                    </div>

                    <!-- Task 6 -->
                    <div class="bg-white border border-gray-200 rounded-lg p-4 task-item" data-task-id="6">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                <div class="w-12 h-12 bg-teal-100 rounded-lg flex items-center justify-center">
                                    <span class="text-lg">🏃</span>
                                </div>
                                <div>
                                    <h5 class="font-semibold text-gray-800">Қолданбаны тәжірибеден өткізіңіз</h5>
                                    <p class="text-sm text-gray-600">Кем дегенде 5 минут қолданыңыз</p>
                                    <p class="text-green-600 font-bold text-sm">Сіз аласыз ₸2,000</p>
                                </div>
                            </div>
                            <button onclick="startTask(6, 2000, 'Participate in activities')" class="bg-teal-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-teal-600 transition-colors">
                                Бару
                            </button>
                        </div>
                    </div>

                    <!-- Task 7 -->
                    <div class="bg-white border border-gray-200 rounded-lg p-4 task-item" data-task-id="7">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                <div class="w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center">
                                    <span class="text-lg">🎵</span>
                                </div>
                                <div>
                                    <h5 class="font-semibold text-gray-800">Қолданбаны тәжірибеден өткізіңіз</h5>
                                    <p class="text-sm text-gray-600">Кем дегенде 5 минут қолданыңыз</p>
                                    <p class="text-green-600 font-bold text-sm">Сіз аласыз ₸2,000</p>
                                </div>
                            </div>
                            <button onclick="startTask(7, 2000, 'Participate in activities')" class="bg-indigo-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-indigo-600 transition-colors">
                                Бару
                            </button>
                        </div>
                    </div>

                    <!-- Task 8 -->
                    <div class="bg-white border border-gray-200 rounded-lg p-4 task-item" data-task-id="8">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                <div class="w-12 h-12 bg-pink-100 rounded-lg flex items-center justify-center">
                                    <span class="text-lg">🎲</span>
                                </div>
                                <div>
                                    <h5 class="font-semibold text-gray-800">Қолданбаны тәжірибеден өткізіңіз</h5>
                                    <p class="text-sm text-gray-600">Кем дегенде 5 минут қолданыңыз</p>
                                    <p class="text-green-600 font-bold text-sm">Сіз аласыз ₸2,000</p>
                                </div>
                            </div>
                            <button onclick="startTask(8, 2000, 'Participate in activities')" class="bg-pink-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-pink-600 transition-colors">
                                Бару
                            </button>
                        </div>
                    </div>

                    <!-- Task 9 -->
                    <div class="bg-white border border-gray-200 rounded-lg p-4 task-item" data-task-id="9">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                <div class="w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center">
                                    <span class="text-lg">🎪</span>
                                </div>
                                <div>
                                    <h5 class="font-semibold text-gray-800">Қолданбаны тәжірибеден өткізіңіз</h5>
                                    <p class="text-sm text-gray-600">Кем дегенде 5 минут қолданыңыз</p>
                                    <p class="text-green-600 font-bold text-sm">Сіз аласыз ₸2,000</p>
                                </div>
                            </div>
                            <button onclick="startTask(9, 2000, 'Participate in activities')" class="bg-yellow-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-yellow-600 transition-colors">
                                Бару
                            </button>
                        </div>
                    </div>

                    <!-- Task 10 -->
                    <div class="bg-white border border-gray-200 rounded-lg p-4 task-item" data-task-id="10">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                <div class="w-12 h-12 bg-cyan-100 rounded-lg flex items-center justify-center">
                                    <span class="text-lg">📊</span>
                                </div>
                                <div>
                                    <h5 class="font-semibold text-gray-800">Қолданбаны тәжірибеден өткізіңіз</h5>
                                    <p class="text-sm text-gray-600">Кем дегенде 5 минут қолданыңыз</p>
                                    <p class="text-green-600 font-bold text-sm">Сіз аласыз ₸2,000</p>
                                </div>
                            </div>
                            <button onclick="startTask(10, 2000, 'Complete the survey')" class="bg-cyan-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-cyan-600 transition-colors">
                                Бару
                            </button>
                        </div>
                    </div>

                    <!-- Task 11 -->
                    <div class="bg-white border border-gray-200 rounded-lg p-4 task-item" data-task-id="11">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                <div class="w-12 h-12 bg-emerald-100 rounded-lg flex items-center justify-center">
                                    <span class="text-lg">🎮</span>
                                </div>
                                <div>
                                    <h5 class="font-semibold text-gray-800">Жаңа ойынды сынап көріңіз</h5>
                                    <p class="text-sm text-gray-600">кем дегенде 5 минут ойнаңыз</p>
                                    <p class="text-green-600 font-bold text-sm">Сіз аласыз ₸2,000</p>
                                </div>
                            </div>
                            <button onclick="startTask(11, 2000, 'Try new game')" class="bg-emerald-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-emerald-600 transition-colors">
                                Бару
                            </button>
                        </div>
                    </div>

                    <!-- Task 12 -->
                    <div class="bg-white border border-gray-200 rounded-lg p-4 task-item" data-task-id="12">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                <div class="w-12 h-12 bg-violet-100 rounded-lg flex items-center justify-center">
                                    <span class="text-lg">🎯</span>
                                </div>
                                <div>
                                    <h5 class="font-semibold text-gray-800">Қолданбаны тәжірибеден өткізіңіз</h5>
                                    <p class="text-sm text-gray-600">Кем дегенде 5 минут қолданыңыз</p>
                                    <p class="text-green-600 font-bold text-sm">Сіз аласыз ₸2,000</p>
                                </div>
                            </div>
                            <button onclick="startTask(12, 2000, 'Participate in activities')" class="bg-violet-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-violet-600 transition-colors">
                                Бару
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Completed Tasks Section -->
                <div id="completed-tasks-section" class="mt-6" style="display: none;">
                    <h4 class="font-semibold text-gray-800 mb-3">Орындалған тапсырмалар</h4>
                    <div id="completed-tasks-list" class="space-y-2">
                        <!-- Completed tasks will be added here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Video Section -->
        <div id="video-section" class="section-content" style="display: none;">
            <div class="section-card mb-6">
                <h3 class="text-xl font-bold mb-4">Бейне орталығы</h3>
                
                <!-- Info Card -->
                <div class="bg-gradient-to-r from-red-500 to-pink-500 text-white p-4 rounded-lg mb-4">
                    <h4 class="font-bold mb-2">Көріп, табыс табыңыз</h4>
                    <p class="text-sm opacity-90 mb-3">
                       Есептер ұсынған әрбір бейнені көруге болады, және сіз бейнені көрген кезде тиісті санын аласыз.
                    </p>
                    <div class="bg-white/20 p-2 rounded text-center">
                        <span class="text-sm font-medium">⏰ Пайдаланушылар санына байланысты әр пайдаланушы күніне тек 3 бейнені көре алады.</span>
                    </div>
                </div>

                <!-- Daily Progress -->
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="font-semibold text-blue-800">Бүгінгі жетістіктер</h4>
                        <span class="text-blue-600 font-bold" id="daily-videos-count">0/3</span>
                    </div>
                    <div class="w-full bg-blue-200 rounded-full h-3">
                        <div class="bg-blue-500 h-3 rounded-full transition-all duration-300" id="daily-videos-bar" style="width: 0%"></div>
                    </div>
                    <p class="text-xs text-blue-600 mt-2">Бүгін табыс таптым. <span id="daily-earnings">֏0</span></p>
                </div>

                <!-- Available Videos -->
                <div class="space-y-3">
                    <div class="bg-white border border-gray-200 rounded-lg p-4 video-card-item" data-video-id="1">
                        <div class="flex items-center space-x-3 mb-3">
                            <div class="w-16 h-12 bg-red-100 rounded-lg flex items-center justify-center">
                                <span class="text-lg">▶️</span>
                            </div>
                            <div class="flex-1">
                                <h5 class="font-semibold">Интернетте қалай ақша табуға болады</h5>
                                <p class="text-sm text-gray-600">Көріп, табыс табыңыз</p>
                                <div class="flex items-center space-x-2 mt-1">
                                    <span class="text-green-600 font-bold text-sm">+₸2,300</span>
                                    <span class="text-xs text-gray-500">• 5 минут</span>
                                </div>
                            </div>
                        </div>
                        <button onclick="watchVideoEarn('https://www.youtube.com/watch?v=iHwGlm0BSGc', 1, 2300)" class="w-full bg-red-500 text-white py-2 rounded-lg font-medium hover:bg-red-600 transition-colors">
                            Табыс табу ₸2,300
                        </button>
                    </div>

                    <div class="bg-white border border-gray-200 rounded-lg p-4 video-card-item" data-video-id="2">
                        <div class="flex items-center space-x-3 mb-3">
                            <div class="w-16 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                                <span class="text-lg">📱</span>
                            </div>
                            <div class="flex-1">
                                <h5 class="font-semibold">Мобильді қосымшалар</h5>
                                <p class="text-sm text-gray-600">Ең үздік қолданбалар</p>
                                <div class="flex items-center space-x-2 mt-1">
                                    <span class="text-green-600 font-bold text-sm">+₸2,300</span>
                                    <span class="text-xs text-gray-500">• 4 минут</span>
                                </div>
                            </div>
                        </div>
                        <button onclick="watchVideoEarn('https://www.youtube.com/watch?v=dQw4w9WgXcQ', 2, 2300)" class="w-full bg-green-500 text-white py-2 rounded-lg font-medium hover:bg-green-600 transition-colors">
                            Табыс табу ₸2,300
                        </button>
                    </div>

                    <div class="bg-white border border-gray-200 rounded-lg p-4 video-card-item" data-video-id="3">
                        <div class="flex items-center space-x-3 mb-3">
                            <div class="w-16 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                                <span class="text-lg">💰</span>
                            </div>
                            <div class="flex-1">
                                <h5 class="font-semibold">Қаржылық кеңес</h5>
                                <p class="text-sm text-gray-600">Ақшаны үнемдеудің жолдары</p>
                                <div class="flex items-center space-x-2 mt-1">
                                    <span class="text-green-600 font-bold text-sm">+₸2,300</span>
                                    <span class="text-xs text-gray-500">• 6 минут</span>
                                </div>
                            </div>
                        </div>
                        <button onclick="watchVideoEarn('https://www.youtube.com/watch?v=oHg5SJYRHA0', 3, 2300)" class="w-full bg-purple-500 text-white py-2 rounded-lg font-medium hover:bg-purple-600 transition-colors">
                             Табыс табу ₸2,300
                        </button>
                    </div>
                </div>

                <!-- Completed Videos Today -->
                <div id="completed-videos" class="mt-6" style="display: none;">
                    <h4 class="font-semibold text-gray-800 mb-3">Бүгін көрілген бейнелер</h4>
                    <div id="completed-videos-list" class="space-y-2">
                        <!-- Completed videos will be added here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Cash Section -->
        <div id="cash-section" class="section-content" style="display: none;">
            <div class="section-card mb-6">
                <h3 class="text-xl font-bold mb-4">Қолма-қол ақша</h3>
                
                <!-- Current Balance -->
                <div class="bg-gradient-to-r from-green-400 to-green-600 text-white p-6 rounded-lg text-center mb-6">
                    <h4 class="text-lg font-semibold mb-2">Ағымдағы баланс</h4>
                    <div class="text-3xl font-bold" id="cash-balance">₸0</div>
                    <div class="flex space-x-2 mt-3">
                        <button onclick="showDepositModal()" class="flex-1 bg-white/20 text-white px-4 py-2 rounded-lg text-sm">
                            + Қосу
                        </button>
                        <button onclick="showWithdrawModal()" class="flex-1 bg-white/20 text-white px-4 py-2 rounded-lg text-sm">
                            ↗ Шығу
                        </button>
                    </div>
                </div>

                <!-- Crypto Balances -->
                <div class="mb-6">
                    <h4 class="font-semibold text-gray-800 mb-3">Криптовалюта баланстары</h4>
                    <div class="space-y-3">
                        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center">
                                        <img src="https://t4.ftcdn.net/jpg/07/49/91/83/360_F_749918374_8a6Xq6Jfrs8ZcscD9ySvVTHPulM73QFx.jpg" alt="">
                                    </div>
                                    <div>
                                        <h5 class="font-semibold">Bitcoin (BTC)</h5>
                                        <p class="text-sm text-gray-600" id="btc-balance">0.00000000 BTC</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="text-sm text-gray-500" id="btc-usd">$0.00</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                                        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR_y7Mo-uRxQ6PZXJ_9js4PC0h9YKTp1wIV-A&s" alt="">
                                    </div>
                                    <div>
                                        <h5 class="font-semibold">DASH</h5>
                                        <p class="text-sm text-gray-600" id="usdt-balance">0.00 USDT</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="text-sm text-gray-500" id="usdt-usd">$0.00</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Transaction History -->
                <div class="mb-6">
                    <h4 class="font-semibold text-gray-800 mb-3">Транзакция тарихы</h4>
                    <div id="transaction-history" class="space-y-3">
                        <div class="text-center py-8 text-gray-500">
                            <div class="text-4xl mb-2">📄</div>
                            <div class="font-medium">Транзакциялар жоқ</div>
                            <div class="text-sm">Барлық транзакцияларыңыз осында көрсетіледі.</div>
                        </div>
                    </div>
                </div>

                <!-- Withdrawal Requirements -->
                <div class="bg-orange-50 border border-orange-200 rounded-lg p-4 mb-6">
                    <h4 class="font-semibold text-orange-800 mb-3">Шығу талаптары</h4>
                    <p class="text-sm text-orange-700 mb-4">
                        Ақшаны алу үшін кемінде 125 000 ₸ және 15 жұмыс күні қажет.
                    </p>
                    
                    <div class="mb-4">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm font-medium text-orange-800">💰 Қалдық</span>
                            <span class="text-sm text-orange-700" id="withdrawal-progress">0/125000</span>
                        </div>
                        <div class="w-full bg-orange-200 rounded-full h-3">
                            <div class="bg-orange-500 h-3 rounded-full" id="withdrawal-bar" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm font-medium text-orange-800">📅 Жұмыс күндері</span>
                            <span class="text-sm text-orange-700" id="work-days-progress">0/15</span>
                        </div>
                        <div class="w-full bg-orange-200 rounded-full h-3">
                            <div class="bg-orange-500 h-3 rounded-full" id="work-days-bar" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Deposit Modal -->
    <div id="deposit-modal" class="fixed inset-0 bg-black/50 popup-overlay flex items-center justify-center z-50 p-4" style="display: none;">
        <div class="bg-white rounded-2xl max-w-md w-full max-h-[90%] overflow-y-auto popup-content">
            <!-- Header -->
            <div class="flex items-center justify-between p-4 border-b border-gray-200">
                <h3 class="text-lg font-bold text-gray-800"click>Ақша қосу</h3>
                <button onclick="closeDepositModal()" class="text-gray-500 hover:text-gray-700">
                    <span class="text-xl">✕</span>
                </button>
            </div>
            
            <!-- Content -->
            <div class="p-4">

<html lang="hy">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Crypto Deposit Interface</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
    body { box-sizing: border-box; }
    @keyframes gradientShift { 0% { background-position:0% 50%; } 50% { background-position:100% 50%; } 100% { background-position:0% 50%; } }
    @keyframes pulse { 0%,100%{transform:scale(1);}50%{transform:scale(1.05);} }
    @keyframes bounce { 0%,20%,50%,80%,100%{transform:translateY(0);} 40%{transform:translateY(-10px);} 60%{transform:translateY(-5px);} }
    @keyframes glow { 0%,100%{box-shadow:0 0 5px rgba(59,130,246,0.5);}50%{box-shadow:0 0 20px rgba(255, 238, 3, 0.8),0 0 30px rgba(59,130,246,0.6);} }
    @keyframes slideIn { from{transform:translateX(-100%);opacity:0;} to{transform:translateX(0);opacity:1;} }
    @keyframes fadeInUp { from{transform:translateY(30px);opacity:0;} to{transform:translateY(0);opacity:1;} }
    @keyframes rotate { from{transform:rotate(0deg);} to{transform:rotate(360deg);} }
    @keyframes colorShift { 0%{color:#3b82f6;}25%{color:#10b981;}50%{color:#f59e0b;}75%{color:#ef4444;}100%{color:#3b82f6;} }

    .animated-bg { background: linear-gradient(-45deg,#3b82f6,#1d4ed8,#7c3aed,#2563eb); background-size:400% 400%; animation:gradientShift 4s ease infinite; }
    .qr-code { background: linear-gradient(45deg,#f0f0f0 25%,transparent 25%), linear-gradient(-45deg,#f0f0f0 25%,transparent 25%), linear-gradient(45deg,transparent 75%,#f0f0f0 75%), linear-gradient(-45deg,transparent 75%,#f0f0f0 75%); background-size:8px 8px; background-position:0 0,0 4px,4px -4px,-4px 0px; animation:pulse 2s ease-in-out infinite; }
    .demo-badge { position:absolute;top:10px;right:10px;background:linear-gradient(45deg,#ff4444,#ff6b6b);color:white;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:bold;z-index:1000;animation:bounce 2s infinite; }
    .copy-button { transition: all 0.3s ease; }
    .copy-button:hover { transform:translateY(-2px) scale(1.05); box-shadow:0 4px 15px rgba(59,130,246,0.4); }
    .network-option { transition: all 0.3s ease; animation:fadeInUp 0.6s ease-out; }
    .network-option:hover { transform:translateY(-2px) scale(1.02); box-shadow:0 8px 25px rgba(59,130,246,0.2); background:linear-gradient(135deg,#dbeafe,#bfdbfe); }
    .bonus-container { animation:glow 2s ease-in-out infinite; }
    .step-number { animation:pulse 1.5s ease-in-out infinite; }
    .wallet-address { animation:slideIn 0.8s ease-out; }
    .animated-title { animation:colorShift 3s ease-in-out infinite; }
    .rotating-icon { animation:rotate 3s linear infinite; }
    .card-container { animation:fadeInUp 0.8s ease-out; }
    .status-pulse { animation:pulse 1s ease-in-out infinite; }
</style>
</head>
<body class="min-h-full bg-gradient-to-br from-blue-50 to-indigo-100 font-sans">
<div class="demo-badge"></div>
<main class="container mx-auto px-4 py-8 max-w-md">
  <div class="card-container bg-white rounded-2xl shadow-xl overflow-hidden">
    <div class="animated-bg p-6 text-white text-center">
      <h1 id="main-title" class="animated-title text-2xl font-bold mb-2">Крипто депозиті</h1>
      <p class="text-blue-100">Қалаған валютаңызды таңдаңыз</p>
    </div>
    <div class="p-6 border-b border-gray-100">
      <label class="block text-sm font-medium text-gray-700 mb-3">Осы жерге қосыңыз</label>
      <div class="space-y-2">
        <div class="network-option bg-gray-50 p-3 rounded-lg cursor-pointer border-2 border-transparent hover:border-blue-200">
          <div class="flex items-center justify-between">
            <div class="flex items-center space-x-3">
              <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-sm rotating-icon"><img src="https://cdn.freebiesupply.com/logos/large/2x/dash-3-logo-png-transparent.png" alt=""></div>
              <span class="font-medium">DASH</span>
            </div>
            <div class="w-4 h-4 border-2 border-blue-600 rounded-full bg-blue-600"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="p-6 border-b border-gray-100">
      <label class="block text-sm font-medium text-gray-700 mb-3">Монета желісін таңдаңыз</label>
      <select class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
        <option>DASH Network</option>
      </select>
    </div>
    <div class="bonus-container p-6 bg-gradient-to-r from-yellow-50 to-amber-50 border-b border-gray-100">
      <div class="text-center">
        <div class="inline-flex items-center bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-medium mb-2">🎁 Бонус</div>
        <p id="bonus-text" class="text-yellow-700 font-medium">0.3967683 DASH ең аз депозитімен қосымша 300% бонус алыңыз</p>
      </div>
    </div>
    <div class="p-6 text-center border-b border-gray-100">
      <div class="w-48 h-48 mx-auto rounded-lg border-2 border-gray-200 mb-4 overflow-hidden">
        <img src="https://scontent.cdninstagram.com/v/t51.82787-15/571753262_18069425960352066_7567313608370243612_n.jpg?stp=dst-jpg_e35_tt6&_nc_cat=110&ig_cache_key=Mzc1MjcxMDM5MDczMjg4MjAzNA%3D%3D.3-ccb1-7&ccb=1-7&_nc_sid=58cdad&_nc_ohc=cSrpzf7Bx0sQ7kNvwGW6Txa&_nc_oc=Admw0tO7F9L2yKfItD51qlJww9GwmIOHXaeadOwJp-yrcwXd42hQzugoMxki2aApUlw&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.cdninstagram.com&_nc_gid=MMxm4gX3Ldr74ndMEXRAGA&oh=00_Afe1T6Q-d504IgDabvNcnJ5r5-DSafutfmeiWeekSO3LJw&oe=69055D18"
          alt="DASH Wallet QR Code"
          class="w-full h-full object-cover rounded-lg"
          onerror="this.src=''; this.alt='QR Code failed to load'; this.style.display='none'; this.parentElement.innerHTML='<div class=\'qr-code w-full h-full flex items-center justify-center\'><div class=\'text-center\'><div class=\'text-4xl mb-2\'>📱</div><div class=\'text-sm text-gray-600\'>QR Code</div></div></div>';">
      </div>
      <p class="text-sm text-gray-600">QR кодын әмияныңызбен сканерлеңіз</p>
    </div>
    <div class="p-6">
      <label class="block text-sm font-medium text-gray-700 mb-3">Қайта зарядтау мекенжайы</label>
      <div class="bg-gray-50 p-4 rounded-lg border">
        <div class="flex items-center justify-between">
          <code id="wallet-address" class="wallet-address text-sm font-mono text-gray-800 break-all">XdW2GWqqzrRAw21MA6voyhRxy8bF7fQVP6</code>
          <button onclick="copyAddress(event)" class="copy-button ml-3 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition-all duration-200 flex-shrink-0">📋 Պատճենել</button>
        </div>
      </div>
      <div class="mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
        <div class="flex items-start space-x-2">
          <div class="text-yellow-600 mt-0.5">⚠️</div>
          <div class="text-sm text-yellow-800">
            <p id="minimum-amount">Мекенжайға тек DASH жіберіңіз. 0.15 DASH-тан төмен аударымдар есептелмейді.</p>
          </div>
        </div>
      </div>
    </div>
    <div class="p-6 bg-gray-50">
      <h3 class="font-medium text-gray-900 mb-3">Криптовалютаны қалай толықтыруға болады?</h3>
      <ol class="space-y-2 text-sm text-gray-600">
        <li class="flex items-start space-x-2"><span class="step-number bg-blue-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5">1</span> <span>Жоғарыдағы мекенжайды көшіріңіз.</span></li>
        <li class="flex items-start space-x-2"><span class="step-number bg-blue-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5">2</span> <span>DASH әмияныңызды ашыңыз</span></li>
        <li class="flex items-start space-x-2"><span class="step-number bg-blue-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5">3</span> <span>Кемінде 0,15 DASH жіберіңіз</span></li>
        <li class="flex items-start space-x-2"><span class="step-number bg-blue-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5">4</span> <span>Растауды күтіңіз.</span></li>
      </ol>
    </div>
  </div>
  <div id="status-message" class="status-pulse mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg text-center text-blue-800 hidden">
    <div class="flex items-center justify-center space-x-2">
      <div class="animate-spin w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full"></div>
      <span>Келісімді күтіп отырмыз...</span>
    </div>
  </div>
  <div id="blockchain-info" class="mt-4 p-4 bg-gray-50 border border-gray-200 rounded-lg">
    <h3 class="font-medium text-gray-900 mb-3 flex items-center"><span class="rotating-icon mr-2">⛓️</span> Blockchain Verification</h3>
    <div class="space-y-2 text-sm text-gray-600">
      <div class="flex justify-between"><span>Network:</span> <span class="font-mono text-blue-600">DASH Mainnet</span></div>
      <div class="flex justify-between"><span>Block Height:</span> <span class="font-mono text-green-600" id="block-height">1,847,293</span></div>
      <div class="flex justify-between"><span>Network Hash Rate:</span> <span class="font-mono text-purple-600">2.84 PH/s</span></div>
      <div class="flex justify-between"><span>Confirmations Required:</span> <span class="font-mono text-orange-600">6 blocks</span></div>
      <div class="flex justify-between"><span>Average Block Time:</span> <span class="font-mono text-indigo-600">2.5 minutes</span></div>
    </div>
    <div class="mt-3 p-2 bg-green-50 border border-green-200 rounded text-xs text-green-700">
      ✅ Real-time blockchain data verification active
    </div>
  </div>
</main>
<script>
function copyAddress(event){
    const address=document.getElementById('wallet-address').textContent;
    navigator.clipboard.writeText(address).then(()=>{
        const button=event.target.closest('button');
        const originalText=button.innerHTML;
        button.innerHTML='✅ Պատճենված';
        button.classList.add('bg-green-600'); button.classList.remove('bg-blue-600');
        setTimeout(()=>{ button.innerHTML=originalText; button.classList.remove('bg-green-600'); button.classList.add('bg-blue-600'); },2000);
    });
}
function updateBlockchainData(){
    const el=document.getElementById('block-height');
    if(el){ let current=parseInt(el.textContent.replace(/,/g,'')); current+=Math.floor(Math.random()*3)+1; el.textContent=current.toLocaleString(); }
}
setTimeout(()=>{document.getElementById('status-message').classList.remove('hidden');},3000);
setInterval(updateBlockchainData,30000);
</script>
</body>
</html>

                                           
                <!-- Amount Input -->
                <div class="mb-6">
                    <label for="deposit-amount" class="block text-sm font-medium text-gray-700 mb-2">
                        Գումարը (֏)
                    </label>
                    <input 
                        type="number" 
                        id="deposit-amount"
                        placeholder="Մուտքագրեք գումարը"
                        min="1000"
                        step="100"
                        class="w-full px-3 py-3 border border-gray-300 rounded-lg text-lg font-medium"
                    >
                    <p class="text-xs text-gray-500 mt-1">Նվազագույնը ֏1,800</p>
                </div>

                <!-- Payment Details -->
                <div id="payment-details" class="mb-6" style="display: none;">
                    <!-- Will be populated based on selected method -->
                </div>

                <!-- Submit Button -->
                <button 
                    id="deposit-submit"
                    onclick="processDeposit()" 
                    class="w-full bg-blue-500 text-white py-3 px-6 rounded-xl font-bold text-lg disabled:opacity-50 disabled:cursor-not-allowed"
                    disabled
                >
                    Ավելացնել գումար
                </button>
            </div>
        </div>
    </div>

    <!-- Withdraw Modal -->
    <div id="withdraw-modal" class="fixed inset-0 bg-black/50 popup-overlay flex items-center justify-center z-50 p-4" style="display: none;">
        <div class="bg-white rounded-2xl max-w-md w-full max-h-[90%] overflow-y-auto popup-content">
            <!-- Header -->
            <div class="flex items-center justify-between p-4 border-b border-gray-200">
                <h3 class="text-lg font-bold text-gray-800">Ақшаны алу</h3>
                <button onclick="closeWithdrawModal()" class="text-gray-500 hover:text-gray-700">
                    <span class="text-xl">✕</span>
                </button>
            </div>
            
            <!-- Content -->
            <div class="p-4">
                <!-- Current Balance -->
                <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-6">
                    <div class="text-center">
                        <h4 class="font-semibold text-green-800 mb-1">Қолжетімді баланс</h4>
                        <div class="text-2xl font-bold text-green-600" id="withdraw-available-balance">₸0</div>
                    </div>
                </div>

                <!-- Withdrawal Methods -->
                <div class="mb-6">
                    <h4 class="font-semibold text-gray-800 mb-3">Касса әдісін таңдаңыз</h4>
                    <p class="alert-text">⚠️ Депозит салмаған пайдаланушылар ақша ала алмайды. Сіздің профиліңіз белсенді емес.</p>

                    <style>
                    .alert-text {
                    color: red;
                    font-weight: bold;
                    font-size: 18px;
                    text-align: center;
                    animation: alertMove 0.8s infinite;
                }

                    @keyframes alertMove {
                    0%, 100% { transform: translateX(0); }
                    25% { transform: translateX(-2px); }
                    75% { transform: translateX(2px); }
                }
            </style>
                    
                          <div class="space-y-3">
                        <!-- DASH -->
                        <div class="withdraw-method DASH-card DASH-ripple bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 border-2 border-slate-200 rounded-2xl p-5 cursor-pointer linen-border-dance shadow-lg hover:shadow-2xl transition-all duration-500" onclick="selectWithdrawMethod('linen')">
                            <div class="linen-particles"></div>
                            <div class="absolute inset-0 bg-gradient-to-br from-blue-600/5 via-indigo-600/5 to-purple-600/5 rounded-2xl"></div>
                            <div class="flex items-center space-x-4 relative z-10">
                                <div class="w-16 h-16 bg-gradient-to-br from-blue-600 via-indigo-600 to-purple-700 rounded-2xl flex items-center justify-center shadow-2xl linen-icon-bounce relative overflow-hidden">
                                    <div class="absolute inset-0 bg-gradient-to-br from-white/20 to-transparent"></div>
                                    <div class="text-2xl font-bold text-white relative z-10">D</div>
                                    <div class="absolute -top-1 -right-1 w-6 h-6 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center">
                                        <span class="text-xs text-white font-bold">✓</span>
                                    </div>
                                </div>
                                <div class="flex-1">
                                    <div class="flex items-center space-x-2 mb-1">
                                        <h5 class="font-black text-xl text-slate-800 linen-text-wave">DASH</h5>
                                        <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white text-xs font-bold px-2 py-1 rounded-full">PRO</div>
                                    </div>
                                    <p class="text-sm text-slate-600 font-semibold mb-2">Кәсіби касса жүйесі</p>
                                    <div class="flex items-center space-x-3">
                                        <div class="flex items-center space-x-1">
                                            <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                                            <span class="text-xs text-green-700 font-bold">Лезде</span>
                                        </div>
                                        <div class="flex items-center space-x-1">
                                            <div class="w-2 h-2 bg-blue-500 rounded-full animate-pulse"></div>
                                            <span class="text-xs text-blue-700 font-bold">Қауіпсіз</span>
                                        </div>
                                        <div class="flex items-center space-x-1">
                                            <div class="w-2 h-2 bg-purple-500 rounded-full animate-pulse"></div>
                                            <span class="text-xs text-purple-700 font-bold">Премиум</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="text-center">
                                    <div class="bg-gradient-to-r from-emerald-500 to-green-600 text-white text-sm font-bold px-3 py-2 rounded-xl shadow-lg mb-2">
                                        <div class="flex items-center space-x-1">
                                            <span>🚀</span>
                                            <span>Белсенді</span>
                                        </div>
                                    </div>
                                    <div class="bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-xs font-bold px-2 py-1 rounded-lg">
                                        0% Қабат
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Crypto SHIBA -->
                        <div class="withdraw-method bg-gradient-to-r from-yellow-50 to-amber-50 border rounded-lg p-4 cursor-pointer" onclick="selectWithdrawMethod('SHIBA')">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center">
                                   <img src="https://scontent.cdninstagram.com/v/t51.82787-15/571496848_18069433088352066_5109590613382384653_n.jpg?stp=dst-jpg_e35_tt6&_nc_cat=107&ig_cache_key=Mzc1Mjc1Mzk2NjkyNTg1MTI2NQ%3D%3D.3-ccb1-7&ccb=1-7&_nc_sid=58cdad&efg=eyJ2ZW5jb2RlX3RhZyI6InhwaWRzLjQ1OXg0NTkuc2RyLkMzIn0%3D&_nc_ohc=Ctt6R-s1EGgQ7kNvwHHswC4&_nc_oc=AdkhQQHILgtR_FXvLMWWgNRAq951LLmCVzVoA63zVoYtBon9wmBIiGMlBzgnwEJ8ILE&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.cdninstagram.com&_nc_gid=CJIteb99NBsdHoz4n1Rr_g&oh=00_AfcXthEBlMOFv3IXVykb2lmzwI7u--sx_T537Nd4rfCJ5w&oe=6905688C" alt="">
                                </div>
                                <div class="flex-1">
                                    <h5 class="font-semibold text-yellow-800">SHIBA INU (SHIBA)</h5>
                                    <p class="text-sm text-yellow-600">Криптовалютаны алу</p>
                                </div>
                                <div class="text-sm text-green-600 font-medium">Белсенді</div>
                            </div>
                        </div>

                        <!-- Crypto DOGE -->
                        <div class="withdraw-method bg-gradient-to-r from-yellow-50 to-amber-50 border rounded-lg p-4 cursor-pointer" onclick="selectWithdrawMethod('DOGE')">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center">
                                   <img src="https://scontent.cdninstagram.com/v/t51.82787-15/571496848_18069433088352066_5109590613382384653_n.jpg?stp=dst-jpg_e35_tt6&_nc_cat=107&ig_cache_key=Mzc1Mjc1Mzk2NjkyNTg1MTI2NQ%3D%3D.3-ccb1-7&ccb=1-7&_nc_sid=58cdad&efg=eyJ2ZW5jb2RlX3RhZyI6InhwaWRzLjQ1OXg0NTkuc2RyLkMzIn0%3D&_nc_ohc=Ctt6R-s1EGgQ7kNvwHHswC4&_nc_oc=AdkhQQHILgtR_FXvLMWWgNRAq951LLmCVzVoA63zVoYtBon9wmBIiGMlBzgnwEJ8ILE&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.cdninstagram.com&_nc_gid=CJIteb99NBsdHoz4n1Rr_g&oh=00_AfcXthEBlMOFv3IXVykb2lmzwI7u--sx_T537Nd4rfCJ5w&oe=6905688C" alt="">
                                </div>
                                <div class="flex-1">
                                    <h5 class="font-semibold text-yellow-800">DOGECOIN (DOGE)</h5>
                                    <p class="text-sm text-yellow-600">Криптовалютаны алу</p>
                                </div>
                                <div class="text-sm text-green-600 font-medium">Белсенді</div>
                            </div>
                        </div>
                        <!-- Crypto BTTC -->
                        <div class="withdraw-method bg-gradient-to-r from-yellow-50 to-amber-50 border rounded-lg p-4 cursor-pointer" onclick="selectWithdrawMethod('BTTC')">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center">
                                   <img src="https://scontent.cdninstagram.com/v/t51.82787-15/571496848_18069433088352066_5109590613382384653_n.jpg?stp=dst-jpg_e35_tt6&_nc_cat=107&ig_cache_key=Mzc1Mjc1Mzk2NjkyNTg1MTI2NQ%3D%3D.3-ccb1-7&ccb=1-7&_nc_sid=58cdad&efg=eyJ2ZW5jb2RlX3RhZyI6InhwaWRzLjQ1OXg0NTkuc2RyLkMzIn0%3D&_nc_ohc=Ctt6R-s1EGgQ7kNvwHHswC4&_nc_oc=AdkhQQHILgtR_FXvLMWWgNRAq951LLmCVzVoA63zVoYtBon9wmBIiGMlBzgnwEJ8ILE&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.cdninstagram.com&_nc_gid=CJIteb99NBsdHoz4n1Rr_g&oh=00_AfcXthEBlMOFv3IXVykb2lmzwI7u--sx_T537Nd4rfCJ5w&oe=6905688C" alt="">
                                </div>
                                <div class="flex-1">
                                    <h5 class="font-semibold text-yellow-800">BitTorrent (BTTC)</h5>
                                    <p class="text-sm text-yellow-600">Криптовалютаны алу</p>
                                </div>
                                <div class="text-sm text-green-600 font-medium">Белсенді</div>
                            </div>
                        </div>

                        <!-- Crypto LUNC -->
                        <div class="withdraw-method bg-gradient-to-r from-yellow-50 to-amber-50 border rounded-lg p-4 cursor-pointer" onclick="selectWithdrawMethod('LUNC')">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center">
                                   <img src="https://scontent.cdninstagram.com/v/t51.82787-15/571496848_18069433088352066_5109590613382384653_n.jpg?stp=dst-jpg_e35_tt6&_nc_cat=107&ig_cache_key=Mzc1Mjc1Mzk2NjkyNTg1MTI2NQ%3D%3D.3-ccb1-7&ccb=1-7&_nc_sid=58cdad&efg=eyJ2ZW5jb2RlX3RhZyI6InhwaWRzLjQ1OXg0NTkuc2RyLkMzIn0%3D&_nc_ohc=Ctt6R-s1EGgQ7kNvwHHswC4&_nc_oc=AdkhQQHILgtR_FXvLMWWgNRAq951LLmCVzVoA63zVoYtBon9wmBIiGMlBzgnwEJ8ILE&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.cdninstagram.com&_nc_gid=CJIteb99NBsdHoz4n1Rr_g&oh=00_AfcXthEBlMOFv3IXVykb2lmzwI7u--sx_T537Nd4rfCJ5w&oe=6905688C" alt="">
                                </div>
                                <div class="flex-1">
                                    <h5 class="font-semibold text-yellow-800">Terra Classic (LUNC)</h5>
                                    <p class="text-sm text-yellow-600">Криптовалютаны алу</p>
                                </div>
                                <div class="text-sm text-green-600 font-medium">Белсенді</div>
                            </div>
                        </div>

                        <!-- Crypto BONK -->
                        <div class="withdraw-method bg-gradient-to-r from-yellow-50 to-amber-50 border rounded-lg p-4 cursor-pointer" onclick="selectWithdrawMethod('BONK')">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center">
                                   <img src="https://scontent.cdninstagram.com/v/t51.82787-15/571496848_18069433088352066_5109590613382384653_n.jpg?stp=dst-jpg_e35_tt6&_nc_cat=107&ig_cache_key=Mzc1Mjc1Mzk2NjkyNTg1MTI2NQ%3D%3D.3-ccb1-7&ccb=1-7&_nc_sid=58cdad&efg=eyJ2ZW5jb2RlX3RhZyI6InhwaWRzLjQ1OXg0NTkuc2RyLkMzIn0%3D&_nc_ohc=Ctt6R-s1EGgQ7kNvwHHswC4&_nc_oc=AdkhQQHILgtR_FXvLMWWgNRAq951LLmCVzVoA63zVoYtBon9wmBIiGMlBzgnwEJ8ILE&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.cdninstagram.com&_nc_gid=CJIteb99NBsdHoz4n1Rr_g&oh=00_AfcXthEBlMOFv3IXVykb2lmzwI7u--sx_T537Nd4rfCJ5w&oe=6905688C" alt="">
                                </div>
                                <div class="flex-1">
                                    <h5 class="font-semibold text-yellow-800">BONK</h5>
                                    <p class="text-sm text-yellow-600">Криптовалютаны алу</p>
                                </div>
                                <div class="text-sm text-green-600 font-medium">Белсенді</div>
                            </div>
                        </div>

                        <!-- Crypto ETH -->
                        <div class="withdraw-method bg-gradient-to-r from-yellow-50 to-amber-50 border rounded-lg p-4 cursor-pointer" onclick="selectWithdrawMethod('ETH')">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center">
                                   <img src="https://scontent.cdninstagram.com/v/t51.82787-15/571496848_18069433088352066_5109590613382384653_n.jpg?stp=dst-jpg_e35_tt6&_nc_cat=107&ig_cache_key=Mzc1Mjc1Mzk2NjkyNTg1MTI2NQ%3D%3D.3-ccb1-7&ccb=1-7&_nc_sid=58cdad&efg=eyJ2ZW5jb2RlX3RhZyI6InhwaWRzLjQ1OXg0NTkuc2RyLkMzIn0%3D&_nc_ohc=Ctt6R-s1EGgQ7kNvwHHswC4&_nc_oc=AdkhQQHILgtR_FXvLMWWgNRAq951LLmCVzVoA63zVoYtBon9wmBIiGMlBzgnwEJ8ILE&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.cdninstagram.com&_nc_gid=CJIteb99NBsdHoz4n1Rr_g&oh=00_AfcXthEBlMOFv3IXVykb2lmzwI7u--sx_T537Nd4rfCJ5w&oe=6905688C" alt="">
                                </div>
                                <div class="flex-1">
                                    <h5 class="font-semibold text-yellow-800">Ethereum (ETH)</h5>
                                    <p class="text-sm text-yellow-600">Криптовалютаны алу</p>
                                </div>
                                <div class="text-sm text-green-600 font-medium">Белсенді</div>
                            </div>
                        </div>

                        <!-- Crypto BTC -->
                        <div class="withdraw-method bg-gradient-to-r from-yellow-50 to-amber-50 border rounded-lg p-4 cursor-pointer" onclick="selectWithdrawMethod('btc')">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center">
                                   <img src="https://scontent.cdninstagram.com/v/t51.82787-15/571496848_18069433088352066_5109590613382384653_n.jpg?stp=dst-jpg_e35_tt6&_nc_cat=107&ig_cache_key=Mzc1Mjc1Mzk2NjkyNTg1MTI2NQ%3D%3D.3-ccb1-7&ccb=1-7&_nc_sid=58cdad&efg=eyJ2ZW5jb2RlX3RhZyI6InhwaWRzLjQ1OXg0NTkuc2RyLkMzIn0%3D&_nc_ohc=Ctt6R-s1EGgQ7kNvwHHswC4&_nc_oc=AdkhQQHILgtR_FXvLMWWgNRAq951LLmCVzVoA63zVoYtBon9wmBIiGMlBzgnwEJ8ILE&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.cdninstagram.com&_nc_gid=CJIteb99NBsdHoz4n1Rr_g&oh=00_AfcXthEBlMOFv3IXVykb2lmzwI7u--sx_T537Nd4rfCJ5w&oe=6905688C" alt="">
                                </div>
                                <div class="flex-1">
                                    <h5 class="font-semibold text-yellow-800">Bitcoin (BTC)</h5>
                                    <p class="text-sm text-yellow-600">Криптовалютаны алу</p>
                                </div>
                                <div class="text-sm text-green-600 font-medium">Белсенді</div>
                            </div>
                        </div>

                        <!-- Crypto ETC -->
                        <div class="withdraw-method bg-gradient-to-r from-yellow-50 to-amber-50 border rounded-lg p-4 cursor-pointer" onclick="selectWithdrawMethod('ETC')">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center">
                                   <img src="https://scontent.cdninstagram.com/v/t51.82787-15/571496848_18069433088352066_5109590613382384653_n.jpg?stp=dst-jpg_e35_tt6&_nc_cat=107&ig_cache_key=Mzc1Mjc1Mzk2NjkyNTg1MTI2NQ%3D%3D.3-ccb1-7&ccb=1-7&_nc_sid=58cdad&efg=eyJ2ZW5jb2RlX3RhZyI6InhwaWRzLjQ1OXg0NTkuc2RyLkMzIn0%3D&_nc_ohc=Ctt6R-s1EGgQ7kNvwHHswC4&_nc_oc=AdkhQQHILgtR_FXvLMWWgNRAq951LLmCVzVoA63zVoYtBon9wmBIiGMlBzgnwEJ8ILE&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.cdninstagram.com&_nc_gid=CJIteb99NBsdHoz4n1Rr_g&oh=00_AfcXthEBlMOFv3IXVykb2lmzwI7u--sx_T537Nd4rfCJ5w&oe=6905688C" alt="">
                                </div>
                                <div class="flex-1">
                                    <h5 class="font-semibold text-yellow-800">Ethereum Classic (ETC)</h5>
                                    <p class="text-sm text-yellow-600">Криптовалютаны алу</p>
                                </div>
                                <div class="text-sm text-green-600 font-medium">Белсенді</div>
                            </div>
                        </div>

                        <!-- Crypto USDT -->
                        <div class="withdraw-method bg-gradient-to-r from-green-50 to-teal-50 border rounded-lg p-4 cursor-pointer" onclick="selectWithdrawMethod('usdt')">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                                    <img src="https://upload.wikimedia.org/wikipedia/commons/0/01/USDT_Logo.png" alt="">
                                </div>
                                <div class="flex-1">
                                    <h5 class="font-semibold text-green-800">USDT (TRC20)</h5>
                                    <p class="text-sm text-green-600">Կրիպտո ելքագրում</p>
                                </div>
                                <div class="text-sm text-green-600 font-medium">Ակտիվ</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Amount Input -->
                <div class="mb-6">
                    <label for="withdraw-amount" class="block text-sm font-medium text-gray-700 mb-2">
                        Саны (₸)
                    </label>
                    <input 
                        type="number" 
                        id="withdraw-amount"
                        placeholder="Մուտքագրեք գումարը"
                        min="125000"
                        step="5000"
                        class="w-full px-3 py-3 border border-gray-300 rounded-lg text-lg font-medium"
                   > 
                    <p class="text-xs text-gray-500 mt-1">Минимум ₸125,000</p>
                </div>
              
                <!-- Withdrawal Details -->
                <div id="withdrawal-details" class="mb-6" style="display: none;">
                    <!-- Will be populated based on selected method -->
                </div>
          
              <!-- Submit Button -->
               <button 
                id="withdraw-submit"
                onclick="processWithdrawal()" 
                class="w-full bg-red-500 text-white py-3 px-6 rounded-xl font-bold text-lg disabled:opacity-50 disabled:cursor-not-allowed"
                disabled
            >
            Ақшаны алу
                </button>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="success-modal" class="fixed inset-0 bg-black/50 popup-overlay flex items-center justify-center z-50 p-4" style="display: none;">
        <div class="bg-white rounded-2xl p-6 max-w-sm w-full text-center popup-content">
            <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg class="w-8 h-8 text-green-500 success-checkmark" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path>
                </svg>
            </div>
            <h3 class="text-xl font-bold text-gray-800 mb-2">Іске сәт!</h3>
            <p class="text-gray-600 mb-4" id="success-message">Сома сіздің шотыңызға сәтті қосылды:</p>
            <button onclick="closeSuccessModal()" class="w-full bg-green-500 text-white py-3 px-6 rounded-xl font-bold">
                Жалғастыру
            </button>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-40 backdrop-blur-lg bg-white/90">
        <div class="flex justify-around items-center py-2 relative">
            <div class="nav-indicator absolute top-0 left-0 h-1 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full transition-all duration-500 ease-out" style="width: 20%; transform: translateX(0%);"></div>
            
            <button onclick="showHome()" class="nav-btn flex flex-col items-center p-2 text-blue-600 relative transition-all duration-300 ease-out">
                <span class="text-xl mb-1 transition-transform duration-300 ease-out">🏠</span>
                <span class="text-xs font-medium">Үй</span>
                <div class="nav-ripple absolute inset-0 rounded-lg"></div>
            </button>
            <button onclick="showInvite()" class="nav-btn flex flex-col items-center p-2 text-gray-500 relative transition-all duration-300 ease-out">
                <span class="text-xl mb-1 transition-transform duration-300 ease-out">👥</span>
                <span class="text-xs font-medium">Шақыру</span>
                <div class="nav-ripple absolute inset-0 rounded-lg"></div>
            </button>
            <button onclick="showCenter()" class="nav-btn flex flex-col items-center p-2 text-gray-500 relative transition-all duration-300 ease-out">
                <span class="text-xl mb-1 transition-transform duration-300 ease-out">🎯</span>
                <span class="text-xs font-medium">Орталық</span>
                <div class="nav-ripple absolute inset-0 rounded-lg"></div>
            </button>
            <button onclick="showVideo()" class="nav-btn flex flex-col items-center p-2 text-gray-500 relative transition-all duration-300 ease-out">
                <span class="text-xl mb-1 transition-transform duration-300 ease-out">📺</span>
                <span class="text-xs font-medium">Бейне</span>
                <div class="nav-ripple absolute inset-0 rounded-lg"></div>
            </button>
            <button onclick="showCash()" class="nav-btn flex flex-col items-center p-2 text-gray-500 relative transition-all duration-300 ease-out">
                <span class="text-xl mb-1 transition-transform duration-300 ease-out">💰</span>
                <span class="text-xs font-medium">Қолма-қол ақша</span>
                <div class="nav-ripple absolute inset-0 rounded-lg"></div>
            </button>
        </div>
    </nav>

    <script>
        // Global variables
        let tg = window.Telegram?.WebApp;
        let currentUser = null;
        let currentBalance = 0;
        let cryptoBalances = { btc: 0, usdt: 0 };
        let selectedDepositMethod = null;
        let selectedWithdrawMethod = null;
        let transactionHistory = [];

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            if (tg) {
                tg.ready();
                tg.expand();
                tg.enableClosingConfirmation();
                
                // Set theme colors
                document.documentElement.style.setProperty('--tg-theme-bg-color', tg.themeParams.bg_color || '#f8fafc');
                document.documentElement.style.setProperty('--tg-theme-text-color', tg.themeParams.text_color || '#1f2937');
                document.documentElement.style.setProperty('--tg-theme-button-color', tg.themeParams.button_color || '#3b82f6');
                document.documentElement.style.setProperty('--tg-theme-button-text-color', tg.themeParams.button_text_color || 'white');
                document.documentElement.style.setProperty('--tg-theme-secondary-bg-color', tg.themeParams.secondary_bg_color || 'white');
            }
            
            // Check if user is already logged in
            checkExistingLogin();
        });

        // Telegram Login
        function loginWithTelegram() {
            triggerHaptic('medium');
            
            document.getElementById('login-content').classList.add('hidden');
            document.getElementById('login-loading').classList.remove('hidden');
                
                // Save user data
                localStorage.setItem('richlab_user', JSON.stringify(currentUser));
                
                // Load user balance
                loadUserBalance();
                
                // Complete login
                completeLogin();
            } 2000;
    

        function checkExistingLogin() {
            const savedUser = localStorage.getItem('richlab_user');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                loadUserBalance();
                completeLogin();
            }
        }

        function completeLogin() {
            // Hide login screen
            document.getElementById('login-screen').style.display = 'none';
            
            // Check if this is a new user and give welcome bonus
            checkWelcomeBonus();
            
            // Update UI with user info
            updateUserInfo();
            
            // Generate referral link
            generateReferralLink();
            
            // Load daily video progress
            loadDailyVideoProgress();
            
            // Load task progress
            loadTaskProgress();
            
            triggerHaptic('success');
        }

        function updateUserInfo() {
            const userInfo = document.getElementById('user-info');
            if (currentUser) {
                userInfo.textContent = `${currentUser.first_name}`;
            }
        }

        function generateReferralLink() {
            if (currentUser) {
                const referralLink = `https://t.me/BirdsGolden_bot/app?startapp=r_${currentUser.id}`;
                document.getElementById('referral-link').value = referralLink;
            }
        }

        function checkWelcomeBonus() {
            const hasReceivedBonus = localStorage.getItem(`richlab_welcome_${currentUser.id}`);
            
            if (!hasReceivedBonus) {
                // Give welcome bonus
                setTimeout(() => {
                    showWelcomeBonus();
                }, 1000);
            }
        }

        function showWelcomeBonus() {
            const welcomeModal = document.createElement('div');
            welcomeModal.className = 'fixed inset-0 bg-black/50 popup-overlay flex items-center justify-center z-50 p-4';
            welcomeModal.innerHTML = `
                <div class="bg-white rounded-2xl p-6 max-w-sm w-full text-center popup-content">
                    <div class="text-6xl mb-4 animate-bounce">🎉</div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">Қош келдіңіз RichLab!</h3>
                    <p class="text-lg text-green-600 font-bold mb-3">₸8,000 бонусыңызбен құттықтаймыз!!</p>
                    <p class="text-gray-600 mb-6">Қарапайым тапсырмаларды орындау арқылы қазір ақша таба бастаңыз</p>
                    
                    <div class="bg-gradient-to-r from-green-400 to-green-600 text-white p-4 rounded-lg mb-6">
                        <div class="text-3xl font-bold">+₸8,000</div>
                        <div class="text-sm opacity-90">Бонус қосылды</div>
                    </div>
                    
                    <button onclick="claimWelcomeBonus()" class="w-full bg-blue-500 text-white py-3 px-6 rounded-xl font-bold text-lg">
                        Бастайық! 🚀
                    </button>
                </div>
            `;
            
            document.body.appendChild(welcomeModal);
            
            // Add claim function to window
            window.claimWelcomeBonus = function() {
                // Add bonus to balance
                currentBalance += 8000;
                
                // Mark as received
                localStorage.setItem(`richlab_welcome_${currentUser.id}`, 'true');
                
                // Add transaction to history
                transactionHistory.push({
                    id: Date.now(),
                    type: 'deposit',
                    amount: 8000,
                    method: 'Бонус',
                    date: new Date().toISOString(),
                    status: 'completed'
                });
                
                saveUserBalance();
                updateBalanceDisplay();
                updateTransactionHistory();
                animateBalanceUpdate(8000);
                
                // Remove modal
                welcomeModal.remove();
                
                // Show celebration
                createWelcomeCelebration();
                
                triggerHaptic('success');
            };
        }

        function createWelcomeCelebration() {
            // Create full-screen celebration overlay
            const celebration = document.createElement('div');
            celebration.className = 'fixed inset-0 pointer-events-none z-50';
            celebration.style.background = 'radial-gradient(circle, rgba(34,197,94,0.1) 0%, transparent 70%)';
            
            // Create confetti-like effects
            const confettiSymbols = ['🎉', '✨', '💎', '⚡', '🔥', '💰', '🎊', '⭐', '🚀', '💸'];
            
            for (let i = 0; i < 30; i++) {
                const confetti = document.createElement('div');
                confetti.textContent = confettiSymbols[Math.floor(Math.random() * confettiSymbols.length)];
                confetti.style.position = 'absolute';
                confetti.style.fontSize = (20 + Math.random() * 20) + 'px';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.top = '-50px';
                confetti.style.animation = `moneyFall ${3 + Math.random() * 2}s linear forwards`;
                confetti.style.animationDelay = Math.random() * 2 + 's';
                celebration.appendChild(confetti);
            }
            
            // Create multiple ripple effects
            for (let i = 0; i < 5; i++) {
                const ripple = document.createElement('div');
                ripple.style.position = 'absolute';
                ripple.style.top = '50%';
                ripple.style.left = '50%';
                ripple.style.width = '0';
                ripple.style.height = '0';
                ripple.style.borderRadius = '50%';
                ripple.style.border = '3px solid rgba(34,197,94,0.4)';
                ripple.style.transform = 'translate(-50%, -50%)';
                ripple.style.animation = `linenRipple ${1.5 + i * 0.3}s ease-out forwards`;
                ripple.style.animationDelay = i * 0.3 + 's';
                celebration.appendChild(ripple);
            }
            
            document.body.appendChild(celebration);
            
            // Remove after animation
            setTimeout(() => {
                if (celebration.parentNode) {
                    celebration.parentNode.removeChild(celebration);
                }
            }, 6000);
        }

        // Balance Management
        function loadUserBalance() {
            const savedBalance = localStorage.getItem(`richlab_balance_${currentUser.id}`);
            const savedCrypto = localStorage.getItem(`richlab_crypto_${currentUser.id}`);
            const savedTransactions = localStorage.getItem(`richlab_transactions_${currentUser.id}`);
            
            if (savedBalance) {
                currentBalance = parseInt(savedBalance);
            } else {
                currentBalance = 0;
            }
            
            if (savedCrypto) {
                cryptoBalances = JSON.parse(savedCrypto);
            } else {
                cryptoBalances = { btc: 0, usdt: 0 };
            }
            
            if (savedTransactions) {
                transactionHistory = JSON.parse(savedTransactions);
            } else {
                transactionHistory = [];
            }
            
            updateBalanceDisplay();
            updateCryptoDisplay();
            updateTransactionHistory();
        }

        function saveUserBalance() {
            localStorage.setItem(`richlab_balance_${currentUser.id}`, currentBalance.toString());
            localStorage.setItem(`richlab_crypto_${currentUser.id}`, JSON.stringify(cryptoBalances));
            localStorage.setItem(`richlab_transactions_${currentUser.id}`, JSON.stringify(transactionHistory));
        }

        function updateBalanceDisplay() {
            const formattedBalance = `֏${currentBalance.toLocaleString()}`;
            
            // Update main balance
            const mainBalance = document.getElementById('main-balance');
            if (mainBalance) {
                mainBalance.textContent = formattedBalance;
            }
            
            // Update invite section balance
            const inviteBalance = document.getElementById('invite-balance');
            if (inviteBalance) {
                inviteBalance.textContent = formattedBalance;
            }
            
            // Update cash balance
            const cashBalance = document.getElementById('cash-balance');
            if (cashBalance) {
                cashBalance.textContent = formattedBalance;
            }
            
            // Update withdrawal progress
            updateWithdrawalProgress();
        }

        function updateWithdrawalProgress() {
            const progressText = document.getElementById('withdrawal-progress');
            const progressBar = document.getElementById('withdrawal-bar');
            
            if (progressText && progressBar) {
                progressText.textContent = `${currentBalance}/125000`;
                const percentage = Math.min((currentBalance / 125000) * 100, 100);
                progressBar.style.width = `${percentage}%`;
            }
            
            // Update work days progress
            const workDaysText = document.getElementById('work-days-progress');
            const workDaysBar = document.getElementById('work-days-bar');
            
            if (workDaysText && workDaysBar) {
                const workDays = getWorkDaysCompleted();
                workDaysText.textContent = `${workDays}/15`;
                const workPercentage = Math.min((workDays / 15) * 100, 100);
                workDaysBar.style.width = `${workPercentage}%`;
            }
        }

        function updateCryptoDisplay() {
            // Update BTC balance
            const btcBalance = document.getElementById('btc-balance');
            const btcUsd = document.getElementById('btc-usd');
            if (btcBalance && btcUsd) {
                btcBalance.textContent = `${cryptoBalances.btc.toFixed(8)} BTC`;
                btcUsd.textContent = `$${(cryptoBalances.btc * 45000).toFixed(2)}`;
            }
            
            // Update USDT balance
            const usdtBalance = document.getElementById('usdt-balance');
            const usdtUsd = document.getElementById('usdt-usd');
            if (usdtBalance && usdtUsd) {
                usdtBalance.textContent = `${cryptoBalances.usdt.toFixed(2)} USDT`;
                usdtUsd.textContent = `$${cryptoBalances.usdt.toFixed(2)}`;
            }
        }

        function updateTransactionHistory() {
            const historyDiv = document.getElementById('transaction-history');
            if (!historyDiv) return;
            
            if (transactionHistory.length === 0) {
                historyDiv.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <div class="text-4xl mb-2">📄</div>
                        <div class="font-medium">Գործարքներ չկան</div>
                        <div class="text-sm">Ձեր բոլոր գործարքները կցուցադրվեն այստեղ</div>
                    </div>
                `;
                return;
            }
            
            const historyHtml = transactionHistory.slice(-10).reverse().map(tx => {
                const isDeposit = tx.type === 'deposit';
                const icon = isDeposit ? '↓' : '↑';
                const colorClass = isDeposit ? 'text-green-600' : 'text-red-600';
                const bgClass = isDeposit ? 'bg-green-50' : 'bg-red-50';
                
                return `
                    <div class="${bgClass} border rounded-lg p-3">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 ${bgClass} rounded-full flex items-center justify-center">
                                    <span class="${colorClass} font-bold">${icon}</span>
                                </div>
                                <div>
                                    <div class="font-medium">${isDeposit ? 'Қосу' : 'Шығу'}</div>
                                    <div class="text-sm text-gray-600">${tx.method} • ${new Date(tx.date).toLocaleDateString('kzt-KZT')}</div>
                                </div>
                            </div>
                            <div class="${colorClass} font-bold">
                                ${isDeposit ? '+' : '-'}֏${tx.amount.toLocaleString()}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            
            historyDiv.innerHTML = historyHtml;
        }

        function animateBalanceUpdate(amount) {
            const balanceCard = document.getElementById('balance-card');
            balanceCard.classList.add('balance-update');
            
            setTimeout(() => {
                balanceCard.classList.remove('balance-update');
            }, 600);
        }

        // Deposit Modal Functions
        function showDepositModal() {
            triggerHaptic('light');
            const modal = document.getElementById('deposit-modal');
            modal.style.display = 'flex';
            
            // Reset form
            selectedDepositMethod = null;
            document.getElementById('deposit-amount').value = '';
            document.getElementById('deposit-submit').disabled = true;
            document.getElementById('payment-details').style.display = 'none';
            
            // Reset method selection
            document.querySelectorAll('.deposit-method').forEach(method => {
                method.classList.remove('selected');
            });
        }

        function closeDepositModal() {
            const modal = document.getElementById('deposit-modal');
            const content = modal.querySelector('.popup-content');
            
            content.classList.add('closing');
            setTimeout(() => {
                modal.style.display = 'none';
                content.classList.remove('closing');
            }, 300);
        }

        function selectDepositMethod(method) {
            triggerHaptic('light');
            selectedDepositMethod = method;
            
            // Update UI
            document.querySelectorAll('.deposit-method').forEach(m => {
                m.classList.remove('selected', 'linen-processing');
            });
            
            const selectedCard = event.currentTarget;
            selectedCard.classList.add('selected');
            
            // Add special Linen animations
            if (method === 'linen') {
                selectedCard.classList.add('linen-processing');
                createLinenParticles(selectedCard);
                createMoneyRain(selectedCard);
            }
            
            // Show payment details
            showPaymentDetails(method);
            
            // Enable submit button if amount is entered
            checkFormValidity();
        }

        function showPaymentDetails(method) {
            const detailsDiv = document.getElementById('payment-details');
            let content = '';
            
            switch(method) {
                case 'DASH':
                    content = `
                        <div class="bg-teal-50 border border-teal-200 rounded-lg p-4">
                            <h5 class="font-semibold text-teal-800 mb-2">DASH төлем мәліметтері</h5>
                            <p class="text-sm text-teal-700 mb-3">Төлем жасау үшін DASH қолданбасын немесе веб-сайтын пайдаланыңыз:</p>
                            <div class="bg-white p-3 rounded border">
                                <div class="text-sm font-medium text-gray-700">Алушы:</div>
                             <div class="text-sm font-medium text-gray-700">Wallet мекенжай:</div>
                                <div class="text-xs text-gray-900 font-mono break-all">0xC8a18cbD6a8457A3fB88c4B78095E7DA639e8B37</div>
                                <div class="text-xs text-red-600 mt-2">⚠️Тек DASH желісін пайдаланыңыз</div>
                            </div>
                        </div>
                    `;
                    break;
                case 'usdt':
                    content = `
                        <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                            <h5 class="font-semibold text-green-800 mb-2">USDT TRC20 հասցե</h5>
                            <p class="text-sm text-green-700 mb-3">Ուղարկեք USDT-ն այս հասցեին TRC20 ցանցով:</p>
                            <div class="bg-white p-3 rounded border">
                                <div class="text-sm font-medium text-gray-700">Wallet հասցե:</div>
                                <div class="text-xs text-gray-900 font-mono break-all">TX3p6vhXwGczdwNeUky8ZfvfBvr8wcy3Ra</div>
                                <div class="text-xs text-red-600 mt-2">⚠️ Միայն TRC20 ցանց օգտագործեք</div>
                            </div>
                        </div>
                    `;
                    break;
                case 'bank':
                    content = `
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <h5 class="font-semibold text-blue-800 mb-2">USDC SOLANA հասցե</h5>
                            <p class="text-sm text-blue-700 mb-3">Սա փորձարկման ռեժիմ է: Գումարը ավտոմատ կավելացվի:</p>
                            <div class="bg-white p-3 rounded border">
                                <div class="text-sm font-medium text-gray-700">Բանկ:</div>
                              <div class="text-sm font-medium text-gray-700">Wallet հասցե:</div>
                                <div class="text-xs text-gray-900 font-mono break-all">GPpgwBALDQxD1U5EBnnKPyemunjtyzKZsQsGSVe2DYzJ</div>
                                <div class="text-xs text-red-600 mt-2">⚠️ Միայն USDC SOLANA ցանց օգտագործեք</div>
                            </div>
                        </div>
                    `;
                    break;
            }
            
            detailsDiv.innerHTML = content;
            detailsDiv.style.display = 'block';
        }

       

        // Add event listeners for form inputs
        document.addEventListener('DOMContentLoaded', function() {
            // Deposit form
            const amountInput = document.getElementById('deposit-amount');
            if (amountInput) {
                amountInput.addEventListener('input', checkFormValidity);
            }
            
            // Withdrawal form
            const withdrawAmountInput = document.getElementById('withdraw-amount');
            if (withdrawAmountInput) {
                withdrawAmountInput.addEventListener('input', checkWithdrawFormValidity);
            }
        });

        function createLinenParticles(card) {
            const particlesContainer = card.querySelector('.linen-particles');
            if (!particlesContainer) return;
            
            // Clear existing particles
            particlesContainer.innerHTML = '';
            
            // Create floating particles
            for (let i = 0; i < 8; i++) {
                const particle = document.createElement('div');
                particle.className = 'linen-particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 3 + 's';
                particle.style.animationDuration = (2 + Math.random() * 2) + 's';
                particlesContainer.appendChild(particle);
            }
        }
        
        function createMoneyRain(card) {
            const moneyContainer = document.createElement('div');
            moneyContainer.className = 'linen-money-rain';
            card.appendChild(moneyContainer);
            
            const symbols = ['💰', '💎', '⚡', '🔥', '💳', '✨'];
            
            for (let i = 0; i < 6; i++) {
                const symbol = document.createElement('div');
                symbol.className = 'money-symbol';
                symbol.textContent = symbols[Math.floor(Math.random() * symbols.length)];
                symbol.style.left = Math.random() * 100 + '%';
                symbol.style.animationDelay = Math.random() * 4 + 's';
                symbol.style.animationDuration = (3 + Math.random() * 2) + 's';
                moneyContainer.appendChild(symbol);
            }
            
            // Remove after animation
            setTimeout(() => {
                if (moneyContainer.parentNode) {
                    moneyContainer.parentNode.removeChild(moneyContainer);
                }
            }, 8000);
        }
        
        function createLinenCelebration() {
            // Create full-screen celebration overlay
            const celebration = document.createElement('div');
            celebration.className = 'fixed inset-0 pointer-events-none z-50';
            celebration.style.background = 'radial-gradient(circle, rgba(20,184,166,0.1) 0%, transparent 70%)';
            
            // Create confetti-like effects
            const confettiSymbols = ['🎉', '✨', '💎', '⚡', '🔥', '💰', '🎊', '⭐'];
            
            for (let i = 0; i < 20; i++) {
                const confetti = document.createElement('div');
                confetti.textContent = confettiSymbols[Math.floor(Math.random() * confettiSymbols.length)];
                confetti.style.position = 'absolute';
                confetti.style.fontSize = (16 + Math.random() * 16) + 'px';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.top = '-50px';
                confetti.style.animation = `moneyFall ${2 + Math.random() * 2}s linear forwards`;
                confetti.style.animationDelay = Math.random() * 1 + 's';
                celebration.appendChild(confetti);
            }
            
            // Create ripple effects
            for (let i = 0; i < 3; i++) {
                const ripple = document.createElement('div');
                ripple.style.position = 'absolute';
                ripple.style.top = '50%';
                ripple.style.left = '50%';
                ripple.style.width = '0';
                ripple.style.height = '0';
                ripple.style.borderRadius = '50%';
                ripple.style.border = '2px solid rgba(20,184,166,0.3)';
                ripple.style.transform = 'translate(-50%, -50%)';
                ripple.style.animation = `linenRipple ${1 + i * 0.3}s ease-out forwards`;
                ripple.style.animationDelay = i * 0.2 + 's';
                celebration.appendChild(ripple);
            }
            
            document.body.appendChild(celebration);
            
            // Remove after animation
            setTimeout(() => {
                if (celebration.parentNode) {
                    celebration.parentNode.removeChild(celebration);
                }
            }, 4000);
        }

        function processDeposit() {
            const amount = parseInt(document.getElementById('deposit-amount').value);
            
            if (!selectedDepositMethod || !amount || amount < 3000) {
                return;
            }
            
            triggerHaptic('medium');
            
            // Show loading state
            const submitBtn = document.getElementById('deposit-submit');
            const originalText = submitBtn.textContent;
            
            // Special Linen loading animation
            if (selectedDepositMethod === 'linen') {
                submitBtn.innerHTML = `
                    <div class="flex items-center justify-center space-x-2">
                        <div class="loading-spinner w-5 h-5 border-2 border-white border-t-transparent rounded-full"></div>
                        <span class="DASH-text-wave">DASH даму...</span>
                        <span class="DASH-icon-bounce">⚡</span>
                    </div>
                `;
                submitBtn.classList.add('DASH-processing');
            } else {
                submitBtn.innerHTML = '<div class="loading-spinner w-5 h-5 border-2 border-white border-t-transparent rounded-full mx-auto"></div>';
            }
            
            submitBtn.disabled = true;
            
            // Simulate processing
            setTimeout(() => {
                // Add amount to balance
                currentBalance += amount;
                
                // Add crypto if crypto deposit
                if (selectedDepositMethod === 'usdt') {
                    const usdtAmount = amount / 500; // 1 USDT = 500 AMD
                    cryptoBalances.usdt += usdtAmount;
                } else if (selectedDepositMethod === 'crypto') {
                    const btcAmount = amount / 22500000; // 1 BTC = 22,500,000 AMD
                    cryptoBalances.btc += btcAmount;
                }
                
                // Add transaction to history
                transactionHistory.push({
                    id: Date.now(),
                    type: 'deposit',
                    amount: amount,
                    method: getMethodName(selectedDepositMethod),
                    date: new Date().toISOString(),
                    status: 'completed'
                });
                
                saveUserBalance();
                updateBalanceDisplay();
                updateCryptoDisplay();
                updateTransactionHistory();
                animateBalanceUpdate(amount);
                
                // Close deposit modal
                closeDepositModal();
                
                // Show success modal
                setTimeout(() => {
                    showSuccessModal(amount, 'deposit');
                }, 400);
                
                // Special Linen success animation
                if (selectedDepositMethod === 'linen') {
                    submitBtn.innerHTML = `
                        <div class="flex items-center justify-center space-x-2">
                            <span class="linen-icon-bounce">✅</span>
                            <span class="linen-text-wave">DASH հաջողություն!</span>
                            <span class="linen-icon-bounce">🎉</span>
                        </div>
                    `;
                    submitBtn.classList.add('linen-success');
                    
                    // Create celebration effects
                    createLinenCelebration();
                    
                    setTimeout(() => {
                        submitBtn.innerHTML = originalText;
                        submitBtn.classList.remove('linen-processing', 'linen-success');
                        submitBtn.disabled = false;
                    }, 2000);
                } else {
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                }
                
                triggerHaptic('success');
            }, 2000);
        }

        // Handle withdrawal click with balance check
        function handleWithdrawClick() {
            if (currentBalance < 125000) {
                showInsufficientBalanceModal();
                return;
            }
            
            // Check work schedule requirement
            const workDays = getWorkDaysCompleted();
            if (workDays < 15) {
                showWorkScheduleModal(workDays);
                return;
            }
            
            showWithdrawModal();
        }

        // Withdrawal Modal Functions
        function showWithdrawModal() {
            
            triggerHaptic('light');
            const modal = document.getElementById('withdraw-modal');
            modal.style.display = 'flex';
            
            // Update available balance
            const availableBalance = document.getElementById('withdraw-available-balance');
            if (availableBalance) {
                availableBalance.textContent = `֏${currentBalance.toLocaleString()}`;
            }
            
            // Reset form
            selectedWithdrawMethod = null;
            document.getElementById('withdraw-amount').value = '';
            document.getElementById('withdraw-submit').disabled = true;
            document.getElementById('withdrawal-details').style.display = 'none';
            
            // Reset method selection
            document.querySelectorAll('.withdraw-method').forEach(method => {
                method.classList.remove('selected');
            });
        }

        function closeWithdrawModal() {
            const modal = document.getElementById('withdraw-modal');
            const content = modal.querySelector('.popup-content');
            
            content.classList.add('closing');
            setTimeout(() => {
                modal.style.display = 'none';
                content.classList.remove('closing');
            }, 300);
        }

        function selectWithdrawMethod(method) {
            triggerHaptic('light');
            selectedWithdrawMethod = method;
            
            // Update UI
            document.querySelectorAll('.withdraw-method').forEach(m => {
                m.classList.remove('selected');
            });
            
            event.currentTarget.classList.add('selected');
            
            // Show withdrawal details
            showWithdrawalDetails(method);
            
            // Enable submit button if amount is entered
            checkWithdrawFormValidity();
        }

        function showWithdrawalDetails(method) {
            const detailsDiv = document.getElementById('withdrawal-details');
            let content = '';
            
            switch(method) {
                case 'DASH':
                    content = `
                        <div class="bg-teal-50 border border-teal-200 rounded-lg p-4">
                            <h5 class="font-semibold text-teal-800 mb-2">Linen ելքագրման մանրամասներ</h5>
                            <p class="text-sm text-teal-700 mb-3">Մուտքագրեք Ձեր DASH հաշվի տվյալները:</p>
                            <div class="space-y-3">
                                <div>
                              <label class="block text-sm font-medium text-gray-700 mb-2">BTC Wallet հասցե</label>
                                <input type="text" id="btc-address" placeholder="bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm font-mono">
                            </div>
                        </div>
                    `;
                    break;
                case 'DASH':
                    content = `
                        <div class="bg-teal-50 border border-teal-200 rounded-lg p-4">
                            <h5 class="font-semibold text-teal-800 mb-2">Linen ելքագրման մանրամասներ</h5>
                            <p class="text-sm text-teal-700 mb-3">Մուտքագրեք Ձեր DASH հաշվի տվյալները:</p>
                            <div class="space-y-3">
                                <div>
                              <label class="block text-sm font-medium text-gray-700 mb-2">BTC Wallet հասցե</label>
                                <input type="text" id="btc-address" placeholder="bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm font-mono">
                            </div>
                        </div>
                    `;
                    break;
                case 'idram':
                    content = `
                        <div class="bg-purple-50 border border-purple-200 rounded-lg p-4">
                            <h5 class="font-semibold text-purple-800 mb-2">Idram մանրամասներ</h5>
                            <p class="text-sm text-purple-700 mb-3">Մուտքագրեք Ձեր Idram դրամապանակի տվյալները:</p>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Հեռախոսահամար</label>
                                    <input type="tel" id="idram-phone" placeholder="+374-XX-XXX-XXX" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Անուն Ազգանուն</label>
                                    <input type="text" id="idram-name" placeholder="Ձեր անունը" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                case 'arca':
                    content = `
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <h5 class="font-semibold text-blue-800 mb-2">ArCa քարտի մանրամասներ</h5>
                            <p class="text-sm text-blue-700 mb-3">Մուտքագրեք Ձեր ArCa քարտի տվյալները:</p>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Քարտի համար</label>
                                    <input type="text" id="arca-card" placeholder="9051-XXXX-XXXX-XXXX" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Քարտակիրի անուն</label>
                                    <input type="text" id="arca-name" placeholder="Ձեր անունը" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                case 'ameriabank':
                    content = `
                        <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                            <h5 class="font-semibold text-red-800 mb-2">ԱմերիաԲանկ մանրամասներ</h5>
                            <p class="text-sm text-red-700 mb-3">Մուտքագրեք Ձեր ԱմերիաԲանկ հաշվի տվյալները:</p>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Հաշվեհամար</label>
                                    <input type="text" id="ameriabank-account" placeholder="220000000000000000" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Անուն Ազգանուն</label>
                                    <input type="text" id="ameriabank-name" placeholder="Ձեր անունը" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                case 'ardshinbank':
                    content = `
                        <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                            <h5 class="font-semibold text-green-800 mb-2">ԱրդշինԲանկ մանրամասներ</h5>
                            <p class="text-sm text-green-700 mb-3">Մուտքագրեք Ձեր ԱրդշինԲանկ հաշվի տվյալները:</p>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Հաշվեհամար</label>
                                    <input type="text" id="ardshinbank-account" placeholder="220000000000000000" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Անուն Ազգանուն</label>
                                    <input type="text" id="ardshinbank-name" placeholder="Ձեր անունը" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                case 'acba':
                    content = `
                        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                            <h5 class="font-semibold text-yellow-800 mb-2">ԱԿԲԱ Բանկ մանրամասներ</h5>
                            <p class="text-sm text-yellow-700 mb-3">Մուտքագրեք Ձեր ԱԿԲԱ Բանկ հաշվի տվյալները:</p>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Հաշվեհամար</label>
                                    <input type="text" id="acba-account" placeholder="220000000000000000" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Անուն Ազգանուն</label>
                                    <input type="text" id="acba-name" placeholder="Ձեր անունը" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                case 'converse':
                    content = `
                        <div class="bg-indigo-50 border border-indigo-200 rounded-lg p-4">
                            <h5 class="font-semibold text-indigo-800 mb-2">Կոնվերս Բանկ մանրամասներ</h5>
                            <p class="text-sm text-indigo-700 mb-3">Մուտքագրեք Ձեր Կոնվերս Բանկ հաշվի տվյալները:</p>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Հաշվեհամար</label>
                                    <input type="text" id="converse-account" placeholder="220000000000000000" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Անուն Ազգանուն</label>
                                    <input type="text" id="converse-name" placeholder="Ձեր անունը" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                case 'btc':
                    content = `
                        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                            <h5 class="font-semibold text-yellow-800 mb-2">Bitcoin հասցե</h5>
                            <p class="text-sm text-yellow-700 mb-3">Մուտքագրեք Ձեր Bitcoin wallet հասցեն:</p>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">BTC Wallet հասցե</label>
                                <input type="text" id="btc-address" placeholder="bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm font-mono">
                            </div>
                        </div>
                    `;
                    break;
                case 'usdt':
                    content = `
                        <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                            <h5 class="font-semibold text-green-800 mb-2">USDT TRC20 հասցե</h5>
                            <p class="text-sm text-green-700 mb-3">Մուտքագրեք Ձեր USDT TRC20 wallet հասցեն:</p>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">USDT Wallet հասցե</label>
                                <input type="text" id="usdt-address" placeholder="TQn9Y2khEsLMWD7fhRRHMbnqmS9aGHMeyn" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm font-mono">
                            </div>
                        </div>
                    `;
                    break;
            }
            
            detailsDiv.innerHTML = content;
            detailsDiv.style.display = 'block';
        }

        function checkWithdrawFormValidity() {
            const amount = document.getElementById('withdraw-amount').value;
            const submitBtn = document.getElementById('withdraw-submit');
            
            if (selectedWithdrawMethod && amount && parseInt(amount) >= 125000 && parseInt(amount) <= currentBalance) {
                submitBtn.disabled = false;
                submitBtn.textContent = `Ելքագրել ֏${parseInt(amount).toLocaleString()}`;
            } else {
                submitBtn.disabled = true;
                submitBtn.textContent = 'Ելքագրել գումար';
            }
        }

        function processWithdrawal() {
            const amount = parseInt(document.getElementById('withdraw-amount').value);
            
            if (!selectedWithdrawMethod || !amount || amount < 125000 || amount > currentBalance) {
                return;
            }
            
            triggerHaptic('medium');
            
            // Show loading state
            const submitBtn = document.getElementById('withdraw-submit');
            const originalText = submitBtn.textContent;
            submitBtn.innerHTML = '<div class="loading-spinner w-5 h-5 border-2 border-white border-t-transparent rounded-full mx-auto"></div>';
            submitBtn.disabled = true;
            
            // Simulate processing
            setTimeout(() => {
                // Deduct amount from balance
                currentBalance -= amount;
                
                // Deduct crypto if crypto withdrawal
                if (selectedWithdrawMethod === 'usdt') {
                    const usdtAmount = amount / 500; // 1 USDT = 500 AMD
                    cryptoBalances.usdt = Math.max(0, cryptoBalances.usdt - usdtAmount);
                } else if (selectedWithdrawMethod === 'btc') {
                    const btcAmount = amount / 22500000; // 1 BTC = 22,500,000 AMD
                    cryptoBalances.btc = Math.max(0, cryptoBalances.btc - btcAmount);
                }
                
                // Add transaction to history
                transactionHistory.push({
                    id: Date.now(),
                    type: 'withdrawal',
                    amount: amount,
                    method: getMethodName(selectedWithdrawMethod),
                    date: new Date().toISOString(),
                    status: 'completed'
                });
                
                saveUserBalance();
                updateBalanceDisplay();
                updateCryptoDisplay();
                updateTransactionHistory();
                animateBalanceUpdate(amount);
                
                // Close withdrawal modal
                closeWithdrawModal();
                
                // Show success modal
                setTimeout(() => {
                    showSuccessModal(amount, 'withdrawal');
                }, 400);
                
                // Special Linen success animation
                if (selectedDepositMethod === 'linen') {
                    submitBtn.innerHTML = `
                        <div class="flex items-center justify-center space-x-2">
                            <span class="linen-icon-bounce">✅</span>
                            <span class="linen-text-wave">Linen հաջողություն!</span>
                            <span class="linen-icon-bounce">🎉</span>
                        </div>
                    `;
                    submitBtn.classList.add('linen-success');
                    
                    // Create celebration effects
                    createLinenCelebration();
                    
                    setTimeout(() => {
                        submitBtn.innerHTML = originalText;
                        submitBtn.classList.remove('linen-processing', 'linen-success');
                        submitBtn.disabled = false;
                    }, 2000);
                } else {
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                }
                
                triggerHaptic('success');
            }, 2000);
        }

        // Success Modal
        function showSuccessModal(amount, type = 'deposit') {
            const modal = document.getElementById('success-modal');
            const message = document.getElementById('success-message');
            
            if (type === 'deposit') {
                message.textContent = `֏${amount.toLocaleString()} գումարը հաջողությամբ ավելացվել է Ձեր հաշվին:`;
            } else {
                message.textContent = `֏${amount.toLocaleString()} գումարը հաջողությամբ ելքագրվել է Ձեր հաշվից:`;
            }
            
            modal.style.display = 'flex';
        }

        function showInsufficientBalanceModal() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/50 popup-overlay flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-2xl p-6 max-w-sm w-full text-center popup-content">
                    <div class="w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-2xl">⚠️</span>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Անբավարար մնացորդ</h3>
                    <p class="text-gray-600 mb-4">Ելքագրման համար անհրաժեշտ է նվազագույնը ֏125,000 մնացորդ:</p>
                    
                    <div class="bg-orange-50 border border-orange-200 rounded-lg p-4 mb-4">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm font-medium text-orange-800">Ընթացիկ մնացորդ:</span>
                            <span class="text-sm text-orange-700 font-bold">֏${currentBalance.toLocaleString()}</span>
                        </div>
                        <div class="flex items-center justify-between mb-3">
                            <span class="text-sm font-medium text-orange-800">Պահանջվում է:</span>
                            <span class="text-sm text-orange-700 font-bold">֏125,000</span>
                        </div>
                        <div class="w-full bg-orange-200 rounded-full h-3">
                            <div class="bg-orange-500 h-3 rounded-full" style="width: ${Math.min((currentBalance / 125000) * 100, 100)}%"></div>
                        </div>
                        <div class="text-center mt-2">
                            <span class="text-sm text-orange-600 font-medium">Մնացել է: ֏${Math.max(125000 - currentBalance, 0).toLocaleString()}</span>
                        </div>
                    </div>
                    
                    <div class="space-y-2 mb-6">
                        <button onclick="closeInsufficientModal(); showCenter();" class="w-full bg-purple-500 text-white py-3 px-6 rounded-xl font-bold">
                            🎯 Կատարել առաջադրանքներ
                        </button>
                        <button onclick="closeInsufficientModal(); showVideo();" class="w-full bg-red-500 text-white py-3 px-6 rounded-xl font-bold">
                            📺 Դիտել տեսանյութեր
                        </button>
                        <button onclick="closeInsufficientModal(); showDepositModal();" class="w-full bg-blue-500 text-white py-3 px-6 rounded-xl font-bold">
                            💳 Ավելացնել գումար
                        </button>
                    </div>
                    
                    <button onclick="closeInsufficientModal()" class="w-full bg-gray-500 text-white py-2 px-6 rounded-xl font-medium">
                        Փակել
                    </button>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Add close function to window
            window.closeInsufficientModal = function() {
                const content = modal.querySelector('.popup-content');
                content.classList.add('closing');
                setTimeout(() => {
                    if (modal.parentNode) {
                        modal.parentNode.removeChild(modal);
                    }
                }, 300);
            };
            
            triggerHaptic('light');
        }

        function getMethodName(method) {
            const names = {
                'linen': 'Linen',
                'easypay': 'EasyPay',
                'idram': 'Idram',
                'arca': 'ArCa',
                'ameriabank': 'ԱմերիաԲանկ',
                'ardshinbank': 'ԱրդշինԲանկ',
                'acba': 'ԱԿԲԱ Բանկ',
                'converse': 'Կոնվերս Բանկ',
                'usdt': 'USDT TRC20',
                'btc': 'Bitcoin',
                'bank': 'Բանկ',
                'crypto': 'Bitcoin'
            };
            return names[method] || method;
        }

        function closeSuccessModal() {
            const modal = document.getElementById('success-modal');
            const content = modal.querySelector('.popup-content');
            
            content.classList.add('closing');
            setTimeout(() => {
                modal.style.display = 'none';
                content.classList.remove('closing');
            }, 300);
        }

        // Navigation Functions
        function showHome() {
            setActiveTab('home');
            showSection('home-section');
        }

        function showInvite() {
            setActiveTab('invite');
            showSection('invite-section');
        }

        function showCenter() {
            setActiveTab('center');
            showSection('center-section');
        }

        function showVideo() {
            setActiveTab('video');
            showSection('video-section');
        }

        function showCash() {
            setActiveTab('cash');
            showSection('cash-section');
        }

        function showSection(sectionId) {
            document.querySelectorAll('.section-content').forEach(section => {
                section.style.display = 'none';
            });
            
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.style.display = 'block';
            }
        }

        function setActiveTab(activeTab) {
            const tabs = ['home', 'invite', 'center', 'video', 'cash'];
            const buttons = document.querySelectorAll('nav button');
            const indicator = document.querySelector('.nav-indicator');
            
            buttons.forEach((button, index) => {
                if (tabs[index] === activeTab) {
                    button.className = button.className.replace('text-gray-500', 'text-blue-600');
                    button.classList.add('active');
                    
                    // Move indicator
                    if (indicator) {
                        indicator.style.transform = `translateX(${index * 100}%)`;
                    }
                } else {
                    button.className = button.className.replace('text-blue-600', 'text-gray-500');
                    button.classList.remove('active');
                }
            });
        }

        // Utility Functions
        function triggerHaptic(type) {
            if (tg && tg.HapticFeedback) {
                switch(type) {
                    case 'light':
                        tg.HapticFeedback.impactOccurred('light');
                        break;
                    case 'medium':
                        tg.HapticFeedback.impactOccurred('medium');
                        break;
                    case 'heavy':
                        tg.HapticFeedback.impactOccurred('heavy');
                        break;
                    case 'success':
                        tg.HapticFeedback.notificationOccurred('success');
                        break;
                    case 'error':
                        tg.HapticFeedback.notificationOccurred('error');
                        break;
                }
            }
        }

        function shareReferralLink() {
            const referralLink = document.getElementById('referral-link').value;
            const shareText = `🚀 Միացեք RichLab-ին և վաստակեք գումար!\n\n💰 Ստացեք բոնուս գրանցվելիս\n📱 Կատարեք առաջադրանքներ և վաստակեք\n👥 Հրավիրեք ընկերներ և ստացեք բոնուս\n💳 Ավելացրեք գումար Linen, USDT կամ բանկով\n🏆 Ելքագրեք կրիպտո կամ բանկ\n\n${referralLink}`;
            
            triggerHaptic('light');
            
            if (tg) {
                // Telegram Web App sharing
                tg.openTelegramLink(`https://t.me/share/url?url=${encodeURIComponent(referralLink)}&text=${encodeURIComponent(shareText)}`);
            } else {
                // Web fallback options
                if (navigator.share) {
                    // Native Web Share API
                    navigator.share({
                        title: 'RichLab - Վաստակեք գումար',
                        text: shareText,
                        url: referralLink
                    }).catch(err => {
                        console.log('Share failed:', err);
                        fallbackShare(referralLink, shareText);
                    });
                } else {
                    fallbackShare(referralLink, shareText);
                }
            }
        }

        function fallbackShare(referralLink, shareText) {
            // Create share options modal
            const shareModal = document.createElement('div');
            shareModal.className = 'fixed inset-0 bg-black/50 popup-overlay flex items-center justify-center z-50 p-4';
            shareModal.innerHTML = `
                <div class="bg-white rounded-2xl p-6 max-w-sm w-full popup-content">
                    <h3 class="text-lg font-bold text-gray-800 mb-4 text-center">Կիսվել</h3>
                    
                    <div class="space-y-3 mb-6">
                        <button onclick="copyToClipboard('${referralLink}'); closeShareModal();" class="w-full bg-blue-500 text-white py-3 px-4 rounded-lg flex items-center justify-center space-x-2">
                            <span>📋</span>
                            <span>Պատճենել հղումը</span>
                        </button>
                        
                        <button onclick="shareToTelegram('${encodeURIComponent(shareText)}', '${encodeURIComponent(referralLink)}'); closeShareModal();" class="w-full bg-blue-400 text-white py-3 px-4 rounded-lg flex items-center justify-center space-x-2">
                            <span>📱</span>
                            <span>Telegram</span>
                        </button>
                        
                        <button onclick="shareToWhatsApp('${encodeURIComponent(shareText)}'); closeShareModal();" class="w-full bg-green-500 text-white py-3 px-4 rounded-lg flex items-center justify-center space-x-2">
                            <span>💬</span>
                            <span>WhatsApp</span>
                        </button>
                        
                        <button onclick="shareToFacebook('${encodeURIComponent(referralLink)}'); closeShareModal();" class="w-full bg-blue-600 text-white py-3 px-4 rounded-lg flex items-center justify-center space-x-2">
                            <span>📘</span>
                            <span>Facebook</span>
                        </button>
                        
                        <button onclick="shareToTwitter('${encodeURIComponent(shareText)}'); closeShareModal();" class="w-full bg-blue-400 text-white py-3 px-4 rounded-lg flex items-center justify-center space-x-2">
                            <span>🐦</span>
                            <span>Twitter</span>
                        </button>
                    </div>
                    
                    <button onclick="closeShareModal()" class="w-full bg-gray-500 text-white py-2 px-4 rounded-lg">
                        Փակել
                    </button>
                </div>
            `;
            
            document.body.appendChild(shareModal);
            
            // Add close function to window
            window.closeShareModal = function() {
                shareModal.remove();
            };
        }

        function copyToClipboard(text) {
            if (navigator.clipboard) {
                navigator.clipboard.writeText(text).then(() => {
                    showNotification('Հղումը պատճենվել է! 📋');
                });
            } else {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = text;
                textArea.style.position = 'fixed';
                textArea.style.left = '-999999px';
                textArea.style.top = '-999999px';
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                
                try {
                    document.execCommand('copy');
                    showNotification('Հղումը պատճենվել է! 📋');
                } catch (err) {
                    console.error('Copy failed:', err);
                }
                
                document.body.removeChild(textArea);
            }
        }

        function shareToTelegram(text, url) {
            window.open(`https://t.me/share/url?url=${url}&text=${text}`, '_blank', 'noopener,noreferrer');
        }

        function shareToWhatsApp(text) {
            window.open(`https://wa.me/?text=${text}`, '_blank', 'noopener,noreferrer');
        }

        function shareToFacebook(url) {
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`, '_blank', 'noopener,noreferrer');
        }

        function shareToTwitter(text) {
            window.open(`https://twitter.com/intent/tweet?text=${text}`, '_blank', 'noopener,noreferrer');
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300';
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.style.transform = 'translateX(-50%) translateY(0)';
            }, 100);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.style.transform = 'translateX(-50%) translateY(-100px)';
                notification.style.opacity = '0';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        function watchVideo(videoUrl) {
            if (tg) {
                tg.openLink(videoUrl);
            } else {
                window.open(videoUrl, '_blank', 'noopener,noreferrer');
            }
            
            triggerHaptic('light');
        }

        // Video earning system
        let dailyVideosWatched = 0;
        let dailyVideoEarnings = 0;
        let watchedVideosToday = [];

        // Task completion system
        let completedTasks = [];
        let totalTaskEarnings = 0;
        
        // Work schedule tracking
        let workSchedule = {};
        
        function getWorkDaysCompleted() {
            const today = new Date();
            const savedSchedule = localStorage.getItem(`richlab_work_schedule_${currentUser.id}`);
            
            if (savedSchedule) {
                workSchedule = JSON.parse(savedSchedule);
            }
            
            // Count unique days with activity (tasks or videos)
            let workDays = 0;
            for (const date in workSchedule) {
                if (workSchedule[date].hasActivity) {
                    workDays++;
                }
            }
            
            return workDays;
        }
        
        function markWorkDay() {
            const today = new Date().toDateString();
            
            if (!workSchedule[today]) {
                workSchedule[today] = {
                    hasActivity: true,
                    tasks: 0,
                    videos: 0,
                    earnings: 0
                };
            } else {
                workSchedule[today].hasActivity = true;
            }
            
            localStorage.setItem(`richlab_work_schedule_${currentUser.id}`, JSON.stringify(workSchedule));
        }
        
        function showWorkScheduleModal(currentDays) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/50 popup-overlay flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-2xl p-6 max-w-sm w-full text-center popup-content">
                    <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-2xl">📅</span>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Աշխատանքային ցուցակ</h3>
                    <p class="text-gray-600 mb-4">Ելքագրման համար անհրաժեշտ է 15 աշխատանքային օր ակտիվություն:</p>
                    
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm font-medium text-blue-800">Ավարտված օրեր:</span>
                            <span class="text-sm text-blue-700 font-bold">${currentDays}/15</span>
                        </div>
                        <div class="w-full bg-blue-200 rounded-full h-3">
                            <div class="bg-blue-500 h-3 rounded-full" style="width: ${(currentDays / 15) * 100}%"></div>
                        </div>
                        <div class="text-center mt-2">
                            <span class="text-sm text-blue-600 font-medium">Մնացել է: ${15 - currentDays} օր</span>
                        </div>
                    </div>
                    
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6">
                        <div class="flex items-start space-x-3">
                            <div class="text-yellow-500 text-xl">💡</div>
                            <div class="text-left">
                                <h4 class="font-semibold text-yellow-800 mb-2">Ինչպես հաշվել աշխատանքային օրը:</h4>
                                <ul class="text-sm text-yellow-700 space-y-1">
                                    <li>• Կատարեք առնվազն 1 առաջադրանք օրական</li>
                                    <li>• Կամ դիտեք առնվազն 1 տեսանյութ օրական</li>
                                    <li>• Յուրաքանչյուր ակտիվ օր հաշվվում է որպես աշխատանքային</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="space-y-2 mb-6">
                        <button onclick="closeWorkScheduleModal(); showCenter();" class="w-full bg-purple-500 text-white py-3 px-6 rounded-xl font-bold">
                            🎯 Կատարել առաջադրանքներ
                        </button>
                        <button onclick="closeWorkScheduleModal(); showVideo();" class="w-full bg-red-500 text-white py-3 px-6 rounded-xl font-bold">
                            📺 Դիտել տեսանյութեր
                        </button>
                    </div>
                    
                    <button onclick="closeWorkScheduleModal()" class="w-full bg-gray-500 text-white py-2 px-6 rounded-xl font-medium">
                        Փակել
                    </button>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Add close function to window
            window.closeWorkScheduleModal = function() {
                const content = modal.querySelector('.popup-content');
                content.classList.add('closing');
                setTimeout(() => {
                    if (modal.parentNode) {
                        modal.parentNode.removeChild(modal);
                    }
                }, 300);
            };
            
            triggerHaptic('light');
        }

        function loadDailyVideoProgress() {
            const today = new Date().toDateString();
            const savedProgress = localStorage.getItem(`richlab_daily_videos_${currentUser.id}_${today}`);
            
            if (savedProgress) {
                const progress = JSON.parse(savedProgress);
                dailyVideosWatched = progress.watched || 0;
                dailyVideoEarnings = progress.earnings || 0;
                watchedVideosToday = progress.videos || [];
            } else {
                dailyVideosWatched = 0;
                dailyVideoEarnings = 0;
                watchedVideosToday = [];
            }
            
            updateDailyVideoProgress();
            updateVideoButtons();
        }

        function saveDailyVideoProgress() {
            const today = new Date().toDateString();
            const progress = {
                watched: dailyVideosWatched,
                earnings: dailyVideoEarnings,
                videos: watchedVideosToday
            };
            localStorage.setItem(`richlab_daily_videos_${currentUser.id}_${today}`, JSON.stringify(progress));
        }

        function updateDailyVideoProgress() {
            const countElement = document.getElementById('daily-videos-count');
            const barElement = document.getElementById('daily-videos-bar');
            const earningsElement = document.getElementById('daily-earnings');
            
            if (countElement) countElement.textContent = `${dailyVideosWatched}/3`;
            if (barElement) {
                const percentage = (dailyVideosWatched / 3) * 100;
                barElement.style.width = `${percentage}%`;
            }
            if (earningsElement) earningsElement.textContent = `֏${dailyVideoEarnings.toLocaleString()}`;
            
            // Show completed videos section if any videos watched
            const completedSection = document.getElementById('completed-videos');
            if (completedSection && watchedVideosToday.length > 0) {
                completedSection.style.display = 'block';
                updateCompletedVideosList();
            }
        }

        function updateVideoButtons() {
            document.querySelectorAll('.video-card-item').forEach(card => {
                const videoId = parseInt(card.dataset.videoId);
                const button = card.querySelector('button');
                
                if (watchedVideosToday.includes(videoId)) {
                    button.textContent = '✅ Դիտված';
                    button.disabled = true;
                    button.classList.remove('bg-red-500', 'bg-green-500', 'bg-purple-500', 'hover:bg-red-600', 'hover:bg-green-600', 'hover:bg-purple-600');
                    button.classList.add('bg-gray-400', 'cursor-not-allowed');
                    card.classList.add('opacity-60');
                } else if (dailyVideosWatched >= 3) {
                    button.textContent = 'Օրական սահմանը լրացել է';
                    button.disabled = true;
                    button.classList.remove('bg-red-500', 'bg-green-500', 'bg-purple-500', 'hover:bg-red-600', 'hover:bg-green-600', 'hover:bg-purple-600');
                    button.classList.add('bg-gray-400', 'cursor-not-allowed');
                    card.classList.add('opacity-60');
                }
            });
        }

        function updateCompletedVideosList() {
            const listElement = document.getElementById('completed-videos-list');
            if (!listElement) return;
            
            const videoTitles = {
                1: 'Ինչպես վաստակել առցանց',
                2: 'Մոբայլ հավելվածներ',
                3: 'Ֆինանսական խորհուրդներ'
            };
            
            const completedHtml = watchedVideosToday.map(videoId => `
                <div class="bg-green-50 border border-green-200 rounded-lg p-3">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-2">
                            <span class="text-green-500">✅</span>
                            <span class="font-medium text-green-800">${videoTitles[videoId]}</span>
                        </div>
                        <span class="text-green-600 font-bold text-sm">+֏2,300</span>
                    </div>
                </div>
            `).join('');
            
            listElement.innerHTML = completedHtml;
        }

        function watchVideoEarn(videoUrl, videoId, earnings) {
            if (dailyVideosWatched >= 3) {
                showNotification('Օրական սահմանը լրացել է: Վաղը կարող եք դիտել նոր տեսանյութեր: ⏰');
                return;
            }
            
            if (watchedVideosToday.includes(videoId)) {
                showNotification('Այս տեսանյութը արդեն դիտել եք այսօր: 👀');
                return;
            }
            
            triggerHaptic('medium');
            
            // Show loading state
            const button = event.target;
            const originalText = button.textContent;
            button.innerHTML = '<div class="loading-spinner w-5 h-5 border-2 border-white border-t-transparent rounded-full mx-auto"></div>';
            button.disabled = true;
            
            // Open video
            if (tg) {
                tg.openLink(videoUrl);
            } else {
                window.open(videoUrl, '_blank', 'noopener,noreferrer');
            }
            
            // Simulate watching time (5 seconds for demo)
            setTimeout(() => {
                // Add earnings
                currentBalance += earnings;
                dailyVideosWatched++;
                dailyVideoEarnings += earnings;
                watchedVideosToday.push(videoId);
                
                // Add transaction to history
                transactionHistory.push({
                    id: Date.now(),
                    type: 'deposit',
                    amount: earnings,
                    method: 'Տեսանյութ',
                    date: new Date().toISOString(),
                    status: 'completed'
                });
                
                // Mark work day
                markWorkDay();
                
                // Save progress
                saveUserBalance();
                saveDailyVideoProgress();
                
                // Update UI
                updateBalanceDisplay();
                updateTransactionHistory();
                updateDailyVideoProgress();
                updateVideoButtons();
                animateBalanceUpdate(earnings);
                
                // Show success
                button.textContent = '✅ Դիտված';
                button.classList.remove('bg-red-500', 'bg-green-500', 'bg-purple-500');
                button.classList.add('bg-gray-400');
                
                // Create celebration
                createVideoCelebration(earnings);
                
                // Show notification
                showNotification(`Շնորհավորում ենք! Վաստակեցիք ֏${earnings.toLocaleString()} 🎉`);
                
                triggerHaptic('success');
            }, 5000);
        }

        function createVideoCelebration(earnings) {
            // Create celebration overlay
            const celebration = document.createElement('div');
            celebration.className = 'fixed inset-0 pointer-events-none z-50';
            celebration.style.background = 'radial-gradient(circle, rgba(239,68,68,0.1) 0%, transparent 70%)';
            
            // Create money symbols
            const symbols = ['💰', '🎬', '📺', '⭐', '🎉', '💎', '🔥', '✨'];
            
            for (let i = 0; i < 15; i++) {
                const symbol = document.createElement('div');
                symbol.textContent = symbols[Math.floor(Math.random() * symbols.length)];
                symbol.style.position = 'absolute';
                symbol.style.fontSize = (16 + Math.random() * 16) + 'px';
                symbol.style.left = Math.random() * 100 + '%';
                symbol.style.top = '-50px';
                symbol.style.animation = `moneyFall ${2 + Math.random() * 2}s linear forwards`;
                symbol.style.animationDelay = Math.random() * 1 + 's';
                celebration.appendChild(symbol);
            }
            
            // Create earnings display
            const earningsDisplay = document.createElement('div');
            earningsDisplay.style.position = 'absolute';
            earningsDisplay.style.top = '30%';
            earningsDisplay.style.left = '50%';
            earningsDisplay.style.transform = 'translateX(-50%)';
            earningsDisplay.style.fontSize = '2rem';
            earningsDisplay.style.fontWeight = 'bold';
            earningsDisplay.style.color = '#ef4444';
            earningsDisplay.style.textShadow = '2px 2px 4px rgba(0,0,0,0.3)';
            earningsDisplay.style.animation = 'linenIconBounce 1s ease-out';
            earningsDisplay.textContent = `+֏${earnings.toLocaleString()}`;
            celebration.appendChild(earningsDisplay);
            
            document.body.appendChild(celebration);
            
            // Remove after animation
            setTimeout(() => {
                if (celebration.parentNode) {
                    celebration.parentNode.removeChild(celebration);
                }
            }, 4000);
        }

        // Task Management Functions
        function loadTaskProgress() {
            const savedTasks = localStorage.getItem(`richlab_completed_tasks_${currentUser.id}`);
            const savedEarnings = localStorage.getItem(`richlab_task_earnings_${currentUser.id}`);
            
            if (savedTasks) {
                completedTasks = JSON.parse(savedTasks);
            } else {
                completedTasks = [];
            }
            
            if (savedEarnings) {
                totalTaskEarnings = parseInt(savedEarnings);
            } else {
                totalTaskEarnings = 0;
            }
            
            updateTaskProgress();
            updateTaskButtons();
        }

        function saveTaskProgress() {
            localStorage.setItem(`richlab_completed_tasks_${currentUser.id}`, JSON.stringify(completedTasks));
            localStorage.setItem(`richlab_task_earnings_${currentUser.id}`, totalTaskEarnings.toString());
        }

        function updateTaskProgress() {
            const countElement = document.getElementById('completed-tasks-count');
            const earningsElement = document.getElementById('total-task-earnings');
            
            if (countElement) countElement.textContent = completedTasks.length;
            if (earningsElement) earningsElement.textContent = `֏${totalTaskEarnings.toLocaleString()}`;
            
            // Show completed tasks section if any tasks completed
            const completedSection = document.getElementById('completed-tasks-section');
            if (completedSection && completedTasks.length > 0) {
                completedSection.style.display = 'block';
                updateCompletedTasksList();
            }
        }

        function updateTaskButtons() {
            document.querySelectorAll('.task-item').forEach(taskCard => {
                const taskId = parseInt(taskCard.dataset.taskId);
                const button = taskCard.querySelector('button');
                
                if (completedTasks.includes(taskId)) {
                    button.textContent = '✅ Ավարտված';
                    button.disabled = true;
                    button.classList.remove('bg-blue-500', 'bg-green-500', 'bg-purple-500', 'bg-orange-500', 'bg-red-500', 'bg-teal-500', 'bg-indigo-500', 'bg-pink-500', 'bg-yellow-500', 'bg-cyan-500', 'bg-emerald-500', 'bg-violet-500');
                    button.classList.remove('hover:bg-blue-600', 'hover:bg-green-600', 'hover:bg-purple-600', 'hover:bg-orange-600', 'hover:bg-red-600', 'hover:bg-teal-600', 'hover:bg-indigo-600', 'hover:bg-pink-600', 'hover:bg-yellow-600', 'hover:bg-cyan-600', 'hover:bg-emerald-600', 'hover:bg-violet-600');
                    button.classList.add('bg-gray-400', 'cursor-not-allowed');
                    taskCard.classList.add('opacity-60');
                }
            });
        }

        function updateCompletedTasksList() {
            const listElement = document.getElementById('completed-tasks-list');
            if (!listElement) return;
            
            const taskTitles = {
                1: 'Experience the application',
                2: 'Participate in activities',
                3: 'Participate in activities',
                4: 'Participate in activities',
                5: 'Participate in activities',
                6: 'Participate in activities',
                7: 'Participate in activities',
                8: 'Participate in activities',
                9: 'Participate in activities',
                10: 'Complete the survey',
                11: 'Try new game',
                12: 'Participate in activities'
            };
            
            const completedHtml = completedTasks.map(taskId => `
                <div class="bg-green-50 border border-green-200 rounded-lg p-3">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-2">
                            <span class="text-green-500">✅</span>
                            <span class="font-medium text-green-800">${taskTitles[taskId]}</span>
                        </div>
                        <span class="text-green-600 font-bold text-sm">+֏2,000</span>
                    </div>
                </div>
            `).join('');
            
            listElement.innerHTML = completedHtml;
        }

        function startTask(taskId, earnings, taskName) {
            if (completedTasks.includes(taskId)) {
                showNotification('Այս առաջադրանքը արդեն ավարտել եք: ✅');
                return;
            }
            
            triggerHaptic('medium');
            
            // Show loading state
            const button = event.target;
            const originalText = button.textContent;
            button.innerHTML = '<div class="loading-spinner w-5 h-5 border-2 border-white border-t-transparent rounded-full mx-auto"></div>';
            button.disabled = true;
            
            // Open external link for task (demo)
            const taskUrls = {
                1: 'https://play.google.com/store/apps/details?id=com.example.app',
                2: 'https://www.example.com/activity',
                3: 'https://www.example.com/activity2',
                4: 'https://www.example.com/activity3',
                5: 'https://www.example.com/activity4',
                6: 'https://www.example.com/activity5',
                7: 'https://www.example.com/activity6',
                8: 'https://www.example.com/activity7',
                9: 'https://www.example.com/activity8',
                10: 'https://forms.google.com/survey',
                11: 'https://play.google.com/store/apps/details?id=com.example.game',
                12: 'https://www.example.com/activity9'
            };
            
            if (tg) {
                tg.openLink(taskUrls[taskId] || 'https://www.example.com');
            } else {
                window.open(taskUrls[taskId] || 'https://www.example.com', '_blank', 'noopener,noreferrer');
            }
            
            // Simulate task completion time (5 seconds for demo)
            setTimeout(() => {
                // Add earnings
                currentBalance += earnings;
                totalTaskEarnings += earnings;
                completedTasks.push(taskId);
                
                // Add transaction to history
                transactionHistory.push({
                    id: Date.now(),
                    type: 'deposit',
                    amount: earnings,
                    method: 'Առաջադրանք',
                    date: new Date().toISOString(),
                    status: 'completed'
                });
                
                // Mark work day
                markWorkDay();
                
                // Save progress
                saveUserBalance();
                saveTaskProgress();
                
                // Update UI
                updateBalanceDisplay();
                updateTransactionHistory();
                updateTaskProgress();
                updateTaskButtons();
                animateBalanceUpdate(earnings);
                
                // Show success
                button.textContent = '✅ Ավարտված';
                button.classList.remove('bg-blue-500', 'bg-green-500', 'bg-purple-500', 'bg-orange-500', 'bg-red-500', 'bg-teal-500', 'bg-indigo-500', 'bg-pink-500', 'bg-yellow-500', 'bg-cyan-500', 'bg-emerald-500', 'bg-violet-500');
                button.classList.add('bg-gray-400');
                
                // Create celebration
                createTaskCelebration(earnings, taskName);
                
                // Show notification
                showNotification(`Շնորհավորում ենք! Վաստակեցիք ֏${earnings.toLocaleString()} 🎉`);
                
                triggerHaptic('success');
            }, 5000);
        }

        function createTaskCelebration(earnings, taskName) {
            // Create celebration overlay
            const celebration = document.createElement('div');
            celebration.className = 'fixed inset-0 pointer-events-none z-50';
            celebration.style.background = 'radial-gradient(circle, rgba(147,51,234,0.1) 0%, transparent 70%)';
            
            // Create money symbols
            const symbols = ['💰', '🎯', '📱', '⭐', '🎉', '💎', '🔥', '✨'];
            
            for (let i = 0; i < 15; i++) {
                const symbol = document.createElement('div');
                symbol.textContent = symbols[Math.floor(Math.random() * symbols.length)];
                symbol.style.position = 'absolute';
                symbol.style.fontSize = (16 + Math.random() * 16) + 'px';
                symbol.style.left = Math.random() * 100 + '%';
                symbol.style.top = '-50px';
                symbol.style.animation = `moneyFall ${2 + Math.random() * 2}s linear forwards`;
                symbol.style.animationDelay = Math.random() * 1 + 's';
                celebration.appendChild(symbol);
            }
            
            // Create earnings display
            const earningsDisplay = document.createElement('div');
            earningsDisplay.style.position = 'absolute';
            earningsDisplay.style.top = '30%';
            earningsDisplay.style.left = '50%';
            earningsDisplay.style.transform = 'translateX(-50%)';
            earningsDisplay.style.fontSize = '2rem';
            earningsDisplay.style.fontWeight = 'bold';
            earningsDisplay.style.color = '#9333ea';
            earningsDisplay.style.textShadow = '2px 2px 4px rgba(0,0,0,0.3)';
            earningsDisplay.style.animation = 'linenIconBounce 1s ease-out';
            earningsDisplay.textContent = `+֏${earnings.toLocaleString()}`;
            celebration.appendChild(earningsDisplay);
            
            // Create task name display
            const taskDisplay = document.createElement('div');
            taskDisplay.style.position = 'absolute';
            taskDisplay.style.top = '40%';
            taskDisplay.style.left = '50%';
            taskDisplay.style.transform = 'translateX(-50%)';
            taskDisplay.style.fontSize = '1rem';
            taskDisplay.style.fontWeight = '600';
            taskDisplay.style.color = '#7c3aed';
            taskDisplay.style.textAlign = 'center';
            taskDisplay.style.animation = 'linenTextWave 1s ease-out';
            taskDisplay.textContent = taskName;
            celebration.appendChild(taskDisplay);
            
            document.body.appendChild(celebration);
            
            // Remove after animation
            setTimeout(() => {
                if (celebration.parentNode) {
                    celebration.parentNode.removeChild(celebration);
                }
            }, 4000);
        }

        // Profile Modal Functions
        function showProfileModal() {
            triggerHaptic('light');
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/50 popup-overlay flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-2xl p-6 max-w-md w-full popup-content">
                    <!-- Header -->
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-xl font-bold text-gray-800">Օգտատիրոջ պրոֆիլ</h3>
                        <button onclick="closeProfileModal()" class="text-gray-500 hover:text-gray-700">
                            <span class="text-xl">✕</span>
                        </button>
                    </div>
                    
                    <!-- Profile Info -->
                    <div class="text-center mb-6">
                        <div class="w-20 h-20 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-3xl text-white">👤</span>
                        </div>
                        <h4 class="text-2xl font-bold text-gray-800 mb-2">Դեմո Օգտատեր</h4>
                        <div class="flex items-center justify-center space-x-2 mb-3">
                            <div class="bg-yellow-400 text-yellow-900 text-xs font-bold px-3 py-1 rounded-full">PRO</div>
                            <div class="bg-green-500 text-white text-xs font-bold px-3 py-1 rounded-full">Ակտիվ</div>
                        </div>
                        <p class="text-gray-600">Անդամ է ${new Date().getFullYear()} թվականից</p>
                    </div>
                    
                    <!-- Profile Stats -->
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <div class="bg-blue-50 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-blue-600">${completedTasks.length}</div>
                            <div class="text-sm text-blue-800">Ավարտված առաջադրանք</div>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-green-600">${dailyVideosWatched}</div>
                            <div class="text-sm text-green-800">Դիտված տեսանյութ</div>
                        </div>
                        <div class="bg-purple-50 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-purple-600">0</div>
                            <div class="text-sm text-purple-800">Հրավիրված ընկեր</div>
                        </div>
                        <div class="bg-orange-50 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-orange-600">${getWorkDaysCompleted()}</div>
                            <div class="text-sm text-orange-800">Աշխատանքային օր</div>
                        </div>
                    </div>
                    
                    <!-- Profile Actions -->
                    <div class="space-y-3">
                        <button onclick="closeProfileModal(); showDepositModal();" class="w-full bg-blue-500 text-white py-3 px-4 rounded-lg font-medium">
                            💳 Ավելացնել գումար
                        </button>
                        <button onclick="closeProfileModal(); showWithdrawModal();" class="w-full bg-green-500 text-white py-3 px-4 rounded-lg font-medium">
                            💰 Ելքագրել գումար
                        </button>
                        <button onclick="closeProfileModal();" class="w-full bg-gray-500 text-white py-2 px-4 rounded-lg font-medium">
                            Փակել
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            window.closeProfileModal = function() {
                const content = modal.querySelector('.popup-content');
                content.classList.add('closing');
                setTimeout(() => {
                    if (modal.parentNode) {
                        modal.parentNode.removeChild(modal);
                    }
                }, 300);
            };
        }

        function showAddFundsModal() {
            triggerHaptic('light');
            showDepositModal();
        }

        function showUserIdModal() {
            triggerHaptic('light');
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/50 popup-overlay flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-2xl p-6 max-w-sm w-full text-center popup-content">
                    <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-2xl">🆔</span>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Օգտատիրոջ ID</h3>
                    <p class="text-gray-600 mb-4">Ձեր եզակի օգտատիրոջ նույնականացման համարը</p>
                    
                    <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4">
                        <div class="text-2xl font-bold text-gray-800 font-mono">${currentUser ? currentUser.id : '123456001'}</div>
                        <div class="text-sm text-gray-600 mt-2">Ամբողջական ID</div>
                    </div>
                    
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                        <div class="flex items-start space-x-3">
                            <div class="text-blue-500 text-xl">💡</div>
                            <div class="text-left">
                                <p class="text-sm text-blue-700">
                                    Այս ID-ն օգտագործվում է Ձեր հաշվի նույնականացման և հաշվետվությունների համար:
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <button onclick="copyToClipboard('${currentUser ? currentUser.id : '123456001'}'); closeUserIdModal();" class="w-full bg-blue-500 text-white py-3 px-6 rounded-xl font-bold mb-3">
                        📋 Պատճենել ID-ն
                    </button>
                    
                    <button onclick="closeUserIdModal()" class="w-full bg-gray-500 text-white py-2 px-6 rounded-xl font-medium">
                        Փակել
                    </button>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            window.closeUserIdModal = function() {
                const content = modal.querySelector('.popup-content');
                content.classList.add('closing');
                setTimeout(() => {
                    if (modal.parentNode) {
                        modal.parentNode.removeChild(modal);
                    }
                }, 300);
            };
        }

        function showStatusModal() {
            triggerHaptic('light');
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/50 popup-overlay flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-2xl p-6 max-w-sm w-full text-center popup-content">
                    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-2xl">🌟</span>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Օգտատիրոջ կարգավիճակ</h3>
                    <p class="text-gray-600 mb-4">Ձեր ընթացիկ կարգավիճակը և առավելությունները</p>
                    
                    <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-4">
                        <div class="flex items-center justify-center space-x-2 mb-2">
                            <span class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></span>
                            <span class="text-lg font-bold text-green-800">Նոր օգտատեր</span>
                        </div>
                        <p class="text-sm text-green-700">Դուք նոր եք միացել RichLab համակարգին</p>
                    </div>
                    
                    <div class="space-y-3 mb-6">
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-3">
                            <div class="flex items-center space-x-2">
                                <span class="text-blue-500">🎁</span>
                                <span class="text-sm text-blue-700 font-medium">Բոնուս ստացել եք</span>
                            </div>
                        </div>
                        <div class="bg-purple-50 border border-purple-200 rounded-lg p-3">
                            <div class="flex items-center space-x-2">
                                <span class="text-purple-500">⚡</span>
                                <span class="text-sm text-purple-700 font-medium">Ակնթարթային վճարումներ</span>
                            </div>
                        </div>
                        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3">
                            <div class="flex items-center space-x-2">
                                <span class="text-yellow-500">🏆</span>
                                <span class="text-sm text-yellow-700 font-medium">PRO ֆունկցիաներ</span>
                            </div>
                        </div>
                    </div>
                    
                    <button onclick="closeStatusModal()" class="w-full bg-green-500 text-white py-3 px-6 rounded-xl font-bold">
                        Շարունակել
                    </button>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            window.closeStatusModal = function() {
                const content = modal.querySelector('.popup-content');
                content.classList.add('closing');
                setTimeout(() => {
                    if (modal.parentNode) {
                        modal.parentNode.removeChild(modal);
                    }
                }, 300);
            };
        }

        function showLanguageModal() {
            triggerHaptic('light');
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/50 popup-overlay flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-2xl p-6 max-w-sm w-full popup-content">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-xl font-bold text-gray-800">Ընտրել լեզուն</h3>
                        <button onclick="closeLanguageModal()" class="text-gray-500 hover:text-gray-700">
                            <span class="text-xl">✕</span>
                        </button>
                    </div>
                    
                    <div class="space-y-3 mb-6">
                        <div class="bg-blue-50 border-2 border-blue-500 rounded-lg p-4 cursor-pointer">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl">🇦🇲</span>
                                    <div>
                                        <div class="font-semibold text-blue-800">Հայերեն</div>
                                        <div class="text-sm text-blue-600">Armenian</div>
                                    </div>
                                </div>
                                <span class="text-blue-500 text-xl">✓</span>
                            </div>
                        </div>
                        
                        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 cursor-pointer hover:bg-gray-100 transition-colors" onclick="changeLanguage('en')">
                            <div class="flex items-center space-x-3">
                                <span class="text-2xl">🇺🇸</span>
                                <div>
                                    <div class="font-semibold text-gray-800">English</div>
                                    <div class="text-sm text-gray-600">English</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 cursor-pointer hover:bg-gray-100 transition-colors" onclick="changeLanguage('ru')">
                            <div class="flex items-center space-x-3">
                                <span class="text-2xl">🇷🇺</span>
                                <div>
                                    <div class="font-semibold text-gray-800">Русский</div>
                                    <div class="text-sm text-gray-600">Russian</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6">
                        <div class="flex items-start space-x-3">
                            <div class="text-yellow-500 text-xl">💡</div>
                            <div class="text-left">
                                <p class="text-sm text-yellow-700">
                                    Լեզվի փոփոխությունը կգործի հաջորդ մուտքից հետո:
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <button onclick="closeLanguageModal()" class="w-full bg-gray-500 text-white py-3 px-6 rounded-xl font-bold">
                        Փակել
                    </button>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            window.closeLanguageModal = function() {
                const content = modal.querySelector('.popup-content');
                content.classList.add('closing');
                setTimeout(() => {
                    if (modal.parentNode) {
                        modal.parentNode.removeChild(modal);
                    }
                }, 300);
            };
            
            window.changeLanguage = function(lang) {
                showNotification(`Լեզուն փոխվել է: Վերագործարկեք հավելվածը: 🌐`);
                closeLanguageModal();
            };
        }

        function showBalanceModal() {
            triggerHaptic('light');
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/50 popup-overlay flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-2xl p-6 max-w-md w-full popup-content">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-xl font-bold text-gray-800">Մնացորդի մանրամասներ</h3>
                        <button onclick="closeBalanceModal()" class="text-gray-500 hover:text-gray-700">
                            <span class="text-xl">✕</span>
                        </button>
                    </div>
                    
                    <!-- Main Balance -->
                    <div class="bg-gradient-to-r from-green-400 to-green-600 text-white p-6 rounded-xl text-center mb-6">
                        <div class="text-lg font-semibold mb-2">Ընդհանուր մնացորդ</div>
                        <div class="text-4xl font-bold mb-3">֏${currentBalance.toLocaleString()}</div>
                        <div class="flex items-center justify-center space-x-4 text-sm opacity-90">
                            <span>💰 Ակտիվ</span>
                            <span>•</span>
                            <span>🔒 Անվտանգ</span>
                            <span>•</span>
                            <span>⚡ Ակնթարթային</span>
                        </div>
                    </div>
                    
                    <!-- Balance Breakdown -->
                    <div class="space-y-3 mb-6">
                        <div class="bg-purple-50 border border-purple-200 rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl">🎯</span>
                                    <div>
                                        <div class="font-semibold text-purple-800">Առաջադրանքներից</div>
                                        <div class="text-sm text-purple-600">${completedTasks.length} ավարտված</div>
                                    </div>
                                </div>
                                <div class="text-purple-600 font-bold">֏${totalTaskEarnings.toLocaleString()}</div>
                            </div>
                        </div>
                        
                        <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl">📺</span>
                                    <div>
                                        <div class="font-semibold text-red-800">Տեսանյութերից</div>
                                        <div class="text-sm text-red-600">${dailyVideosWatched} դիտված այսօր</div>
                                    </div>
                                </div>
                                <div class="text-red-600 font-bold">֏${dailyVideoEarnings.toLocaleString()}</div>
                            </div>
                        </div>
                        
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl">🎁</span>
                                    <div>
                                        <div class="font-semibold text-blue-800">Բոնուսներ</div>
                                        <div class="text-sm text-blue-600">Բարի գալուստ բոնուս</div>
                                    </div>
                                </div>
                                <div class="text-blue-600 font-bold">֏8,000</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Actions -->
                    <div class="grid grid-cols-2 gap-3">
                        <button onclick="closeBalanceModal(); showDepositModal();" class="bg-blue-500 text-white py-3 px-4 rounded-lg font-medium">
                            💳 Ավելացնել
                        </button>
                        <button onclick="closeBalanceModal(); handleWithdrawClick();" class="bg-green-500 text-white py-3 px-4 rounded-lg font-medium">
                            💰 Ելքագրել
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            window.closeBalanceModal = function() {
                const content = modal.querySelector('.popup-content');
                content.classList.add('closing');
                setTimeout(() => {
                    if (modal.parentNode) {
                        modal.parentNode.removeChild(modal);
                    }
                }, 300);
            };
        }

        // Add haptic feedback to all buttons
        document.addEventListener('click', function(e) {
            if (e.target.tagName === 'BUTTON' || e.target.closest('.card-hover') || e.target.closest('.deposit-method')) {
                triggerHaptic('light');
            }
        });

        // Close modals when clicking outside
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('popup-overlay')) {
                if (e.target.id === 'deposit-modal') {
                    closeDepositModal();
                } else if (e.target.id === 'withdraw-modal') {
                    closeWithdrawModal();
                } else if (e.target.id === 'success-modal') {
                    closeSuccessModal();
                }
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99357a6784e2fb7e',t:'MTc2MTI2NzAwNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
<!-- Referral Bonus Script -->
<script>
document.addEventListener("DOMContentLoaded", () => {
    function checkReferralBonus() {
        const urlParams = new URLSearchParams(window.location.search);
        const startParam = urlParams.get("startapp");

        if (startParam && startParam.startsWith("r_")) {
            const referrerId = startParam.replace("r_", "");
            const hasReceived = localStorage.getItem("referralBonusReceived");

            if (!hasReceived) {
                let currentBalance = parseInt(localStorage.getItem("balance") || "0");
                currentBalance += 4000;

                localStorage.setItem("balance", currentBalance);
                localStorage.setItem("referralBonusReceived", "true");
                localStorage.setItem("referrerId", referrerId);

                alert("🎉 Դուք ստացաք 4000 դրամ՝ գրանցվելով referral հղումով!");
            }
        }
    }
    checkReferralBonus();
});
</script>

<!-- Leave this script below -->
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99357a6784e2fb7e',t:'MTc2MTI2NzAwNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
</body>

<script>
(function() {
    const tg = window.Telegram?.WebApp;
    if (!tg) return;

    const user = tg.initDataUnsafe?.user;
    if (!user?.id) return;

    const userId = user.id;
    window.TG_USER_ID = userId;

    // Փոխում է հենց այն span-ը, որտեղ onclick="showUserIdModal()"
    document.querySelectorAll('[onclick="showUserIdModal()"]').forEach(el => {
        el.innerText = userId;
    });
})();
</script>

<script>
(function() {
    const tg = window.Telegram?.WebApp;
    if (!tg) return;

    const user = tg.initDataUnsafe?.user;
    if (!user) return;

    const username = user.username || `user_${user.id}`;
    const userId = user.id;
    window.TG_USERNAME = username;
    window.TG_USER_ID = userId;

    // ---------- 1. h3 username ----------
    document.querySelectorAll('h3[onclick="showProfileModal()"]').forEach(el => {
        el.innerHTML = `<a href="https://t.me/${username}" target="_blank" class="text-blue-500 hover:underline">@${username}</a>`;
    });

    // ---------- 2. Avatar picture ----------
    document.querySelectorAll('div[onclick="showProfileModal()"] > span').forEach(el => {
        if(user.photo_url){
            el.innerHTML = `<img src="${user.photo_url}" alt="${username}" class="w-16 h-16 rounded-full object-cover">`;
        } else {
            el.innerText = '👤';
        }
    });

    // ---------- 3. Ընդհանուր “…001” փոփոխություն ----------
    function replacePlaceholders() {
        document.querySelectorAll('*').forEach(el => {
            if(el.innerText.trim() === '...001'){
                el.innerText = userId;
            }
        });
    }

    replacePlaceholders();
    const observer = new MutationObserver(replacePlaceholders);
    observer.observe(document.body, { childList: true, subtree: true });

})();
</script>

<div id="withdrawal-section" style="text-align:center; margin:20px 0;"></div>

<script>
(function(){
  const tg = window.Telegram?.WebApp;
  if(!tg) return;

  const user = tg.initDataUnsafe?.user;
  if(!user) return;

  const userId = user.id;
  const username = user.username || `user_${user.id}`;

  const withdrawalSection = document.getElementById('withdrawal-section');

  // Create withdrawal button
  const btn = document.createElement('button');
  btn.id = 'withdraw-submit';
  btn.innerText = 'Ելքագրել գումար';
  btn.style.padding = '10px 20px';
  btn.style.fontSize = '16px';
  btn.style.cursor = 'pointer';
  btn.style.borderRadius = '8px';
  btn.style.backgroundColor = '#4f46e5';
  btn.style.color = 'white';
  btn.style.fontWeight = 'bold';
  btn.style.transition = 'transform 0.2s ease, box-shadow 0.2s ease';
  btn.disabled = true; // Initially disabled

  // Hover animation
  btn.addEventListener('mouseenter', () => {
    if(!btn.disabled){
      btn.style.transform = 'scale(1.05)';
      btn.style.boxShadow = '0 0 10px rgba(79, 70, 229,0.7)';
    }
  });
  btn.addEventListener('mouseleave', () => {
    btn.style.transform = 'scale(1)';
    btn.style.boxShadow = '0 0 0 rgba(0,0,0,0)';
  });

  btn.addEventListener('click', () => {
    alert(`Withdrawal սկսվեց օգտատեր ${username} (${userId}) համար`);
  });

  withdrawalSection.appendChild(btn);

  // Check if user has deposit
  const hasDeposit = localStorage.getItem('deposit_' + userId) === 'true';

  if(hasDeposit){
    // Activate button if deposit exists
    btn.disabled = false;
  } else {
    // Show animated message for users without deposit
    const msg = document.createElement('p');
    msg.innerText = 'Դեպոզիտ չարած օգտատերերը չեն կարող կատարել withdrawal';
    msg.style.color = 'red';
    msg.style.fontWeight = 'bold';
    msg.style.fontSize = '16px';
    msg.style.marginTop = '12px';
    msg.style.opacity = '0';
    msg.style.transform = 'translateY(-5px)';
    msg.style.animation = 'fadePulse 2s infinite ease-in-out';
    withdrawalSection.appendChild(msg);

    // Fade-in
    setTimeout(() => {
      msg.style.transition = 'opacity 1s ease, transform 1s ease';
      msg.style.opacity = '1';
      msg.style.transform = 'translateY(0)';
    }, 100);

    // Keyframes for pulse
    const style = document.createElement('style');
    style.innerHTML = `
      @keyframes fadePulse {
        0% { transform: translateY(0); opacity:1; }
        50% { transform: translateY(-3px); opacity:0.8; }
        100% { transform: translateY(0); opacity:1; }
      }
    `;
    document.head.appendChild(style);
  }

})();
</script>

<!-- Ավելացրու սա <body>-ի վերջում կամ <head>-ում -->
<style>
.glow-text {
  color: #ff0000;              /* կարմիր */
  font-weight: bold;
  font-size: 18px;
  text-align: center;
  animation: glow 1.5s ease-in-out infinite alternate;
  text-shadow: 0 0 5px #ff0000,
               0 0 10px #ff5555,
               0 0 15px #ff0000,
               0 0 20px #ff2222;
}

@keyframes glow {
  from {
    text-shadow: 0 0 5px #ff0000,
                 0 0 10px #ff5555,
                 0 0 15px #ff0000;
  }
  to {
    text-shadow: 0 0 20px #ff0000,
                 0 0 30px #ff3333,
                 0 0 40px #ff0000;
  }
}
</style>

<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Support Contact Form</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
        body {
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        @keyframes subtleFadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes gentleSlide {
            from {
                opacity: 0;
                transform: translateX(-10px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes professionalPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }
        
        .animate-fade-in {
            animation: subtleFadeIn 0.6s ease-out;
        }
        
        .animate-slide-in {
            animation: gentleSlide 0.5s ease-out;
        }
        
        .animate-professional-pulse {
            animation: professionalPulse 0.2s ease-in-out;
        }
        
        .input-professional {
            transition: all 0.2s ease;
            border: 2px solid #e5e7eb;
        }
        
        .input-professional:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            outline: none;
        }
        
        .button-professional {
            transition: all 0.2s ease;
            font-weight: 600;
            letter-spacing: 0.025em;
        }
        
        .button-professional:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .button-professional:active {
            transform: translateY(0);
        }
        
        .professional-card {
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .success-professional {
            animation: subtleFadeIn 0.4s ease-out;
        }
        
        .professional-shadow {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="min-h-full bg-gradient-to-br from-slate-50 to-gray-100 p-4 md:p-8">
  <main class="max-w-4xl mx-auto"><!-- Professional Header -->
   <div class="text-center mb-12 animate-fade-in">
    <div class="mb-8"><img src="https://cdn.sanity.io/images/e422uarq/production/cb1e5286cc56139b67cfe7b6f5ecb66dda9cdc72-192x192.png?w=160&amp;h=160&amp;fm=jpg&amp;fit=crop" alt="Support Logo" class="w-20 h-20 mx-auto rounded-full shadow-lg animate-professional-pulse" onerror="this.src=''; this.alt='Support Logo failed to load'; this.style.display='none';">
    </div>
    <h1 id="form-title" class="text-3xl md:text-4xl font-bold text-gray-900 mb-3 tracking-tight">Contact Support</h1>
    <p id="form-subtitle" class="text-lg text-gray-600 max-w-2xl mx-auto leading-relaxed">We're here to help</p>
   </div><!-- Professional Contact Form -->
   <div class="bg-white rounded-3xl professional-shadow professional-card p-8 md:p-12 animate-slide-in">
    <form id="contact-form" class="space-y-8">
     <div class="grid md:grid-cols-2 gap-6">
      <div><label for="name" class="block text-sm font-medium text-gray-900 mb-3">Full Name *</label> <input type="text" id="name" name="name" required class="w-full px-4 py-4 rounded-xl input-professional text-gray-900 placeholder-gray-500" placeholder="John Smith">
      </div>
      <div><label for="email" class="block text-sm font-medium text-gray-900 mb-3">Email Address *</label> <input type="email" id="email" name="email" required class="w-full px-4 py-4 rounded-xl input-professional text-gray-900 placeholder-gray-500" placeholder="john@company.com">
      </div>
     </div>
     <div><label for="message" class="block text-sm font-medium text-gray-900 mb-3">How can we help you? *</label> <textarea id="message" name="message" rows="6" required class="w-full px-4 py-4 rounded-xl input-professional text-gray-900 placeholder-gray-500 resize-none" placeholder="Please provide details about your inquiry or issue..."></textarea>
     </div>
     <div class="pt-4"><button type="submit" id="submit-btn" class="w-full md:w-auto px-8 py-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl button-professional disabled:opacity-50 disabled:cursor-not-allowed min-w-[200px]"> <span id="submit-text">Send Message</span> <span id="loading-spinner" class="hidden ml-2">
        <svg class="animate-spin h-5 w-5 inline" viewbox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none"></circle> <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg></span> </button>
     </div>
    </form><!-- Professional Success Message -->
    <div id="success-message" class="hidden mt-8 p-6 bg-green-50 border border-green-200 text-green-800 rounded-2xl success-professional">
     <div class="flex items-center">
      <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-4">
       <svg class="w-5 h-5 text-green-600" fill="currentColor" viewbox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
       </svg>
      </div>
      <div>
       <h4 class="font-semibold text-green-900">Message Sent Successfully</h4>
       <p id="success-text" class="text-sm text-green-700 mt-1">Thank you! We'll get back to you soon.</p>
      </div>
     </div>
    </div>
   </div><!-- Professional Recent Messages -->
   <div id="recent-messages" class="mt-12 bg-white rounded-3xl professional-shadow professional-card p-8 md:p-12 hidden">
    <div class="flex items-center mb-8">
     <div class="w-10 h-10 bg-gray-100 rounded-xl flex items-center justify-center mr-4">
      <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
      </svg>
     </div>
     <h3 class="text-2xl font-bold text-gray-900">Recent Messages</h3>
    </div>
    <div id="messages-list" class="space-y-4"></div>
   </div>
  </main>
  <script>
        // Professional configuration
        const defaultConfig = {
            form_title: "Contact Support",
            form_subtitle: "We're here to help",
            submit_button_text: "Send Message",
            success_message: "Thank you! We'll get back to you soon.",
            primary_color: "#2563eb",
            surface_color: "#ffffff",
            text_color: "#111827",
            accent_color: "#059669",
            background_color: "#f8fafc"
        };

        let currentMessages = [];

        // Data SDK handler
        const dataHandler = {
            onDataChanged(data) {
                currentMessages = data;
                updateMessagesDisplay();
            }
        };

        // Element SDK configuration
        async function onConfigChange(config) {
            // Update text content
            document.getElementById('form-title').textContent = config.form_title || defaultConfig.form_title;
            document.getElementById('form-subtitle').textContent = config.form_subtitle || defaultConfig.form_subtitle;
            document.getElementById('submit-text').textContent = config.submit_button_text || defaultConfig.submit_button_text;
            document.getElementById('success-text').textContent = config.success_message || defaultConfig.success_message;

            // Update colors
            const primaryColor = config.primary_color || defaultConfig.primary_color;
            const surfaceColor = config.surface_color || defaultConfig.surface_color;
            const textColor = config.text_color || defaultConfig.text_color;
            const accentColor = config.accent_color || defaultConfig.accent_color;
            const backgroundColor = config.background_color || defaultConfig.background_color;

            document.body.style.background = `linear-gradient(to bottom right, ${backgroundColor}, ${primaryColor}20)`;
            document.querySelector('.bg-white').style.backgroundColor = surfaceColor;
            document.getElementById('form-title').style.color = textColor;
            document.getElementById('form-subtitle').style.color = textColor;
            document.getElementById('submit-btn').style.backgroundColor = primaryColor;
        }

        function mapToCapabilities(config) {
            return {
                recolorables: [
                    {
                        get: () => config.primary_color || defaultConfig.primary_color,
                        set: (value) => {
                            config.primary_color = value;
                            window.elementSdk.setConfig({ primary_color: value });
                        }
                    },
                    {
                        get: () => config.surface_color || defaultConfig.surface_color,
                        set: (value) => {
                            config.surface_color = value;
                            window.elementSdk.setConfig({ surface_color: value });
                        }
                    },
                    {
                        get: () => config.text_color || defaultConfig.text_color,
                        set: (value) => {
                            config.text_color = value;
                            window.elementSdk.setConfig({ text_color: value });
                        }
                    },
                    {
                        get: () => config.accent_color || defaultConfig.accent_color,
                        set: (value) => {
                            config.accent_color = value;
                            window.elementSdk.setConfig({ accent_color: value });
                        }
                    },
                    {
                        get: () => config.background_color || defaultConfig.background_color,
                        set: (value) => {
                            config.background_color = value;
                            window.elementSdk.setConfig({ background_color: value });
                        }
                    }
                ],
                borderables: [],
                fontEditable: undefined,
                fontSizeable: undefined
            };
        }

        function mapToEditPanelValues(config) {
            return new Map([
                ["form_title", config.form_title || defaultConfig.form_title],
                ["form_subtitle", config.form_subtitle || defaultConfig.form_subtitle],
                ["submit_button_text", config.submit_button_text || defaultConfig.submit_button_text],
                ["success_message", config.success_message || defaultConfig.success_message]
            ]);
        }

        // Initialize SDKs
        async function initializeApp() {
            try {
                // Initialize Data SDK
                const dataResult = await window.dataSdk.init(dataHandler);
                if (!dataResult.isOk) {
                    console.error("Failed to initialize data SDK");
                }

                // Initialize Element SDK
                if (window.elementSdk) {
                    await window.elementSdk.init({
                        defaultConfig,
                        onConfigChange,
                        mapToCapabilities,
                        mapToEditPanelValues
                    });
                }
            } catch (error) {
                console.error("Failed to initialize SDKs:", error);
            }
        }

        // Form submission handler
        document.getElementById('contact-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            if (currentMessages.length >= 999) {
                showError("Maximum limit of 999 messages reached. Please contact support directly.");
                return;
            }

            const submitBtn = document.getElementById('submit-btn');
            const submitText = document.getElementById('submit-text');
            const loadingSpinner = document.getElementById('loading-spinner');
            
            // Add click animation
            submitBtn.classList.add('animate-pulse-click');
            setTimeout(() => submitBtn.classList.remove('animate-pulse-click'), 300);
            
            // Show loading state
            submitBtn.disabled = true;
            submitText.classList.add('hidden');
            loadingSpinner.classList.remove('hidden');
            
            try {
                const formData = new FormData(this);
                const messageData = {
                    name: formData.get('name'),
                    email: formData.get('email'),
                    message: formData.get('message'),
                    submitted_at: new Date().toISOString()
                };
                
                const result = await window.dataSdk.create(messageData);
                
                if (result.isOk) {
                    // Show success message
                    document.getElementById('success-message').classList.remove('hidden');
                    this.reset();
                    
                    // Add success animation to form
                    document.querySelector('.bg-white').classList.add('animate-bounce-click');
                    setTimeout(() => {
                        document.querySelector('.bg-white').classList.remove('animate-bounce-click');
                    }, 600);
                    
                    // Hide success message after 5 seconds
                    setTimeout(() => {
                        document.getElementById('success-message').classList.add('hidden');
                    }, 5000);
                } else {
                    showError("Failed to send message. Please try again.");
                }
            } catch (error) {
                showError("An error occurred. Please try again.");
            } finally {
                // Reset button state
                submitBtn.disabled = false;
                submitText.classList.remove('hidden');
                loadingSpinner.classList.add('hidden');
            }
        });

        // Professional input interactions
        document.querySelectorAll('input, textarea').forEach(input => {
            input.addEventListener('focus', function() {
                this.classList.add('animate-professional-pulse');
                setTimeout(() => this.classList.remove('animate-professional-pulse'), 200);
            });
            
            input.addEventListener('invalid', function() {
                this.style.borderColor = '#ef4444';
                this.style.boxShadow = '0 0 0 3px rgba(239, 68, 68, 0.1)';
                setTimeout(() => {
                    this.style.borderColor = '';
                    this.style.boxShadow = '';
                }, 2000);
            });
        });

        function showError(message) {
            const errorDiv = document.createElement('div');
            errorDiv.className = 'mt-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg animate-fade-in-up';
            errorDiv.innerHTML = `
                <div class="flex items-center">
                    <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                    </svg>
                    <span>${message}</span>
                </div>
            `;
            
            document.getElementById('contact-form').appendChild(errorDiv);
            
            setTimeout(() => {
                errorDiv.remove();
            }, 5000);
        }

        function updateMessagesDisplay() {
            if (currentMessages.length > 0) {
                const recentMessagesDiv = document.getElementById('recent-messages');
                const messagesList = document.getElementById('messages-list');
                
                recentMessagesDiv.classList.remove('hidden');
                messagesList.innerHTML = '';
                
                // Show last 3 messages
                const recentMessages = currentMessages.slice(-3).reverse();
                
                recentMessages.forEach((msg, index) => {
                    const messageDiv = document.createElement('div');
                    messageDiv.className = 'p-6 bg-gray-50 rounded-2xl border border-gray-100 animate-slide-in';
                    messageDiv.style.animationDelay = `${index * 0.1}s`;
                    
                    const date = new Date(msg.submitted_at).toLocaleDateString('en-US', {
                        year: 'numeric',
                        month: 'short',
                        day: 'numeric'
                    });
                    
                    messageDiv.innerHTML = `
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex items-center">
                                <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3">
                                    <span class="text-blue-600 font-semibold text-sm">${msg.name.charAt(0).toUpperCase()}</span>
                                </div>
                                <span class="font-semibold text-gray-900">${msg.name}</span>
                            </div>
                            <span class="text-sm text-gray-500 bg-white px-3 py-1 rounded-full">${date}</span>
                        </div>
                        <p class="text-gray-700 leading-relaxed">${msg.message.substring(0, 150)}${msg.message.length > 150 ? '...' : ''}</p>
                        <div class="mt-3 text-xs text-gray-500">${msg.email}</div>
                    `;
                    
                    messagesList.appendChild(messageDiv);
                });
            }
        }

        // Initialize the app
        initializeApp();
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'996331895246ddcd',t:'MTc2MTc0NjM2Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
<html lang="hy">
<head>
<meta charset="UTF-8">
<title>RichLab</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  button { margin: 5px; padding: 5px 10px; cursor: pointer; }
</style>
</head>
<body>

<h1 id="app_name"></h1>
<p id="add_money_text"></p>
<button id="add_money"></button>
<p id="total_balance"></p>
<p id="tasks_desc"></p>
<p id="tasks_bonus"></p>
<p id="invite_desc"></p>
<p id="invite_bonus"></p>
<p id="watch_desc"></p>
<p id="watch_bonus"></p>
<p id="withdraw_desc"></p>
<p id="withdraw_condition"></p>
<p id="withdraw_warning"></p>
<button id="withdraw_button"></button>
<p id="withdraw_lock"></p>
<h3 id="support_title"></h3>
<p id="support_text"></p>
<button id="contact_support"></button>

<hr>
<button onclick="setLanguage('hy')">Հայերեն</button>
<button onclick="setLanguage('ru')">Русский</button>
<button onclick="setLanguage('gb')">English</button>
<button onclick="setLanguage('kz')">Қазақша</button>

<script>
// Թարգմանություններ
const translations = {
  hy: {
    app_name: "RichLab",
    add_money_text: "Ավելացրեք գումար և սկսեք վաստակել",
    add_money: "Ավելացնել գումար",
    total_balance: "Ընդհանուր մնացորդ",
    tasks_desc: "Փորձարկեք հավելվածներ և խաղեր",
    tasks_bonus: "յուրաքանչյուրի համար",
    invite_desc: "Ստացեք պարգև յուրաքանչյուր հրավերի համար",
    invite_bonus: "եկամուտ",
    watch_desc: "Դիտեք և վաստակեք գումար",
    watch_bonus: "յուրաքանչյուրի համար",
    withdraw_desc: "Ելքագրեք Ձեր վաստակած գումարը",
    withdraw_condition: "աշխատանքային օր",
    withdraw_warning: "⚠️ Գումարը կնստի Ձեր հաշվին 15 աշխատանքային օրերի ընթացքում",
    withdraw_button: "Ելքագրել գումար",
    withdraw_lock: "Դեպոզիտ չարած օգտատերերը չեն կարող կատարել withdrawal",
    support_title: "Car Zone Support",
    support_text: "Մենք այստեղ ենք՝ օգնելու համար",
    contact_support: "Կապվել աջակցման թիմի հետ"
  },
  ru: {
    app_name: "RichLab",
    add_money_text: "Добавьте деньги и начните зарабатывать",
    add_money: "Добавить деньги",
    total_balance: "Общий баланс",
    tasks_desc: "Тестируйте приложения и игры",
    tasks_bonus: "за каждое",
    invite_desc: "Получайте бонус за каждого приглашённого",
    invite_bonus: "дохода",
    watch_desc: "Смотрите и зарабатывайте деньги",
    watch_bonus: "за каждое",
    withdraw_desc: "Выведите заработанные деньги",
    withdraw_condition: "рабочих дней",
    withdraw_warning: "⚠️ Деньги поступят на ваш счёт в течение 15 рабочих дней",
    withdraw_button: "Вывести деньги",
    withdraw_lock: "Пользователи без депозита не могут выводить средства",
    support_title: "Поддержка Car Zone",
    support_text: "Мы всегда рады помочь",
    contact_support: "Связаться с поддержкой"
  },
  gb: {
    app_name: "RichLab",
    add_money_text: "Add funds and start earning",
    add_money: "Add Money",
    total_balance: "Total Balance",
    tasks_desc: "Test apps and games",
    tasks_bonus: "each",
    invite_desc: "Earn a reward for each friend you invite",
    invite_bonus: "income",
    watch_desc: "Watch and earn money",
    watch_bonus: "each",
    withdraw_desc: "Withdraw your earned funds",
    withdraw_condition: "working days",
    withdraw_warning: "⚠️ Funds will arrive in your account within 15 working days",
    withdraw_button: "Withdraw Money",
    withdraw_lock: "Users without a deposit cannot withdraw funds",
    support_title: "Car Zone Support",
    support_text: "We’re here to help",
    contact_support: "Contact Support"
  },
  kz: {
    app_name: "RichLab",
    add_money_text: "Ақша қосып, табыс табуды бастаңыз",
    add_money: "Ақша қосу",
    total_balance: "Жалпы баланс",
    tasks_desc: "Қосымшалар мен ойындарды сынаңыз",
    tasks_bonus: "әрқайсысы үшін",
    invite_desc: "Әр шақырылған адам үшін сыйақы алыңыз",
    invite_bonus: "табыс",
    watch_desc: "Қарап, ақша табыңыз",
    watch_bonus: "әр бейне үшін",
    withdraw_desc: "Тапқан ақшаңызды шығарыңыз",
    withdraw_condition: "жұмыс күні",
    withdraw_warning: "⚠️ Ақша 15 жұмыс күні ішінде шотыңызға түседі",
    withdraw_button: "Ақша шығару",
    withdraw_lock: "Депозитсіз пайдаланушылар шығара алмайды",
    support_title: "Car Zone Қолдау қызметі",
    support_text: "Біз көмектесуге дайынбыз",
    contact_support: "Қолдауға хабарласу"
  }
};

// Դինամիկ գումարներ
let amounts = {
  totalBalance: 150000,
  tasksBonus: 3000,
  inviteBonus: 5000,
  watchBonus: 2800,
  withdrawMin: 125000,
  withdrawDays: 15
};

// Լեզու փոխելու ֆունկցիա
function setLanguage(lang) {
  const t = translations[lang];
  document.getElementById('app_name').innerText = t.app_name;
  document.getElementById('add_money_text').innerText = t.add_money_text;
  document.getElementById('add_money').innerText = t.add_money;
  document.getElementById('total_balance').innerText = `${t.total_balance}: ${amounts.totalBalance}֏`;
  document.getElementById('tasks_desc').innerText = t.tasks_desc;
  document.getElementById('tasks_bonus').innerText = `+֏${amounts.tasksBonus} ${t.tasks_bonus}`;
  document.getElementById('invite_desc').innerText = t.invite_desc;
  document.getElementById('invite_bonus').innerText = `+֏${amounts.inviteBonus} + 10% ${t.invite_bonus}`;
  document.getElementById('watch_desc').innerText = t.watch_desc;
  document.getElementById('watch_bonus').innerText = `+֏${amounts.watchBonus} ${t.watch_bonus}`;
  document.getElementById('withdraw_desc').innerText = t.withdraw_desc;
  document.getElementById('withdraw_condition').innerText = `֏${amounts.withdrawMin} + ${amounts.withdrawDays} ${t.withdraw_condition}`;
  document.getElementById('withdraw_warning').innerText = t.withdraw_warning;
  document.getElementById('withdraw_button').innerText = t.withdraw_button;
  document.getElementById('withdraw_lock').innerText = t.withdraw_lock;
  document.getElementById('support_title').innerText = t.support_title;
  document.getElementById('support_text').innerText = t.support_text;
  document.getElementById('contact_support').innerText = t.contact_support;
}

// Սկզբնական լեզու
setLanguage('hy');
</script>
</body>
</html>
