<!DOCTYPE html>
<html lang="hy">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RichLab - ‘≤’°÷Å’•÷Ñ ’•’Ø’°’¥’ø’´ ’∞’∂’°÷Ä’°’æ’∏÷Ä’∏÷Ç’©’µ’∏÷Ç’∂’∂’•÷Ä</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            background: var(--tg-theme-bg-color, #f8fafc);
            color: var(--tg-theme-text-color, #1f2937);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        /* Enhanced Notification Animations */
        .notification {
            position: fixed;
            top: -100px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 9999;
            padding: 16px 24px;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
            min-width: 250px;
            text-align: center;
        }
        
        .notification.show {
            top: 20px;
            animation: notificationBounce 0.6s ease-out;
        }
        
        .notification.success {
            background: linear-gradient(135deg, #10b981, #059669);
            border: 1px solid rgba(16, 185, 129, 0.3);
        }
        
        .notification.error {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            border: 1px solid rgba(239, 68, 68, 0.3);
        }
        
        .notification.info {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            border: 1px solid rgba(59, 130, 246, 0.3);
        }
        
        @keyframes notificationBounce {
            0% { transform: translateX(-50%) translateY(-20px) scale(0.8); opacity: 0; }
            50% { transform: translateX(-50%) translateY(5px) scale(1.05); }
            100% { transform: translateX(-50%) translateY(0) scale(1); opacity: 1; }
        }
        
        @keyframes slideDown {
            from { transform: translate(-50%, -100%); opacity: 0; }
            to { transform: translate(-50%, 0); opacity: 1; }
        }
        
        @keyframes slideUp {
            from { transform: translate(-50%, 0); opacity: 1; }
            to { transform: translate(-50%, -100%); opacity: 0; }
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .telegram-button {
            background: var(--tg-theme-button-color, #3b82f6);
            color: var(--tg-theme-button-text-color, white);
            border: none;
            border-radius: 12px;
            padding: 12px 24px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .telegram-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(59, 130, 246, 0.3);
        }
        
        .telegram-button:active {
            transform: translateY(0);
        }
        
        .referral-link-container {
            background: linear-gradient(135deg, #f3f4f6, #e5e7eb);
            border: 2px solid #d1d5db;
            border-radius: 12px;
            padding: 4px;
            display: flex;
            gap: 8px;
        }
        
        .referral-input {
            flex: 1;
            padding: 12px 16px;
            border: none;
            border-radius: 8px;
            background: white;
            font-size: 14px;
            font-family: monospace;
        }
        
        .copy-button {
            padding: 12px 20px;
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .copy-button:hover {
            background: linear-gradient(135deg, #059669, #047857);
            transform: scale(1.05);
        }
        
        .copy-button.copied {
            background: linear-gradient(135deg, #6b7280, #4b5563);
        }
        
        .mini-app-container {
            max-width: 100%;
            padding: 0 16px;
            margin: 0 auto;
        }
        
        .section-card {
            background: var(--tg-theme-secondary-bg-color, white);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        
        .section-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }
        
        .user-profile {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 16px;
            padding: 20px;
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .user-profile::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: shimmer 3s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .share-buttons {
            display: flex;
            gap: 12px;
            margin-top: 16px;
        }
        
        .share-button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .share-button.telegram {
            background: linear-gradient(135deg, #0088cc, #006699);
            color: white;
        }
        
        .share-button.clipboard {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }
        
        .share-button:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
            margin-top: 20px;
        }
        
        .stat-card {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            backdrop-filter: blur(10px);
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255,255,255,0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .hidden {
            display: none !important;
        }
    </style>
<script src="https://sites.super.myninja.ai/_assets/ninja-daytona-script.js"></script>
</head>
<body class="bg-gray-50 min-h-full">
    <!-- Login Screen -->
    <div id="login-screen" class="fixed inset-0 bg-gradient-to-br from-blue-600 to-purple-700 flex items-center justify-center z-50">
        <div class="text-center text-white p-8">
            <div class="text-6xl mb-6">üöÄ</div>
            <h1 class="text-3xl font-bold mb-4">RichLab</h1>
            <p class="text-xl mb-8 opacity-90">‘≤’°÷Å’•÷Ñ ’•’Ø’°’¥’ø’´ ’∞’∂’°÷Ä’°’æ’∏÷Ä’∏÷Ç’©’µ’∏÷Ç’∂’∂’•÷Ä</p>
            
            <div id="login-content">
                <button onclick="loginWithTelegram()" class="bg-white text-blue-600 px-8 py-4 rounded-xl font-bold text-lg mb-4 w-full max-w-sm hover:bg-gray-100 transition-all duration-300 transform hover:scale-105">
                    <span class="mr-2">üì±</span>
                    ’Ñ’∏÷Ç’ø÷Ñ Telegram-’∏’æ
                </button>
                <p class="text-sm opacity-75">‘±’∂’æ’ø’°’∂’£ ’•÷Ç ’°÷Ä’°’£ ’¥’∏÷Ç’ø÷Ñ</p>
            </div>
            
            <div id="login-loading" class="hidden">
                <div class="loading-spinner"></div>
                <p class="text-lg mt-4">’Ñ’∏÷Ç’ø÷Ñ ’£’∏÷Ä’Æ’∏÷Ç’¥...</p>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="main-app" class="hidden">
        <!-- Mobile Header -->
        <header class="gradient-bg text-white py-4 sticky top-0 z-40">
            <div class="mini-app-container">
                <div class="flex items-center justify-between">
                    <h1 class="text-2xl font-bold">RichLab</h1>
                    <div class="flex items-center space-x-3">
                        <div id="user-info" class="text-sm opacity-90"></div>
                        <button onclick="showNotification('’ñ’∏÷Ç’∂’Ø÷Å’´’°’∂ ’¥’∑’°’Ø’¥’°’∂ ÷É’∏÷Ç’¨’∏÷Ç’¥ ’ß', 'info')" class="bg-white/20 text-white px-3 py-1 rounded-lg text-sm font-medium hover:bg-white/30 transition-all duration-300">
                            + ‘±’æ’•’¨’°÷Å’∂’•’¨
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="mini-app-container py-6">
            <!-- User Profile Section -->
            <div class="section-card mb-6">
                <div class="user-profile">
                    <div class="relative z-10">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-4">
                                <div class="w-16 h-16 bg-white/20 rounded-full flex items-center justify-center">
                                    <span class="text-2xl">üë§</span>
                                </div>
                                <div>
                                    <h3 id="user-name" class="text-xl font-bold">’ï’£’ø’°’ø’•÷Ä</h3>
                                    <div class="flex items-center space-x-3 text-sm opacity-90">
                                        <span id="user-username">@username</span>
                                        <span class="text-xs opacity-75">‚Ä¢</span>
                                        <span id="user-id" class="bg-white/20 px-2 py-1 rounded-full cursor-pointer hover:bg-white/30 transition-all duration-300">...000</span>
                                    </div>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="bg-green-500 text-white text-xs font-bold px-3 py-1 rounded-full mb-2">
                                    <div class="flex items-center space-x-1">
                                        <span class="w-2 h-2 bg-white rounded-full animate-pulse"></span>
                                        <span>’Ü’∏÷Ä ÷Ö’£’ø’°’ø’•÷Ä</span>
                                    </div>
                                </div>
                                <div class="text-xs opacity-75">PRO ’Ω’ø’°’ø’∏÷Ç’Ω</div>
                            </div>
                        </div>
                        
                        <div class="bg-white/10 backdrop-blur-sm rounded-lg p-4 text-center">
                            <div class="text-sm opacity-90 mb-1">‘∏’∂’©’°÷Å’´’Ø ’¥’∂’°÷Å’∏÷Ä’§</div>
                            <div class="text-3xl font-bold mb-2">‚ÇΩ8,000</div>
                            <div class="flex items-center justify-center space-x-4 text-xs opacity-75">
                                <span>üîí ‘±’∂’æ’ø’°’∂’£</span>
                                <span>‚Ä¢</span>
                                <span>‚ö° ‘±’Ø’ø’´’æ</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Referral Section -->
            <div class="section-card mb-6">
                <h3 class="text-xl font-bold mb-4">’Ä÷Ä’°’æ’•÷Ä’•÷Ñ ’®’∂’Ø’•÷Ä’∂’•÷Ä’´’∂ ’•÷Ç ’æ’°’Ω’ø’°’Ø’•÷Ñ</h3>
                
                <!-- Referral Link -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        ’Å’•÷Ä ’∞’≤’∏÷Ç’¥’® ’∞÷Ä’°’æ’•÷Ä’•’¨’∏÷Ç ’∞’°’¥’°÷Ä
                    </label>
                    <div class="referral-link-container">
                        <input 
                            type="text" 
                            id="referral-link" 
                            readonly 
                            class="referral-input"
                            value="https://t.me/BirdsGolden_bot/app?startapp=r_demo"
                        >
                        <button 
                            id="copy-button"
                            onclick="copyReferralLink()" 
                            class="copy-button"
                        >
                            <span id="copy-button-text">üìã ’ä’°’ø’≥’•’∂’•’¨</span>
                        </button>
                    </div>
                </div>

                <!-- Share Buttons -->
                <div class="share-buttons">
                    <button onclick="shareToTelegram()" class="share-button telegram">
                        <span>üì±</span>
                        <span>Telegram-’∏’æ ’∏÷Ç’≤’°÷Ä’Ø’•’¨</span>
                    </button>
                    <button onclick="copyReferralLink()" class="share-button clipboard">
                        <span>üìã</span>
                        <span>’ä’°’ø’≥’•’∂’•’¨ ’∞’≤’∏÷Ç’¥’®</span>
                    </button>
                </div>

                <!-- Stats -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="text-2xl font-bold">0</div>
                        <div class="text-sm opacity-90">’Ä÷Ä’°’æ’´÷Ä’æ’°’Æ’∂’•÷Ä</div>
                        <div class="text-xs opacity-75">‚ÇΩ4,000 ’°’¥’•’∂ ’¥’•’Ø’´÷Å</div>
                    </div>
                    <div class="stat-card">
                        <div class="text-2xl font-bold">10%</div>
                        <div class="text-sm opacity-90">‘≤’∏’∂’∏÷Ç’Ω</div>
                        <div class="text-xs opacity-75">’Ü÷Ä’°’∂÷Å ’•’Ø’°’¥’ø’´÷Å</div>
                    </div>
                    <div class="stat-card">
                        <div class="text-2xl font-bold">‚ÇΩ0</div>
                        <div class="text-sm opacity-90">‘∏’∂’§’∞’°’∂’∏÷Ç÷Ä</div>
                        <div class="text-xs opacity-75">’Ä÷Ä’°’æ’´÷Ä’∏÷Ç’©’µ’∏÷Ç’∂’´÷Å</div>
                    </div>
                </div>

                <!-- Benefits -->
                <div class="bg-gradient-to-r from-purple-500 to-pink-500 text-white p-4 rounded-lg mt-6">
                    <h4 class="font-bold mb-3">üéâ ‘≤’°÷Å’°’º’´’Ø ’°’º’°’æ’•’¨’∏÷Ç’©’µ’∏÷Ç’∂’∂’•÷Ä</h4>
                    <ul class="space-y-2 text-sm">
                        <li class="flex items-center space-x-2">
                            <span>üí∞</span>
                            <span>’ç’ø’°÷Å’•÷Ñ ’°’∂’¥’´’ª’°’∫’•’Ω ‚ÇΩ4,000 ’µ’∏÷Ç÷Ä’°÷Ñ’°’∂’π’µ’∏÷Ç÷Ä ’∞÷Ä’°’æ’´÷Ä’æ’°’Æ’´÷Å</span>
                        </li>
                        <li class="flex items-center space-x-2">
                            <span>üìà</span>
                            <span>’ç’ø’°÷Å’•÷Ñ 10% ’∂÷Ä’°’∂÷Å ’¢’∏’¨’∏÷Ä ’•’Ø’°’¥’ø’´÷Å</span>
                        </li>
                        <li class="flex items-center space-x-2">
                            <span>üèÜ</span>
                            <span>‘≤’°÷Å’°’º’´’Ø PRO ’Ω’ø’°’ø’∏÷Ç’Ω ’•÷Ç ’¢’∏’∂’∏÷Ç’Ω’∂’•÷Ä</span>
                        </li>
                    </ul>
                </div>

                <!-- Referrals List -->
                <div class="mt-6 bg-white border border-gray-200 rounded-lg p-4">
                    <h4 class="font-semibold mb-3">’Å’•÷Ä ’∞÷Ä’°’æ’´÷Ä’°’Æ’∂’•÷Ä’®</h4>
                    <div class="text-center py-8 text-gray-500">
                        <div class="text-4xl mb-2">üë•</div>
                        <div class="font-medium">’Ä÷Ä’°’æ’´÷Ä’æ’°’Æ’∂’•÷Ä ’π’Ø’°’∂</div>
                        <div class="text-sm">‘±’µ’Ω ’∫’°’∞’´’∂ ’§’∏÷Ç÷Ñ ’π’•÷Ñ ’∞÷Ä’°’æ’´÷Ä’•’¨ ’∏’π ’¥’•’Ø’´’∂</div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="grid grid-cols-2 gap-4">
                <button onclick="showNotification('‘±’º’°’ª’°’§÷Ä’°’∂÷Ñ’∂’•÷Ä’´ ’¢’°’™’´’∂’® ’¥’∑’°’Ø’¥’°’∂ ÷É’∏÷Ç’¨’∏÷Ç’¥ ’ß', 'info')" class="section-card text-center hover:bg-gradient-to-br hover:from-blue-50 hover:to-purple-50 transition-all duration-300">
                    <div class="text-2xl mb-2">üéØ</div>
                    <div class="font-semibold">‘±’º’°’ª’°’§÷Ä’°’∂÷Ñ’∂’•÷Ä</div>
                    <div class="text-sm text-gray-600">’é’°’Ω’ø’°’Ø’•÷Ñ ’°’Ø’ø’´’æ’∏÷Ç’©’µ’°’¥’¢</div>
                </button>
                
                <button onclick="showNotification('’è’•’Ω’°’∂’µ’∏÷Ç’©’•÷Ä’´ ’¢’°’™’´’∂’® ’¥’∑’°’Ø’¥’°’∂ ÷É’∏÷Ç’¨’∏÷Ç’¥ ’ß', 'info')" class="section-card text-center hover:bg-gradient-to-br hover:from-red-50 hover:to-pink-50 transition-all duration-300">
                    <div class="text-2xl mb-2">üé•</div>
                    <div class="font-semibold">’è’•’Ω’°’∂’µ’∏÷Ç’©’•÷Ä</div>
                    <div class="text-sm text-gray-600">’§’´’ø’•÷Ñ ’•÷Ç ’æ’°’Ω’ø’°’Ø’•÷Ñ</div>
                </button>
            </div>
        </main>
    </div>

    <script>
        // Global variables
        let telegramUser = null;
        let referralCode = '';
        let isInitialized = false;

        // Enhanced Telegram Web App initialization
        function initializeTelegramApp() {
            try {
                // Initialize Telegram Web App
                if (window.Telegram && window.Telegram.WebApp) {
                    window.Telegram.WebApp.ready();
                    window.Telegram.WebApp.expand();
                    window.Telegram.WebApp.setHeaderColor('#3b82f6');
                    
                    // Get user data from Telegram
                    telegramUser = window.Telegram.WebApp.initDataUnsafe?.user;
                    
                    if (telegramUser) {
                        // Extract user ID and username
                        const userId = telegramUser.id;
                        const username = telegramUser.username || telegramUser.first_name || 'User';
                        const firstName = telegramUser.first_name || 'User';
                        
                        // Generate referral code based on user ID
                        referralCode = `r_${userId}`;
                        
                        // Update UI with user information
                        updateUserInfo(userId, username, firstName);
                        generateReferralLink(referralCode);
                        
                        console.log('Telegram user initialized:', { userId, username, firstName });
                        showNotification('‘≤’°÷Ä’´ ’£’°’¨’∏÷Ç’Ω’ø RichLab!', 'success');
                    } else {
                        // Fallback for testing outside Telegram
                        console.log('Using demo user data');
                        useDemoUser();
                    }
                } else {
                    console.log('Telegram WebApp not available, using demo');
                    useDemoUser();
                }
                
                isInitialized = true;
            } catch (error) {
                console.error('Error initializing Telegram app:', error);
                showNotification('‘±’º’°’ª’°’§÷Ä’°’∂÷Ñ’´ ’Ω’Ø’¶’¢’∂’°’æ’∏÷Ä’¥’°’∂ ’Ω’≠’°’¨', 'error');
                useDemoUser();
            }
        }

        // Demo user fallback
        function useDemoUser() {
            const demoUserId = 8187899888;
            telegramUser = {
                id: demoUserId,
                username: 'demo_user',
                first_name: 'Demo'
            };
            referralCode = `r_${demoUserId}`;
            updateUserInfo(demoUserId, 'demo_user', 'Demo');
            generateReferralLink(referralCode);
            showNotification('‘¥’•’¥’∏ ’º’•’™’´’¥ - ÷É’∏÷Ä’±’°÷Ä’Ø’¥’°’∂ ’∞’°’¥’°÷Ä', 'info');
        }

        // Update user information in UI
        function updateUserInfo(userId, username, firstName) {
            // Update header user info
            const userInfoElement = document.getElementById('user-info');
            if (userInfoElement) {
                userInfoElement.textContent = `@${username}`;
            }
            
            // Update profile section
            const userNameElement = document.getElementById('user-name');
            if (userNameElement) {
                userNameElement.textContent = firstName;
            }
            
            const userUsernameElement = document.getElementById('user-username');
            if (userUsernameElement) {
                userUsernameElement.textContent = `@${username}`;
            }
            
            // Update user ID display (show last 3 digits)
            const userIdElement = document.getElementById('user-id');
            if (userIdElement) {
                userIdElement.textContent = `...${userId.toString().slice(-3)}`;
            }
        }

        // Generate dynamic referral link
        function generateReferralLink(code) {
            const botUsername = 'BirdsGolden_bot'; // Your bot username
            const referralLink = `https://t.me/${botUsername}/app?startapp=${code}`;
            
            // Update referral link input
            const referralInput = document.getElementById('referral-link');
            if (referralInput) {
                referralInput.value = referralLink;
            }
            
            console.log('Generated referral link:', referralLink);
            return referralLink;
        }

        // Copy referral link to clipboard
        async function copyReferralLink() {
            const referralInput = document.getElementById('referral-link');
            const copyButton = document.getElementById('copy-button');
            const copyButtonText = document.getElementById('copy-button-text');
            
            try {
                // Modern clipboard API
                await navigator.clipboard.writeText(referralInput.value);
                
                // Update button state
                copyButton.classList.add('copied');
                copyButtonText.textContent = '‚úÖ ’ä’°’ø’≥’•’∂’æ’°’Æ';
                
                // Show notification
                showNotification('’Ä’≤’∏÷Ç’¥’® ’∫’°’ø’≥’•’∂’æ’°’Æ ’ß!', 'success');
                
                // Reset button after 3 seconds
                setTimeout(() => {
                    copyButton.classList.remove('copied');
                    copyButtonText.textContent = 'üìã ’ä’°’ø’≥’•’∂’•’¨';
                }, 3000);
                
            } catch (err) {
                // Fallback for older browsers
                referralInput.select();
                document.execCommand('copy');
                
                copyButton.classList.add('copied');
                copyButtonText.textContent = '‚úÖ ’ä’°’ø’≥’•’∂’æ’°’Æ';
                showNotification('’Ä’≤’∏÷Ç’¥’® ’∫’°’ø’≥’•’∂’æ’°’Æ ’ß!', 'success');
                
                setTimeout(() => {
                    copyButton.classList.remove('copied');
                    copyButtonText.textContent = 'üìã ’ä’°’ø’≥’•’∂’•’¨';
                }, 3000);
            }
        }

        // Share to Telegram
        function shareToTelegram() {
            const referralLink = document.getElementById('referral-link').value;
            const shareText = `üöÄ ’Ñ’´’°÷Å’•÷Ñ RichLab-’´’∂ ’•÷Ç ’Ω’Ø’Ω’•÷Ñ ’æ’°’Ω’ø’°’Ø’•’¨ ’´÷Ä’°’Ø’°’∂ ’£’∏÷Ç’¥’°÷Ä!\n\nüí∞ ‘±’º’°’ª’°’§÷Ä’°’∂÷Ñ’∂’•÷Ä, ’∞÷Ä’°’æ’´÷Ä’∏÷Ç’©’µ’∏÷Ç’∂’∂’•÷Ä, ’ø’•’Ω’°’∂’µ’∏÷Ç’©’•÷Ä\nüéØ ’Ü’æ’°’¶’°’£’∏÷Ç’µ’∂’® ’§÷Ä’°’¥’°’Ø’°’∂ ’£’∏÷Ç’¥’°÷Ä ’∂’•÷Ä’§÷Ä’•÷Ñ\n\nüëâ ’Ñ’´’°’∂’°’¨’∏÷Ç ’∞’°’¥’°÷Ä’ù ${referralLink}`;
            
            if (window.Telegram && window.Telegram.WebApp) {
                // Use Telegram WebApp share API if available
                window.Telegram.WebApp.openTelegramLink(`https://t.me/share/url?url=${encodeURIComponent(referralLink)}&text=${encodeURIComponent(shareText)}`);
                showNotification('‘≤’°÷Å’æ’•’¨ ’ß Telegram ’Ø’´’Ω’∏÷Ç’¥', 'success');
            } else {
                // Fallback: open Telegram share URL
                const shareUrl = `https://t.me/share/url?url=${encodeURIComponent(referralLink)}&text=${encodeURIComponent(shareText)}`;
                window.open(shareUrl, '_blank');
                showNotification('‘≤’°÷Å’æ’•’¨ ’ß Telegram ’Ø’´’Ω’∏÷Ç’¥', 'success');
            }
        }

        // Enhanced notification system
        function showNotification(message, type = 'info', duration = 3000) {
            // Remove existing notifications
            const existingNotifications = document.querySelectorAll('.notification');
            existingNotifications.forEach(notif => notif.remove());
            
            // Create new notification
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <div class="flex items-center space-x-2">
                    <div class="text-lg">
                        ${type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : '‚ÑπÔ∏è'}
                    </div>
                    <div class="font-medium">${message}</div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Show notification with animation
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);
            
            // Auto remove after duration
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 400);
            }, duration);
        }

        // Initialize app
        function initApp() {
            // Initialize Telegram features
            initializeTelegramApp();
            
            // Hide login screen and show main app
            setTimeout(() => {
                document.getElementById('login-screen').style.display = 'none';
                document.getElementById('main-app').classList.remove('hidden');
            }, 1500);
        }

        // Login with Telegram
        function loginWithTelegram() {
            document.getElementById('login-content').style.display = 'none';
            document.getElementById('login-loading').style.display = 'block';
            
            // Simulate login process
            setTimeout(() => {
                initApp();
            }, 1000);
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Check if we're already in Telegram
            const urlParams = new URLSearchParams(window.location.search);
            const startapp = urlParams.get('startapp');
            
            if (startapp) {
                console.log('Started with referral code:', startapp);
                // Handle referral code here
                showNotification('‘¥’∏÷Ç÷Ñ ’¥’´’°÷Å’•’¨ ’•÷Ñ ’∞÷Ä’°’æ’•÷Ä’∏’æ!', 'success');
            }
        });

        // Handle page visibility changes
        document.addEventListener('visibilitychange', function() {
            if (!document.hidden && isInitialized) {
                // Refresh user data when page becomes visible
                console.log('Page became visible, refreshing...');
            }
        });
    </script>
</body>
</html>